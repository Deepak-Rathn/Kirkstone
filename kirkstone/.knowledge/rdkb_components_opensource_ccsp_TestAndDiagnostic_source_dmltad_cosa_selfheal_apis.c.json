{"is_source_file": true, "format": "C", "description": "This file implements back-end APIs for self-healing diagnostics in a Cisco-based system, including configuration retrieval, server list synchronization, scheduling, and diagnostic control functions.", "external_files": ["plugin_main_apis.h", "cosa_selfheal_apis.h", "cosa_logbackup_dml.h", "safec_lib_common.h", "<syscfg/syscfg.h>", "secure_wrapper.h"], "external_methods": ["syscfg_get", "syscfg_set_u_commit", "syscfg_unset", "syscfg_commit", "AnscAllocateMemory", "AnscFreeMemory", "AnscSListQueryDepth", "CosaSListPushEntryByInsNum", "v_secure_system", "v_secure_popen", "v_secure_pclose"], "published": ["CosaSelfHealCreate", "CosaSelfHealRemove", "CosaSelfHealInitialize", "CosaDmlGetSelfHealCfg", "CosaDmlGetSelfHealMonitorCfg", "CosaDmlGetSelfHealCpuMemFragCfg", "CosaDmlModifySelfHealDiagnosticModeStatus", "CosaDmlModifySelfHealDNSPingTestStatus", "CosaDmlModifySelfHealDNSPingTestURL", "RemovePingServerURI", "SavePingServerURI", "CosaReadProcAnalConfig", "CosaWriteProcAnalConfig", "CosaIsProcAnalRunning", "CosaSelfHealAPIModifyCronSchedule"], "classes": [], "methods": [{"name": "void copy_command_output(FILE * fp,char * buf,int len)", "description": "Reads one line of output from a FILE pointer into a buffer, removing the newline character.", "scope": "", "scopeKind": ""}, {"name": "int SyncServerlistInDb(PingServerType type,int EntryCount)", "description": "Synchronizes the server list entries with the system configuration database for IPv4 or IPv6 ping servers.", "scope": "", "scopeKind": ""}, {"name": "void FillEntryInList(PCOSA_DATAMODEL_SELFHEAL pSelfHeal,PCOSA_CONTEXT_SELFHEAL_LINK_OBJECT pSelfHealCxtLink,PingServerType type)", "description": "Populates the self-heal server list with a new entry for IPv4 or IPv6 based on current configuration.", "scope": "", "scopeKind": ""}, {"name": "PCOSA_DML_RESOUCE_MONITOR CosaDmlGetSelfHealMonitorCfg(ANSC_HANDLE hThisObject)", "description": "Retrieves self-healing resource monitor configuration parameters from system config.", "scope": "", "scopeKind": ""}, {"name": "void CpuMemFragCronSchedule(ULONG uinterval,BOOL bCollectnow)", "description": "Schedules or triggers CPU/memory fragmentation data collection scripts based on interval and flag.", "scope": "", "scopeKind": ""}, {"name": "void CosaDmlGetSelfHealCpuMemFragData(PCOSA_DML_CPU_MEM_FRAG_DMA pCpuMemFragDma)", "description": "Fetches CPU/memory fragmentation data from system configuration into provided structure.", "scope": "", "scopeKind": ""}, {"name": "PCOSA_DML_CPU_MEM_FRAG CosaDmlGetSelfHealCpuMemFragCfg(ANSC_HANDLE hThisObject)", "description": "Allocates and initializes CPU/memory fragmentation configuration, schedules collection.", "scope": "", "scopeKind": ""}, {"name": "PCOSA_DML_CONNECTIVITY_TEST CosaDmlGetSelfHealCfg(ANSC_HANDLE hThisObject)", "description": "Retrieves various self-healing configuration including ping servers, thresholds, diagnostic modes, etc.", "scope": "", "scopeKind": ""}, {"name": "ANSC_HANDLE CosaSelfHealCreate(VOID)", "description": "Creates and initializes the self-heal data model object.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaSelfHealInitialize(ANSC_HANDLE hThisObject)", "description": "Initializes self-heal object, loads configuration, sets up server lists, and schedules tasks.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaSelfHealRemove(ANSC_HANDLE hThisObject)", "description": "Frees resources associated with self-heal object.", "scope": "", "scopeKind": ""}, {"name": "void SavePingServerURI(PingServerType type,char * URL,int InstNum)", "description": "Stores a ping server URI into system configuration based on server type and instance number.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS RemovePingServerURI(PingServerType type,int InstNum)", "description": "Removes a specified ping server URI entry from system configuration.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaDmlModifySelfHealDiagnosticModeStatus(ANSC_HANDLE hThisObject,BOOL bValue)", "description": "Updates the diagnostic mode and related settings, including scheduling adjustments.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaDmlModifySelfHealDNSPingTestStatus(ANSC_HANDLE hThisObject,BOOL bValue)", "description": "Enables or disables DNS ping test and updates system config.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaDmlModifySelfHealDNSPingTestURL(ANSC_HANDLE hThisObject,PCHAR pString)", "description": "Sets the DNS ping test URL in system configuration.", "scope": "", "scopeKind": ""}, {"name": "VOID CosaSelfHealAPIModifyCronSchedule(BOOL bForceRun)", "description": "Modifies scheduled tasks related to self-healing diagnostics according to current configuration.", "scope": "", "scopeKind": ""}, {"name": "char * RemoveSpaces(char * str)", "description": "Removes all space characters from an input string.", "scope": "", "scopeKind": ""}, {"name": "void CosaReadProcAnalConfig(const char * paramname,char * res)", "description": "Reads a parameter value from a configuration file.", "scope": "", "scopeKind": ""}, {"name": "void CosaWriteProcAnalConfig(const char * paramname,char * res)", "description": "Writes or updates a parameter value in a configuration file.", "scope": "", "scopeKind": ""}, {"name": "int CosaIsProcAnalRunning()", "description": "Checks whether the 'cpuprocanalyzer' process is currently active.", "scope": "", "scopeKind": ""}], "calls": ["syscfg_get", "syscfg_set_u_commit", "syscfg_unset", "syscfg_commit", "AnscAllocateMemory", "AnscFreeMemory", "AnscSListQueryDepth", "CosaSListPushEntryByInsNum", "v_secure_system", "v_secure_popen", "v_secure_pclose"], "search-terms": ["SelfHeal", "ResourceMonitor", "PingServer", "CpuMemFrag", "Diagnostic", "CronSchedule", "SystemConfig", "ConfigFile", "ProcessCheck", "ResourceThreshold", "LogBackup"], "state": 2, "file_id": 9018, "knowledge_revision": 22041, "git_revision": "", "ctags": [{"_type": "tag", "name": "CosaDmlGetSelfHealCfg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^CosaDmlGetSelfHealCfg(    $/", "language": "C", "typeref": "typename:PCOSA_DML_CONNECTIVITY_TEST", "kind": "function", "signature": "(ANSC_HANDLE hThisObject)"}, {"_type": "tag", "name": "CosaDmlGetSelfHealCpuMemFragCfg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^CosaDmlGetSelfHealCpuMemFragCfg(    $/", "language": "C", "typeref": "typename:PCOSA_DML_CPU_MEM_FRAG", "kind": "function", "signature": "(ANSC_HANDLE hThisObject)"}, {"_type": "tag", "name": "CosaDmlGetSelfHealCpuMemFragData", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^void CosaDmlGetSelfHealCpuMemFragData(PCOSA_DML_CPU_MEM_FRAG_DMA pCpuMemFragDma )$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(PCOSA_DML_CPU_MEM_FRAG_DMA pCpuMemFragDma)"}, {"_type": "tag", "name": "CosaDmlGetSelfHealMonitorCfg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^CosaDmlGetSelfHealMonitorCfg(    $/", "language": "C", "typeref": "typename:PCOSA_DML_RESOUCE_MONITOR", "kind": "function", "signature": "(ANSC_HANDLE hThisObject)"}, {"_type": "tag", "name": "CosaDmlModifySelfHealDNSPingTestStatus", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^ANSC_STATUS CosaDmlModifySelfHealDNSPingTestStatus( ANSC_HANDLE hThisObject, $/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hThisObject,BOOL bValue)"}, {"_type": "tag", "name": "CosaDmlModifySelfHealDNSPingTestURL", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^ANSC_STATUS CosaDmlModifySelfHealDNSPingTestURL( ANSC_HANDLE hThisObject, $/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hThisObject,PCHAR pString)"}, {"_type": "tag", "name": "CosaDmlModifySelfHealDiagnosticModeStatus", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^ANSC_STATUS CosaDmlModifySelfHealDiagnosticModeStatus( ANSC_HANDLE hThisObject, $/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hThisObject,BOOL bValue)"}, {"_type": "tag", "name": "CosaIsProcAnalRunning", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^int CosaIsProcAnalRunning()$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "CosaReadProcAnalConfig", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^void CosaReadProcAnalConfig(const char *paramname, char *res)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(const char * paramname,char * res)"}, {"_type": "tag", "name": "CosaSelfHealAPIModifyCronSchedule", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^VOID CosaSelfHealAPIModifyCronSchedule( BOOL bForceRun )$/", "language": "C", "typeref": "typename:VOID", "kind": "function", "signature": "(BOOL bForceRun)"}, {"_type": "tag", "name": "CosaSelfHealCreate", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^CosaSelfHealCreate$/", "language": "C", "typeref": "typename:ANSC_HANDLE", "kind": "function", "signature": "(VOID)"}, {"_type": "tag", "name": "CosaSelfHealInitialize", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^CosaSelfHealInitialize$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hThisObject)"}, {"_type": "tag", "name": "CosaSelfHealRemove", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^CosaSelfHealRemove$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hThisObject)"}, {"_type": "tag", "name": "CosaWriteProcAnalConfig", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^void CosaWriteProcAnalConfig(const char *paramname, char *res)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(const char * paramname,char * res)"}, {"_type": "tag", "name": "CpuMemFragCronSchedule", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^void CpuMemFragCronSchedule(ULONG uinterval, BOOL bCollectnow)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(ULONG uinterval,BOOL bCollectnow)"}, {"_type": "tag", "name": "FillEntryInList", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^void FillEntryInList(PCOSA_DATAMODEL_SELFHEAL pSelfHeal,PCOSA_CONTEXT_SELFHEAL_LINK_OBJECT   pSe/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(PCOSA_DATAMODEL_SELFHEAL pSelfHeal,PCOSA_CONTEXT_SELFHEAL_LINK_OBJECT pSelfHealCxtLink,PingServerType type)"}, {"_type": "tag", "name": "Ipv4_Server", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^static char *Ipv4_Server =\"Ipv4_PingServer_%d\";$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "variable"}, {"_type": "tag", "name": "Ipv6_Server", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^static char *Ipv6_Server =\"Ipv6_PingServer_%d\";$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "variable"}, {"_type": "tag", "name": "RemovePingServerURI", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^ANSC_STATUS RemovePingServerURI(PingServerType type, int InstNum)$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(PingServerType type,int InstNum)"}, {"_type": "tag", "name": "RemoveSpaces", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^char* RemoveSpaces(char *str)$/", "language": "C", "typeref": "typename:char *", "kind": "function", "signature": "(char * str)"}, {"_type": "tag", "name": "SavePingServerURI", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^void SavePingServerURI(PingServerType type, char *URL, int InstNum)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(PingServerType type,char * URL,int InstNum)"}, {"_type": "tag", "name": "SyncServerlistInDb", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^int SyncServerlistInDb(PingServerType type, int EntryCount)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(PingServerType type,int EntryCount)"}, {"_type": "tag", "name": "copy_command_output", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "pattern": "/^void copy_command_output(FILE *fp, char * buf, int len)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(FILE * fp,char * buf,int len)"}], "hash": "48f6e7faa08379d7edc3c9266c6194e5", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/TestAndDiagnostic/source/dmltad/cosa_selfheal_apis.c", "fields": [{"name": "char * Ipv4_Server", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char * Ipv6_Server", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"22041": ""}]}