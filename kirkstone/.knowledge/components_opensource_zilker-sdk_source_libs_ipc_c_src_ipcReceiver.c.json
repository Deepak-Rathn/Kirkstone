{"is_source_file": true, "format": "C", "description": "This file implements a server-side IPC receiver in C. It manages socket creation, listening for incoming messages, dispatching processing to worker threads via a thread pool, and handling shutdown procedures. The code provides functions to start the receiver, handle incoming requests, and shut down gracefully.", "external_files": ["icBuildtime.h", "icLog/logging.h", "icConcurrent/threadPool.h", "icUtil/stringUtils.h", "icIpc/ipcReceiver.h", "icConcurrent/timedWait.h", "icConcurrent/threadUtils.h", "ipcCommon.h", "transport/transport.h"], "external_methods": ["transport_establish()", "transport_close()", "transport_sendmsg()", "transport_recvmsg()", "transport_abortmsg()", "threadPoolCreate()", "threadPoolDestroy()", "threadPoolAddTask()", "threadPoolGetStatistics()", "initTimedWaitCond()", "waitForRequestHandlerToShutdown()", "createThread()", "stringBuilder()"], "published": ["startRequestHandler", "shutdownRequestHandler", "waitForRequestHandlerToShutdown", "collectIpcStatistics"], "classes": [{"name": "ipcReceiver", "description": "Struct representing the server-side IPC receiver, including socket, thread pool, handler callback, and state management data."}], "methods": [{"name": "IpcReceiver startRequestHandler(uint16_t servicePortNum,serviceRequestHandler handler,serviceVisibility scope,uint16_t minThreads,uint16_t maxThreads,uint32_t maxQueueSize,asyncShutdownNotifyFunc shutdownNotifyFunc)", "description": "Initializes and starts the IPC receiver, setting up socket, thread pool, and main thread for listening to incoming messages.", "scope": "", "scopeKind": ""}, {"name": "void shutdownRequestHandler(IpcReceiver receiver)", "description": "Signals the receiver to shut down, closes socket, waits for main loop to exit, and cleans up resources.", "scope": "", "scopeKind": ""}, {"name": "void waitForRequestHandlerToShutdown(IpcReceiver receiver)", "description": "Blocks until the main receiver thread has completely shut down.", "scope": "", "scopeKind": ""}, {"name": "void collectIpcStatistics(IpcReceiver receiver,runtimeStatsPojo * container,bool thenClear)", "description": "Collects runtime statistics of the IPC thread pool for monitoring purposes.", "scope": "", "scopeKind": ""}, {"name": "void acquireReceiver(ipcReceiver * receiver)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ipcState getState(ipcReceiver * receiver)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void * mainLoop(void * ipcRecieverPtr)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void releaseReceiver(ipcReceiver * receiver)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void requestWorkTaskArgFreeFunc(void * arg)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void requestWorkerTask(void * args)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void setState(ipcReceiver * receiver,ipcState state)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["transport_establish()", "transport_close()", "transport_sendmsg()", "transport_recvmsg()", "transport_abortmsg()", "threadPoolCreate()", "threadPoolDestroy()", "threadPoolAddTask()", "threadPoolGetStatistics()", "initTimedWaitCond()", "waitForRequestHandlerToShutdown()", "createThread()", "stringBuilder()", "setState()", "getState()", "acquireReceiver()", "releaseReceiver()", "createIPCMessage()", "freeIPCMessage()", "icLogWarn()", "icLogError()", "icLogInfo()"], "search-terms": ["IPCReceiver", "ipcReceiver", "startRequestHandler", "mainLoop", "threadPool", "transport_recvmsg", "transport_sendmsg", "socket", "thread", "shutdown", "requestWorkerTask", "IPCMessage", "shutdownRequestHandler"], "state": 2, "file_id": 736, "knowledge_revision": 13899, "git_revision": "", "ctags": [{"_type": "tag", "name": "ADD_TASK_MAX_TRIES", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^#define ADD_TASK_MAX_TRIES /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "ADD_TASK_RETRY_US", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^#define ADD_TASK_RETRY_US /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "INTERNAL_SHUTDOWN_MSG", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^#define INTERNAL_SHUTDOWN_MSG /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "IPC_REC_DEAD", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^    IPC_REC_DEAD$/", "file": true, "language": "C", "kind": "enumerator", "scope": "__anon17fe30ff0103", "scopeKind": "enum"}, {"_type": "tag", "name": "IPC_REC_RUNNING", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^    IPC_REC_RUNNING,$/", "file": true, "language": "C", "kind": "enumerator", "scope": "__anon17fe30ff0103", "scopeKind": "enum"}, {"_type": "tag", "name": "IPC_REC_SHUTDOWN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^    IPC_REC_SHUTDOWN,$/", "file": true, "language": "C", "kind": "enumerator", "scope": "__anon17fe30ff0103", "scopeKind": "enum"}, {"_type": "tag", "name": "__anon17fe30ff0103", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^typedef enum {$/", "file": true, "language": "C", "kind": "enum"}, {"_type": "tag", "name": "_ipcReceiver", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^typedef struct _ipcReceiver$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "_ipcWorkerArgs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^typedef struct _ipcWorkerArgs$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "acquireReceiver", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^static void acquireReceiver(ipcReceiver *receiver)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(ipcReceiver * receiver)"}, {"_type": "tag", "name": "collectIpcStatistics", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^void collectIpcStatistics(IpcReceiver receiver, runtimeStatsPojo *container, bool thenClear)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(IpcReceiver receiver,runtimeStatsPojo * container,bool thenClear)"}, {"_type": "tag", "name": "control", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^    transport_control_t control;$/", "file": true, "language": "C", "typeref": "typename:transport_control_t", "kind": "member", "scope": "_ipcWorkerArgs", "scopeKind": "struct"}, {"_type": "tag", "name": "getState", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^static ipcState getState(ipcReceiver *receiver)$/", "file": true, "language": "C", "typeref": "typename:ipcState", "kind": "function", "signature": "(ipcReceiver * receiver)"}, {"_type": "tag", "name": "handler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^    serviceRequestHandler   handler;            \\/\\/ callback when messages arrive$/", "file": true, "language": "C", "typeref": "typename:serviceRequestHandler", "kind": "member", "scope": "_ipcReceiver", "scopeKind": "struct"}, {"_type": "tag", "name": "handler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^    serviceRequestHandler   handler;$/", "file": true, "language": "C", "typeref": "typename:serviceRequestHandler", "kind": "member", "scope": "_ipcWorkerArgs", "scopeKind": "struct"}, {"_type": "tag", "name": "input", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^    IPCMessage* input;$/", "file": true, "language": "C", "typeref": "typename:IPCMessage *", "kind": "member", "scope": "_ipcWorkerArgs", "scopeKind": "struct"}, {"_type": "tag", "name": "ipcCond", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^    pthread_cond_t          ipcCond;            \\/\\/ conditional broadcast to notify threads$/", "file": true, "language": "C", "typeref": "typename:pthread_cond_t", "kind": "member", "scope": "_ipcReceiver", "scopeKind": "struct"}, {"_type": "tag", "name": "ipcMtx", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^    pthread_mutex_t         ipcMtx;             \\/\\/ mutex for this IPCReceiver instance$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "member", "scope": "_ipcReceiver", "scopeKind": "struct"}, {"_type": "tag", "name": "ipcReceiver", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^} ipcReceiver;$/", "file": true, "language": "C", "typeref": "struct:_ipcReceiver", "kind": "typedef"}, {"_type": "tag", "name": "ipcState", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^} ipcState;$/", "file": true, "language": "C", "typeref": "enum:__anon17fe30ff0103", "kind": "typedef"}, {"_type": "tag", "name": "ipcWorkerArgs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^} ipcWorkerArgs;$/", "file": true, "language": "C", "typeref": "struct:_ipcWorkerArgs", "kind": "typedef"}, {"_type": "tag", "name": "mainLoop", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^static void *mainLoop(void *ipcRecieverPtr)$/", "file": true, "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "(void * ipcRecieverPtr)"}, {"_type": "tag", "name": "mainThread", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^    pthread_t               mainThread;         \\/\\/ see mainLoop()$/", "file": true, "language": "C", "typeref": "typename:pthread_t", "kind": "member", "scope": "_ipcReceiver", "scopeKind": "struct"}, {"_type": "tag", "name": "receiver", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^    ipcReceiver *receiver;$/", "file": true, "language": "C", "typeref": "typename:ipcReceiver *", "kind": "member", "scope": "_ipcWorkerArgs", "scopeKind": "struct"}, {"_type": "tag", "name": "refcnt", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^    uint8_t                 refcnt;$/", "file": true, "language": "C", "typeref": "typename:uint8_t", "kind": "member", "scope": "_ipcReceiver", "scopeKind": "struct"}, {"_type": "tag", "name": "releaseReceiver", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^static void releaseReceiver(ipcReceiver *receiver)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(ipcReceiver * receiver)"}, {"_type": "tag", "name": "requestWorkTaskArgFreeFunc", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^static void requestWorkTaskArgFreeFunc(void *arg)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void * arg)"}, {"_type": "tag", "name": "requestWorkerTask", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^static void requestWorkerTask(void *args)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void * args)"}, {"_type": "tag", "name": "serverSock", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^    int                     serverSock;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "member", "scope": "_ipcReceiver", "scopeKind": "struct"}, {"_type": "tag", "name": "servicePortNum", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^    uint16_t                servicePortNum;     \\/\\/ port number we're listening on$/", "file": true, "language": "C", "typeref": "typename:uint16_t", "kind": "member", "scope": "_ipcReceiver", "scopeKind": "struct"}, {"_type": "tag", "name": "setState", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^static void setState(ipcReceiver *receiver, ipcState state)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(ipcReceiver * receiver,ipcState state)"}, {"_type": "tag", "name": "shutdownNotifyFunc", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^    asyncShutdownNotifyFunc shutdownNotifyFunc; \\/\\/ callback when this receiver is being shut d/", "file": true, "language": "C", "typeref": "typename:asyncShutdownNotifyFunc", "kind": "member", "scope": "_ipcReceiver", "scopeKind": "struct"}, {"_type": "tag", "name": "shutdownRequestHandler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^void shutdownRequestHandler(IpcReceiver receiver)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(IpcReceiver receiver)"}, {"_type": "tag", "name": "sockfd", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^    int sockfd;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "member", "scope": "_ipcWorkerArgs", "scopeKind": "struct"}, {"_type": "tag", "name": "startRequestHandler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^IpcReceiver startRequestHandler(uint16_t servicePortNum, serviceRequestHandler handler, serviceV/", "language": "C", "typeref": "typename:IpcReceiver", "kind": "function", "signature": "(uint16_t servicePortNum,serviceRequestHandler handler,serviceVisibility scope,uint16_t minThreads,uint16_t maxThreads,uint32_t maxQueueSize,asyncShutdownNotifyFunc shutdownNotifyFunc)"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^    ipcState                state;              \\/\\/ if running, shutting down, or finished$/", "file": true, "language": "C", "typeref": "typename:ipcState", "kind": "member", "scope": "_ipcReceiver", "scopeKind": "struct"}, {"_type": "tag", "name": "threadPool", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^    icThreadPool            *threadPool;        \\/\\/ pool for processing requests$/", "file": true, "language": "C", "typeref": "typename:icThreadPool *", "kind": "member", "scope": "_ipcReceiver", "scopeKind": "struct"}, {"_type": "tag", "name": "waitForRequestHandlerToShutdown", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "pattern": "/^void waitForRequestHandlerToShutdown(IpcReceiver receiver)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(IpcReceiver receiver)"}], "hash": "c970e3c70e07a1b52d7fd03076cd3097", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "components/opensource/zilker-sdk/source/libs/ipc/c/src/ipcReceiver.c", "fields": [{"name": "transport_control_t control", "scope": "_ipcWorkerArgs", "scopeKind": "struct", "description": "unavailable"}, {"name": "serviceRequestHandler handler", "scope": "_ipcReceiver", "scopeKind": "struct", "description": "unavailable"}, {"name": "IPCMessage * input", "scope": "_ipcWorkerArgs", "scopeKind": "struct", "description": "unavailable"}, {"name": "pthread_cond_t ipcCond", "scope": "_ipcReceiver", "scopeKind": "struct", "description": "unavailable"}, {"name": "pthread_mutex_t ipcMtx", "scope": "_ipcReceiver", "scopeKind": "struct", "description": "unavailable"}, {"name": "pthread_t mainThread", "scope": "_ipcReceiver", "scopeKind": "struct", "description": "unavailable"}, {"name": "ipcReceiver * receiver", "scope": "_ipcWorkerArgs", "scopeKind": "struct", "description": "unavailable"}, {"name": "uint8_t refcnt", "scope": "_ipcReceiver", "scopeKind": "struct", "description": "unavailable"}, {"name": "int serverSock", "scope": "_ipcReceiver", "scopeKind": "struct", "description": "unavailable"}, {"name": "uint16_t servicePortNum", "scope": "_ipcReceiver", "scopeKind": "struct", "description": "unavailable"}, {"name": "asyncShutdownNotifyFunc shutdownNotifyFunc", "scope": "_ipcReceiver", "scopeKind": "struct", "description": "unavailable"}, {"name": "int sockfd", "scope": "_ipcWorkerArgs", "scopeKind": "struct", "description": "unavailable"}, {"name": "ipcState state", "scope": "_ipcReceiver", "scopeKind": "struct", "description": "unavailable"}, {"name": "icThreadPool * threadPool", "scope": "_ipcReceiver", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"13899": ""}]}