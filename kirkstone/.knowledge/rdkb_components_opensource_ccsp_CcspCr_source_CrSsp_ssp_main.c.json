{"is_source_file": true, "format": "C", "description": "This source file implements the main executable logic for the Cisco Component Registrar (CR) application within the CCSP platform. It handles initialization, signal processing, command dispatching for testing, and daemonization of the CR application. The code includes functionality for managing system capabilities, inter-process synchronization, and interactions with other CCSP components such as D-Bus and Rbus.", "external_files": ["syscfg/syscfg.h", "cap.h", "telemetry_busmessage_sender.h", "breakpad_wrapper.h", "execinfo.h", "sys/types.h", "sys/ipc.h", "semaphore.h", "fcntl.h"], "external_methods": ["CcspCreateCR", "InitDbus", "ExitDbus", "CcspFreeCR", "AnscTrace", "AnscTraceMemoryUsage", "AnscTraceMemoryTable", "CRRegisterTest", "CRUnregisterTest", "CRDiscoverTest", "BaseApiTest", "CRComponentTest", "CRCheckDataTypeTest", "CRSessionTest", "CcspRbusOpen", "CCSP_Msg_IsRbus_enabled", "CRRbusOpen", "CRRbusClose", "GenerateDataModelXml", "isBlocklisted", "init_capability", "drop_root_caps", "update_process_caps", "read_capability"], "published": ["main", "g_pCcspCrMgr", "g_pDbusHandle", "g_ulAllocatedSizeInit", "g_Subsystem", "g_crHealth", "g_exportAllDM"], "classes": [], "methods": [{"name": "int cmd_dispatch(int command)", "description": "Handles user commands and triggers corresponding actions such as creating and destroying the CR object, performing memory checks, testing namespace registration, and other diagnostic functions.", "scope": "", "scopeKind": ""}, {"name": "int gather_info(void)", "description": "Displays the application header and main menu for user interaction.", "scope": "", "scopeKind": ""}, {"name": "void sig_handler(int sig)", "description": "Handles system signals such as SIGINT, SIGTERM, and others, performing cleanup and diagnostics like stack traces.", "scope": "", "scopeKind": ""}, {"name": "void drop_root()", "description": "Drops root privileges if not on a blocklist, to run the process with lower privileges for security.", "scope": "", "scopeKind": ""}, {"name": "void * waitforsyscfgReady(void * arg)", "description": "Thread function that waits until the system configuration (syscfg) is initialized, then sets a flag indicating readiness.", "scope": "", "scopeKind": ""}, {"name": "int main(int argc,char * argv[])", "description": "Entry point of the application. Handles command-line arguments, daemonization, signal setup, initialization of Rbus or other communication protocols, and the main event loop.", "scope": "", "scopeKind": ""}, {"name": "void _print_stack_backtrace(void)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["CCSP_Msg_IsRbus_enabled", "CRRbusOpen", "CRRbusClose", "CcspCreateCR", "InitDbus", "ExitDbus", "CcspFreeCR", "GenerateDataModelXml", "isBlocklisted", "init_capability", "drop_root_caps", "update_process_caps", "read_capability"], "search-terms": ["CrSsp", "CCSP_CR_MANAGER_OBJECT", "CRRegisterTest", "CRUnregisterTest", "CRDiscoverTest", "BaseApiTest", "CRComponentTest", "CRCheckDataTypeTest", "CRSessionTest", "syscfg", "drop_root", "demonize", "signal_handler", "cr_initialized", "rbus"], "state": 2, "file_id": 6669, "knowledge_revision": 19772, "git_revision": "", "ctags": [{"_type": "tag", "name": "CCSP_COMMON_COMPONENT_HEALTH_Green", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^#define  CCSP_COMMON_COMPONENT_HEALTH_Green /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "CCSP_COMMON_COMPONENT_HEALTH_Red", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^#define  CCSP_COMMON_COMPONENT_HEALTH_Red /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "CCSP_COMMON_COMPONENT_HEALTH_Yellow", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^#define  CCSP_COMMON_COMPONENT_HEALTH_Yellow /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "DEBUG_INI_NAME", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^#define DEBUG_INI_NAME /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "MAX_WAIT_TIME", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^  #define MAX_WAIT_TIME /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SUBSYS_LEN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^#define SUBSYS_LEN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "TIME_INTERVAL", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^  #define TIME_INTERVAL /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "_print_stack_backtrace", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^static void _print_stack_backtrace(void)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "appcaps", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^static cap_user appcaps;$/", "file": true, "language": "C", "typeref": "typename:cap_user", "kind": "variable"}, {"_type": "tag", "name": "cmd_dispatch", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^static int cmd_dispatch (int command)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(int command)"}, {"_type": "tag", "name": "drop_root", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^static void drop_root()$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "g_Subsystem", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^char                                        g_Subsystem[SUBSYS_LEN] = {0};$/", "language": "C", "typeref": "typename:char[]", "kind": "variable"}, {"_type": "tag", "name": "g_crHealth", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^int                                         g_crHealth = CCSP_COMMON_COMPONENT_HEALTH_Red;$/", "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "g_dropStatus", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^bool g_dropStatus = false;$/", "language": "C", "typeref": "typename:bool", "kind": "variable"}, {"_type": "tag", "name": "g_exportAllDM", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^BOOLEAN                                     g_exportAllDM = false;$/", "language": "C", "typeref": "typename:BOOLEAN", "kind": "variable"}, {"_type": "tag", "name": "g_pCcspCrMgr", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^PCCSP_CR_MANAGER_OBJECT                     g_pCcspCrMgr            = NULL;$/", "language": "C", "typeref": "typename:PCCSP_CR_MANAGER_OBJECT", "kind": "variable"}, {"_type": "tag", "name": "g_pDbusHandle", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^void*                                       g_pDbusHandle           = NULL;$/", "language": "C", "typeref": "typename:void *", "kind": "variable"}, {"_type": "tag", "name": "g_ulAllocatedSizeInit", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^ULONG                                       g_ulAllocatedSizeInit   = 0;$/", "language": "C", "typeref": "typename:ULONG", "kind": "variable"}, {"_type": "tag", "name": "gather_info", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^static int gather_info (void)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "main", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^int main(int argc, char* argv[])$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(int argc,char * argv[])"}, {"_type": "tag", "name": "sig_handler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^static void sig_handler(int sig)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(int sig)"}, {"_type": "tag", "name": "waitforsyscfgReady", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "pattern": "/^static void* waitforsyscfgReady(void *arg)$/", "file": true, "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "(void * arg)"}], "hash": "fabfb7986967a64aa95b5cec31294900", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/CcspCr/source/CrSsp/ssp_main.c", "fields": [{"name": "cap_user appcaps", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char[] g_Subsystem", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int g_crHealth", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool g_dropStatus", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "BOOLEAN g_exportAllDM", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "PCCSP_CR_MANAGER_OBJECT g_pCcspCrMgr", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void * g_pDbusHandle", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ULONG g_ulAllocatedSizeInit", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"19772": ""}]}