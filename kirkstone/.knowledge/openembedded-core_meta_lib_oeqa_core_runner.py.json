{"is_source_file": true, "format": "Python", "description": "This file contains a collection of classes and functions for running, handling, and logging results of unit tests in a project. It includes custom test result classes, test runners, and utilities for logging, output handling, and exporting test results to JSON. The code is part of a testing framework used within the 'openembedded-core' metadata, specifically for the 'oeqa' testing suite.", "external_files": ["unittest", "logging", "re", "json", "sys", "os", "time"], "external_methods": ["unittest.suite.TestSuite", "unittest.case.TestCase", "bb.utils.mkdirhier", "bb.utils.lockfile", "bb.utils.unlockfile"], "published": ["OETestResult", "OETestRunner", "OEStreamLogger", "OETestResultJSONHelper"], "classes": [{"name": "OEStreamLogger", "description": "A custom stream object that redirects log messages to a specified logger, buffering messages and handling special cases such as messages containing ellipses."}, {"name": "OETestResult", "description": "A custom unittest Result class that records detailed test execution data, including timing, output, and results, and provides methods for summarizing and exporting test outcomes."}, {"name": "OEListTestsResult", "description": "A simple result class indicating all tests were successful, used for listing tests without actual execution."}, {"name": "OETestRunner", "description": "A custom unittest TestRunner that utilizes the OEStreamLogger, manages test execution, and supports listing tests by name, class, or module."}, {"name": "OETestResultJSONHelper", "description": "A helper class for dumping test results to JSON files, supporting reading existing results and writing new ones, including optional integration with 'bb' utilities."}], "methods": [{"name": "write(self, msg)", "description": "Write method for OEStreamLogger that buffers messages and logs them appropriately.", "scope": "OEStreamLogger", "scopeKind": "class"}, {"name": "flush(self)", "description": "Flush method for OEStreamLogger that flushes all handlers.", "scope": "OEStreamLogger", "scopeKind": "class"}, {"name": "__init__(self, logger)", "description": "Initializer for OEStreamLogger and OETestResult, sets up logger, timing, and other control variables.", "scope": "OEStreamLogger", "scopeKind": "class"}, {"name": "startTest(self, test)", "description": "Records start time for a test case.", "scope": "OETestResult", "scopeKind": "class"}, {"name": "stopTest(self, test)", "description": "Records end time, stores output, and logs progress info at test completion.", "scope": "OETestResult", "scopeKind": "class"}, {"name": "logSummary(self, component, context_msg='')", "description": "Logs summary information about test execution, including overall success or failure.", "scope": "OETestResult", "scopeKind": "class"}, {"name": "_getTestResultDetails(self, case)", "description": "Retrieves detailed status and logs for a specific test case.", "scope": "OETestResult", "scopeKind": "class"}, {"name": "extractExtraResults(self, test, details = None)", "description": "Gathers extra result data associated with a test case.", "scope": "OETestResult", "scopeKind": "class"}, {"name": "addError(self, test, *args, details = None)", "description": "Records an error for a test case and extracts extra results.", "scope": "OETestResult", "scopeKind": "class"}, {"name": "addFailure(self, test, *args, details = None)", "description": "Records a failure for a test case and extracts extra results.", "scope": "OETestResult", "scopeKind": "class"}, {"name": "addSuccess(self, test, details = None)", "description": "Records a successful test case execution.", "scope": "OETestResult", "scopeKind": "class"}, {"name": "addExpectedFailure(self, test, *args, details = None)", "description": "Records an expected failure for a test case.", "scope": "OETestResult", "scopeKind": "class"}, {"name": "addUnexpectedSuccess(self, test, details = None)", "description": "Records an unexpected success for a test case.", "scope": "OETestResult", "scopeKind": "class"}, {"name": "logDetails(self, json_file_dir=None, configuration=None, result_id=None, dump_streams=False)", "description": "Exports detailed test results and logs to JSON, with optional dumping of stream outputs.", "scope": "OETestResult", "scopeKind": "class"}, {"name": "wasSuccessful(self)", "description": "Determines if all tests passed, overriding default logic to account for unexpected successes.", "scope": "OETestResult", "scopeKind": "class"}, {"name": "_walk_suite(self, suite, func)", "description": "Recursively walks through a test suite, applying a given function to each test case.", "scope": "OETestRunner", "scopeKind": "class"}, {"name": "_list_tests_name(self, suite)", "description": "Lists all tests by name and tags.", "scope": "OETestRunner", "scopeKind": "class"}, {"name": "_list_tests_class(self, suite)", "description": "Lists all tests organized by class and module.", "scope": "OETestRunner", "scopeKind": "class"}, {"name": "_list_tests_module(self, suite)", "description": "Lists all tests by module.", "scope": "OETestRunner", "scopeKind": "class"}, {"name": "list_tests(self, suite, display_type)", "description": "Main method to list tests in specified display format (name, class, module).", "scope": "OETestRunner", "scopeKind": "class"}, {"name": "dump_testresult_file(self, write_dir, configuration, result_id, test_result)", "description": "Serializes and writes test results to a JSON file, optionally using 'bb' utilities.", "scope": "OETestResultJSONHelper", "scopeKind": "class"}, {"name": "__init__(self, tc, *args, **kwargs)", "scope": "OETestRunner", "scopeKind": "class", "description": "unavailable"}, {"name": "_get_existing_testresults_if_available(self, write_dir)", "scope": "OETestResultJSONHelper", "scopeKind": "class", "description": "unavailable"}, {"name": "_list_cases(logger, case)", "scope": "OETestRunner._list_tests_name", "scopeKind": "member", "description": "unavailable"}, {"name": "_list_classes(logger, case)", "scope": "OETestRunner._list_tests_class", "scopeKind": "member", "description": "unavailable"}, {"name": "_list_modules(logger, case)", "scope": "OETestRunner._list_tests_module", "scopeKind": "member", "description": "unavailable"}, {"name": "_makeResult(self)", "scope": "OETestRunner", "scopeKind": "class", "description": "unavailable"}, {"name": "_write_file(self, write_dir, file_name, file_content)", "scope": "OETestResultJSONHelper", "scopeKind": "class", "description": "unavailable"}], "calls": ["super(OETestResult, self).startTest", "super(OETestResult, self).stopTest", "logging.INFO", "sys.stdout.getvalue", "sys.stderr.getvalue", "time.time", "json.dump", "os.path.join", "os.path.exists", "open", "json.load", "json.dumps"], "search-terms": ["OETestResult", "OETestRunner", "OEStreamLogger", "testresults.json", "unittest", "custom test result", "test listing", "JSON dump", "test timing", "logging override", "test suite walk"], "state": 2, "file_id": 2022, "knowledge_revision": 15168, "git_revision": "", "ctags": [{"_type": "tag", "name": "OEListTestsResult", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^class OEListTestsResult(object):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OEStreamLogger", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^class OEStreamLogger(object):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OETestResult", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^class OETestResult(_TestResult):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OETestResultJSONHelper", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^class OETestResultJSONHelper(object):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OETestRunner", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^class OETestRunner(_TestRunner):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_TestResult", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^from unittest import TextTestResult as _TestResult$/", "language": "Python", "kind": "unknown", "nameref": "unknown:TextTestResult"}, {"_type": "tag", "name": "_TestRunner", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^from unittest import TextTestRunner as _TestRunner$/", "language": "Python", "kind": "unknown", "nameref": "unknown:TextTestRunner"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def __init__(self, logger):$/", "language": "Python", "kind": "member", "signature": "(self, logger)", "scope": "OEStreamLogger", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def __init__(self, tc, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, tc, *args, **kwargs)", "scope": "OETestResult", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def __init__(self, tc, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, tc, *args, **kwargs)", "scope": "OETestRunner", "scopeKind": "class"}, {"_type": "tag", "name": "_getTestResultDetails", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def _getTestResultDetails(self, case):$/", "language": "Python", "kind": "member", "signature": "(self, case)", "scope": "OETestResult", "scopeKind": "class"}, {"_type": "tag", "name": "_get_existing_testresults_if_available", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def _get_existing_testresults_if_available(self, write_dir):$/", "language": "Python", "kind": "member", "signature": "(self, write_dir)", "scope": "OETestResultJSONHelper", "scopeKind": "class"}, {"_type": "tag", "name": "_list_cases", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^        def _list_cases(logger, case):$/", "file": true, "language": "Python", "kind": "function", "signature": "(logger, case)", "scope": "OETestRunner._list_tests_name", "scopeKind": "member"}, {"_type": "tag", "name": "_list_classes", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^        def _list_classes(logger, case):$/", "file": true, "language": "Python", "kind": "function", "signature": "(logger, case)", "scope": "OETestRunner._list_tests_class", "scopeKind": "member"}, {"_type": "tag", "name": "_list_modules", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^        def _list_modules(logger, case):$/", "file": true, "language": "Python", "kind": "function", "signature": "(logger, case)", "scope": "OETestRunner._list_tests_module", "scopeKind": "member"}, {"_type": "tag", "name": "_list_tests_class", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def _list_tests_class(self, suite):$/", "language": "Python", "kind": "member", "signature": "(self, suite)", "scope": "OETestRunner", "scopeKind": "class"}, {"_type": "tag", "name": "_list_tests_module", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def _list_tests_module(self, suite):$/", "language": "Python", "kind": "member", "signature": "(self, suite)", "scope": "OETestRunner", "scopeKind": "class"}, {"_type": "tag", "name": "_list_tests_name", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def _list_tests_name(self, suite):$/", "language": "Python", "kind": "member", "signature": "(self, suite)", "scope": "OETestRunner", "scopeKind": "class"}, {"_type": "tag", "name": "_makeResult", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def _makeResult(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "OETestRunner", "scopeKind": "class"}, {"_type": "tag", "name": "_walk_suite", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def _walk_suite(self, suite, func):$/", "language": "Python", "kind": "member", "signature": "(self, suite, func)", "scope": "OETestRunner", "scopeKind": "class"}, {"_type": "tag", "name": "_write_file", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def _write_file(self, write_dir, file_name, file_content):$/", "language": "Python", "kind": "member", "signature": "(self, write_dir, file_name, file_content)", "scope": "OETestResultJSONHelper", "scopeKind": "class"}, {"_type": "tag", "name": "addError", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def addError(self, test, *args, details = None):$/", "language": "Python", "kind": "member", "signature": "(self, test, *args, details = None)", "scope": "OETestResult", "scopeKind": "class"}, {"_type": "tag", "name": "addExpectedFailure", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def addExpectedFailure(self, test, *args, details = None):$/", "language": "Python", "kind": "member", "signature": "(self, test, *args, details = None)", "scope": "OETestResult", "scopeKind": "class"}, {"_type": "tag", "name": "addFailure", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def addFailure(self, test, *args, details = None):$/", "language": "Python", "kind": "member", "signature": "(self, test, *args, details = None)", "scope": "OETestResult", "scopeKind": "class"}, {"_type": "tag", "name": "addSuccess", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def addSuccess(self, test, details = None):$/", "language": "Python", "kind": "member", "signature": "(self, test, details = None)", "scope": "OETestResult", "scopeKind": "class"}, {"_type": "tag", "name": "addUnexpectedSuccess", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def addUnexpectedSuccess(self, test, details = None):$/", "language": "Python", "kind": "member", "signature": "(self, test, details = None)", "scope": "OETestResult", "scopeKind": "class"}, {"_type": "tag", "name": "dump_testresult_file", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def dump_testresult_file(self, write_dir, configuration, result_id, test_result):$/", "language": "Python", "kind": "member", "signature": "(self, write_dir, configuration, result_id, test_result)", "scope": "OETestResultJSONHelper", "scopeKind": "class"}, {"_type": "tag", "name": "extractExtraResults", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def extractExtraResults(self, test, details = None):$/", "language": "Python", "kind": "member", "signature": "(self, test, details = None)", "scope": "OETestResult", "scopeKind": "class"}, {"_type": "tag", "name": "flush", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def flush(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "OEStreamLogger", "scopeKind": "class"}, {"_type": "tag", "name": "list_tests", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def list_tests(self, suite, display_type):$/", "language": "Python", "kind": "member", "signature": "(self, suite, display_type)", "scope": "OETestRunner", "scopeKind": "class"}, {"_type": "tag", "name": "logDetails", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def logDetails(self, json_file_dir=None, configuration=None, result_id=None,$/", "language": "Python", "kind": "member", "signature": "(self, json_file_dir=None, configuration=None, result_id=None, dump_streams=False)", "scope": "OETestResult", "scopeKind": "class"}, {"_type": "tag", "name": "logSummary", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def logSummary(self, component, context_msg=''):$/", "language": "Python", "kind": "member", "signature": "(self, component, context_msg='')", "scope": "OETestResult", "scopeKind": "class"}, {"_type": "tag", "name": "startTest", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def startTest(self, test):$/", "language": "Python", "kind": "member", "signature": "(self, test)", "scope": "OETestResult", "scopeKind": "class"}, {"_type": "tag", "name": "stopTest", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def stopTest(self, test):$/", "language": "Python", "kind": "member", "signature": "(self, test)", "scope": "OETestResult", "scopeKind": "class"}, {"_type": "tag", "name": "streamLoggerClass", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    streamLoggerClass = OEStreamLogger$/", "language": "Python", "kind": "variable", "scope": "OETestRunner", "scopeKind": "class"}, {"_type": "tag", "name": "testresult_filename", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    testresult_filename = 'testresults.json'$/", "language": "Python", "kind": "variable", "scope": "OETestResultJSONHelper", "scopeKind": "class"}, {"_type": "tag", "name": "wasSuccessful", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def wasSuccessful(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "OEListTestsResult", "scopeKind": "class"}, {"_type": "tag", "name": "wasSuccessful", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def wasSuccessful(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "OETestResult", "scopeKind": "class"}, {"_type": "tag", "name": "write", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/core/runner.py", "pattern": "/^    def write(self, msg):$/", "language": "Python", "kind": "member", "signature": "(self, msg)", "scope": "OEStreamLogger", "scopeKind": "class"}], "hash": "25a54cb5656396fe172395471aca0e03", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "openembedded-core/meta/lib/oeqa/core/runner.py", "fields": [{"name": "streamLoggerClass = OEStreamLogger", "scope": "OETestRunner", "scopeKind": "class", "description": "unavailable"}, {"name": "testresult_filename = 'testresults.json'", "scope": "OETestResultJSONHelper", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"15168": ""}]}