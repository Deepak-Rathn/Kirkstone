{"is_source_file": true, "format": "C", "description": "Source file implementing telemetry bus message sender, including message bus initialization, event handling, rbus/dbus interaction, and event caching logic.", "external_files": ["<ccsp/ccsp_memory.h>", "<ccsp/ccsp_custom.h>", "<ccsp/ccsp_base_api.h>", "<rbus/rbus.h>", "telemetry_busmessage_sender.h", "t2collection.h", "vector.h", "telemetry2_0.h", "t2log_wrapper.h", "telemetry_busmessage_internal.h"], "external_methods": ["CcspBaseIf_getParameterValues", "free_parameterValStruct_t", "rbus_close", "rbus_open", "rbus_get", "rbus_set", "rbusEvent_Subscribe", "rbusEvent_Release", "rbusValue_Init", "rbusValue_SetString", "rbusValue_GetType", "rbusValue_ToString", "rbusValue_Release", "rbusProperty_Init", "rbusProperty_GetName", "rbusProperty_GetNext", "rbusObject_GetProperties", "hash_map_create", "hash_map_put", "hash_map_get", "hash_map_destroy", "access", "popen", "fgets", "atoi", "snprintf"], "published": ["t2_init", "t2_uninit", "t2_event_s", "t2_event_f", "t2_event_d"], "classes": [], "methods": [{"name": "getParamValues", "description": "Retrieves multiple parameter values via CCSP base API."}, {"name": "freeParamValue", "description": "Frees memory allocated for parameterValStruct_t array."}, {"name": "getCCSPParamVal", "description": "Retrieves a single CCSP parameter value."}, {"name": "void rBusInterface_Uninit()", "description": "Closes the rbus handle.", "scope": "", "scopeKind": ""}, {"name": "T2ERROR initMessageBus()", "description": "Initializes the message bus, either via rbus or CCSP.", "scope": "", "scopeKind": ""}, {"name": "T2ERROR getRbusParameterVal(const char * paramName,char ** paramValue)", "description": "Retrieves a parameter value via rbus.", "scope": "", "scopeKind": ""}, {"name": "getParamValue", "description": "Generic interface to get parameter value via either rbus or CCSP, based on configuration."}, {"name": "cacheEventToFile", "description": "Caches telemetry event data to a file in a thread-safe manner."}, {"name": "bool initRFC()", "description": "Initializes RFC feature flags by reading configuration parameters.", "scope": "", "scopeKind": ""}, {"name": "filtered_event_send", "description": "Sends telemetry events, either via rbus or CCSP, depending on mode."}, {"name": "doPopulateEventMarkerList", "description": "Queries and updates the list of event markers from the message bus."}, {"name": "void rbusEventReceiveHandler(rbusHandle_t handle,rbusEvent_t const * event,rbusEventSubscription_t * subscription)", "description": "Callback handler for received rbus events; triggers marker list update.", "scope": "", "scopeKind": ""}, {"name": "bool isCachingRequired()", "description": "Determines whether event caching is needed based on current system state.", "scope": "", "scopeKind": ""}, {"name": "int report_or_cache_data(char * telemetry_data,char * markerName)", "description": "Decides whether to cache telemetry data or send immediately.", "scope": "", "scopeKind": ""}, {"name": "void t2_init(char * component)", "description": "Initializes component name for telemetry reporting.", "scope": "", "scopeKind": ""}, {"name": "void t2_uninit(void)", "description": "Uninitializes telemetry library, releasing resources.", "scope": "", "scopeKind": ""}, {"name": "T2ERROR t2_event_s(char * marker,char * value)", "description": "Sends a string telemetry event with a marker.", "scope": "", "scopeKind": ""}, {"name": "T2ERROR t2_event_f(char * marker,double value)", "description": "Sends a float telemetry event with a marker.", "scope": "", "scopeKind": ""}, {"name": "T2ERROR t2_event_d(char * marker,int value)", "description": "Sends an integer telemetry event with a marker.", "scope": "", "scopeKind": ""}, {"name": "void initMutex()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void uninitMutex()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getParamValues", "free_parameterValStruct_t", "rbus_close", "rbus_open", "rbus_get", "rbus_set", "rbusEvent_Subscribe", "rbusValue_Init", "rbusValue_SetString", "rbusValue_GetType", "rbusValue_ToString", "rbusValue_Release", "rbusProperty_Init", "rbusObject_GetProperties", "hash_map_create", "hash_map_put", "hash_map_get", "hash_map_destroy", "access", "popen", "fgets", "atoi", "snprintf"], "search-terms": ["telemetry_busmessage_sender", "filtered_event_send", "eventMarkerMap", "cacheEventToFile", "T2_COMPONENT_READY", "T2_EVENT_PARAM", "T2_PROFILE_UPDATED_NOTIFY", "T2_ROOT_PARAMETER", "T2_EVENT_LIST_PARAM_SUFFIX"], "state": 2, "file_id": 12896, "knowledge_revision": 25799, "git_revision": "", "ctags": [{"_type": "tag", "name": "getRbusParameterVal", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^static T2ERROR getRbusParameterVal(const char* paramName, char **paramValue) {$/", "file": true, "language": "C", "typeref": "typename:T2ERROR", "kind": "function", "signature": "(const char * paramName,char ** paramValue)"}, {"_type": "tag", "name": "initMessageBus", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^static T2ERROR initMessageBus( ) {$/", "file": true, "language": "C", "typeref": "typename:T2ERROR", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "initMtx", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^static pthread_mutex_t initMtx = PTHREAD_MUTEX_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "initMutex", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^static void initMutex() {$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "initRFC", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^static bool initRFC( ) {$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "isCachingRequired", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^static bool isCachingRequired( ) {$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "isMutexInitialized", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^static bool isMutexInitialized = false ;$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "variable"}, {"_type": "tag", "name": "isRFCT2Enable", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^static bool isRFCT2Enable = false ;$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "variable"}, {"_type": "tag", "name": "isRbusEnabled", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^static bool isRbusEnabled = false ;$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "variable"}, {"_type": "tag", "name": "isT2Ready", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^static bool isT2Ready = false;$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "variable"}, {"_type": "tag", "name": "loggerMutex", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^static pthread_mutex_t loggerMutex ;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "markerListMutex", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^static pthread_mutex_t markerListMutex ;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "mutexAttr", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^static pthread_mutexattr_t mutexAttr;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutexattr_t", "kind": "variable"}, {"_type": "tag", "name": "rBusInterface_Uninit", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^static void rBusInterface_Uninit( ) {$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "rbusEventReceiveHandler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^static void rbusEventReceiveHandler(rbusHandle_t handle, rbusEvent_t const* event, rbusEventSubs/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(rbusHandle_t handle,rbusEvent_t const * event,rbusEventSubscription_t * subscription)"}, {"_type": "tag", "name": "report_or_cache_data", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^static int report_or_cache_data(char* telemetry_data, char* markerName) {$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * telemetry_data,char * markerName)"}, {"_type": "tag", "name": "sMutex", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^static pthread_mutex_t sMutex ;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "t2_event_d", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^T2ERROR t2_event_d(char* marker, int value) {$/", "language": "C", "typeref": "typename:T2ERROR", "kind": "function", "signature": "(char * marker,int value)"}, {"_type": "tag", "name": "t2_event_f", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^T2ERROR t2_event_f(char* marker, double value) {$/", "language": "C", "typeref": "typename:T2ERROR", "kind": "function", "signature": "(char * marker,double value)"}, {"_type": "tag", "name": "t2_event_s", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^T2ERROR t2_event_s(char* marker, char* value) {$/", "language": "C", "typeref": "typename:T2ERROR", "kind": "function", "signature": "(char * marker,char * value)"}, {"_type": "tag", "name": "t2_init", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^void t2_init(char *component) {$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(char * component)"}, {"_type": "tag", "name": "t2_uninit", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^void t2_uninit(void) {$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "uninitMutex", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "pattern": "/^static void uninitMutex() {$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}], "hash": "2e80f3b79993bb0ce2b5c9d3d9affb1f", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdk/components/generic/telemetry/source/commonlib/telemetry_busmessage_sender.c", "fields": [{"name": "pthread_mutex_t initMtx", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool isMutexInitialized", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool isRFCT2Enable", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool isRbusEnabled", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool isT2Ready", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_mutex_t loggerMutex", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_mutex_t markerListMutex", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_mutexattr_t mutexAttr", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_mutex_t sMutex", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"25799": ""}]}