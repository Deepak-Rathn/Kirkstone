{"is_source_file": true, "format": "C", "description": "This file implements the hardware abstraction layer (HAL) for firmware upgrade functionality on a Raspberry Pi device. It includes functions to set and get download URLs, initiate downloads, monitor download status, reboot the device, and perform firmware update and factory reset procedures.", "external_files": ["fwupgrade_hal.h", "/lib/rdk/rpi_image_Flasher.sh"], "external_methods": ["fwupgrade_hal_get_download_url", "fwupgrade_hal_util_get_syscmd_output"], "published": ["fwupgrade_hal_set_download_url", "fwupgrade_hal_get_download_url", "fwupgrade_hal_set_download_interface", "fwupgrade_hal_get_download_interface", "fwupgrade_hal_download", "fwupgrade_hal_get_download_status", "fwupgrade_hal_reboot_ready", "fwupgrade_hal_download_reboot_now", "fwupgrade_hal_update_and_factoryreset", "fwupgrade_hal_download_install"], "classes": [], "methods": [{"name": "INT fwupgrade_hal_util_get_syscmd_output(char * pCmd,char * pOutput,int iOutputSize)", "description": "Executes a system command and captures its output into a provided buffer.", "scope": "", "scopeKind": ""}, {"name": "INT download_image_from_server(char * httpUrl,char * fileName)", "description": "Downloads a firmware image from a specified HTTP URL to a local directory.", "scope": "", "scopeKind": ""}, {"name": "INT fwupgrade_hal_set_download_url(char * pUrl,char * pfilename)", "description": "Sets the URL and filename for firmware download, saving to configuration files.", "scope": "", "scopeKind": ""}, {"name": "INT fwupgrade_hal_get_download_url(char * pUrl,char * pfilename)", "description": "Retrieves the stored firmware download URL and filename from configuration files.", "scope": "", "scopeKind": ""}, {"name": "INT fwupgrade_hal_set_download_interface(unsigned int interface)", "description": "Sets the network interface (wan0 or erouter0) for download via configuration file.", "scope": "", "scopeKind": ""}, {"name": "INT fwupgrade_hal_get_download_interface(unsigned int * pinterface)", "description": "Gets the configured network interface for download.", "scope": "", "scopeKind": ""}, {"name": "INT fwupgrade_hal_download()", "description": "Initiates the firmware download process, including DNS resolution and image retrieval.", "scope": "", "scopeKind": ""}, {"name": "INT fwupgrade_hal_get_download_status()", "description": "Checks the current status of the ongoing or last firmware download.", "scope": "", "scopeKind": ""}, {"name": "INT fwupgrade_hal_reboot_ready(ULONG * pValue)", "description": "Checks if the device is ready to reboot after firmware update.", "scope": "", "scopeKind": ""}, {"name": "INT fwupgrade_hal_download_reboot_now()", "description": "Performs device reboot after firmware download and sets reboot reason.", "scope": "", "scopeKind": ""}, {"name": "INT fwupgrade_hal_update_and_factoryreset()", "description": "Performs firmware update and then resets the device to factory settings.", "scope": "", "scopeKind": ""}, {"name": "INT fwupgrade_hal_download_install(const char * url)", "description": "Placeholder function for downloading and installing firmware from a URL.", "scope": "", "scopeKind": ""}], "calls": ["fwupgrade_hal_get_download_url", "fwupgrade_hal_util_get_syscmd_output", "system", "gethostbyname", "inet_ntoa"], "search-terms": ["fwupgrade_hal", "download_url", "firmware download", "reboot device", "firmware status", "raspberrypi firmware", "fwupgrade", "download interface", "HTTP download"], "state": 2, "file_id": 12457, "knowledge_revision": 25351, "git_revision": "", "ctags": [{"_type": "tag", "name": "HTTP_DWNLD_CONFIG_FILE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/devices/raspberrypi/hal/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^#define HTTP_DWNLD_CONFIG_FILE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "HTTP_DWNLD_IF_FILE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/devices/raspberrypi/hal/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^#define HTTP_DWNLD_IF_FILE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "REBOOT_REASON_SW_UPGRADE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/devices/raspberrypi/hal/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^#define REBOOT_REASON_SW_UPGRADE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "download_image_from_server", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/devices/raspberrypi/hal/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^static INT download_image_from_server(char *httpUrl, char* fileName)$/", "file": true, "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "(char * httpUrl,char * fileName)"}, {"_type": "tag", "name": "fwupgrade_hal_download", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/devices/raspberrypi/hal/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^INT fwupgrade_hal_download ()$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fwupgrade_hal_download_install", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/devices/raspberrypi/hal/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^INT fwupgrade_hal_download_install(const char *url)$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "(const char * url)"}, {"_type": "tag", "name": "fwupgrade_hal_download_reboot_now", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/devices/raspberrypi/hal/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^INT fwupgrade_hal_download_reboot_now()$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fwupgrade_hal_get_download_interface", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/devices/raspberrypi/hal/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^INT fwupgrade_hal_get_download_interface(unsigned int* pinterface)$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "(unsigned int * pinterface)"}, {"_type": "tag", "name": "fwupgrade_hal_get_download_status", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/devices/raspberrypi/hal/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^INT fwupgrade_hal_get_download_status()$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fwupgrade_hal_get_download_url", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/devices/raspberrypi/hal/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^INT fwupgrade_hal_get_download_url (char *pUrl, char* pfilename)$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "(char * pUrl,char * pfilename)"}, {"_type": "tag", "name": "fwupgrade_hal_reboot_ready", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/devices/raspberrypi/hal/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^INT fwupgrade_hal_reboot_ready(ULONG *pValue)$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "(ULONG * pValue)"}, {"_type": "tag", "name": "fwupgrade_hal_set_download_interface", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/devices/raspberrypi/hal/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^INT fwupgrade_hal_set_download_interface(unsigned int interface)$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "(unsigned int interface)"}, {"_type": "tag", "name": "fwupgrade_hal_set_download_url", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/devices/raspberrypi/hal/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^INT fwupgrade_hal_set_download_url (char* pUrl, char* pfilename)$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "(char * pUrl,char * pfilename)"}, {"_type": "tag", "name": "fwupgrade_hal_update_and_factoryreset", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/devices/raspberrypi/hal/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^INT fwupgrade_hal_update_and_factoryreset()$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fwupgrade_hal_util_get_syscmd_output", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/devices/raspberrypi/hal/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^static INT fwupgrade_hal_util_get_syscmd_output( char *pCmd, char *pOutput, int iOutputSize )$/", "file": true, "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "(char * pCmd,char * pOutput,int iOutputSize)"}, {"_type": "tag", "name": "gDwdInProgressFlag", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/devices/raspberrypi/hal/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^static int gDwdInProgressFlag = 0; \\/* flag to set dload inprogress *\\/$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "variable"}], "hash": "55fbc943c009ccb480f13d36021b02eb", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/devices/raspberrypi/hal/source/fwupgrade/fwupgrade_hal.c", "fields": [{"name": "int gDwdInProgressFlag", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"25351": ""}]}