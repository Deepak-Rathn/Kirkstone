{"is_source_file": true, "format": "C", "description": "This source file implements reporting functionalities for Wi-Fi statistics, including sending reports to a messaging queue, managing report tasks, and handling different report caches like client, survey, and neighbor reports.", "external_files": ["sm_report.h", "scheduler.h", "sm_utils.h", "wifi_mgr.h", "<const.h>", "<opensync/dppline.h>", "<qm_conn.h>"], "external_methods": ["qm_conn_send_stats", "hash_map_get_first", "hash_map_get_next", "hash_map_get", "hash_map_put", "hash_map_remove", "hash_map_destroy", "scheduler_add_timer_task", "scheduler_cancel_timer_task", "scheduler_free_timer_task_arg", "scheduler_update_timer_task_repetitions", "scheduler_update_timer_task_interval", "dpp_get_queue_elements", "dpp_get_report", "qm_conn_get_status", "get_wifidb_radio_map", "convert_freq_band_to_radio_index", "sm_client_report_push_to_dpp", "sm_survey_report_push_to_dpp", "sm_neighbor_report_push_to_dpp", "sm_client_cache_init", "sm_survey_cache_init", "sm_neighbor_cache_init", "sm_client_cache_deinit", "sm_survey_cache_deinit", "sm_neighbor_cache_deinit"], "published": ["sm_report_send_to_qm_cb", "sm_report_start_task", "sm_report_config_task", "sm_report_init", "sm_report_deinit"], "classes": [], "methods": [{"name": "bool sm_mqtt_publish(long mlen,void * mbuf)", "description": "Publishes MQTT report data via qm_conn_send_stats.", "scope": "", "scopeKind": ""}, {"name": "int report_tasks_clean_finished(struct scheduler * sched,hash_map_t * report_tasks_map)", "description": "Removes completed report tasks from the scheduler and hash map.", "scope": "", "scopeKind": ""}, {"name": "int report_push_to_dpp_cb(void * args)", "description": "Callback function to push collected reports to the Data Processing Pipeline (DPP).", "scope": "", "scopeKind": ""}, {"name": "void client_report_cache_init_all()", "description": "Initializes all client report caches.", "scope": "", "scopeKind": ""}, {"name": "void survey_report_cache_init_all()", "description": "Initializes all survey report caches.", "scope": "", "scopeKind": ""}, {"name": "void neighbor_report_cache_init_all()", "description": "Initializes all neighbor report caches.", "scope": "", "scopeKind": ""}, {"name": "void client_report_cache_free_all()", "description": "Deinitializes all client report caches.", "scope": "", "scopeKind": ""}, {"name": "void survey_report_cache_free_all()", "description": "Deinitializes all survey report caches.", "scope": "", "scopeKind": ""}, {"name": "void neighbor_report_cache_free_all()", "description": "Deinitializes all neighbor report caches.", "scope": "", "scopeKind": ""}, {"name": "int report_tasks_map_free(wifi_app_t * app)", "description": "Frees all report tasks and associated resources from the app.", "scope": "", "scopeKind": ""}, {"name": "int sm_report_send_to_qm_cb(void * args)", "description": "Periodic callback to send queued reports to the Queue Manager.", "scope": "", "scopeKind": ""}, {"name": "int sm_report_start_task(stats_type_t type,wifi_app_t * app,wifi_mon_stats_request_state_t state,const stats_config_t * config)", "description": "Starts a reporting task based on the report type and configuration.", "scope": "", "scopeKind": ""}, {"name": "int sm_report_config_task(wifi_app_t * app,wifi_mon_stats_request_state_t state,const stats_config_t * config)", "description": "Creates or updates a report task timer based on the configuration and request state.", "scope": "", "scopeKind": ""}, {"name": "int sm_report_init(wifi_app_t * app)", "description": "Initializes report caches and schedules periodic report sending and counter publishing tasks.", "scope": "", "scopeKind": ""}, {"name": "int sm_report_deinit(wifi_app_t * app)", "description": "Cancels scheduled tasks and cleans up report caches and tasks.", "scope": "", "scopeKind": ""}], "calls": ["qm_conn_send_stats", "hash_map_get_first", "hash_map_get_next", "hash_map_get", "hash_map_put", "hash_map_remove", "hash_map_destroy", "scheduler_add_timer_task", "scheduler_cancel_timer_task", "scheduler_free_timer_task_arg", "scheduler_update_timer_task_repetitions", "scheduler_update_timer_task_interval", "dpp_get_queue_elements", "dpp_get_report", "qm_conn_get_status", "get_wifidb_radio_map", "convert_freq_band_to_radio_index", "sm_client_report_push_to_dpp", "sm_survey_report_push_to_dpp", "sm_neighbor_report_push_to_dpp", "sm_client_cache_init", "sm_survey_cache_init", "sm_neighbor_cache_init", "sm_client_cache_deinit", "sm_survey_cache_deinit", "sm_neighbor_cache_deinit"], "search-terms": ["sm_report", "report_tasks", "push_to_dpp", "survey_report", "neighbor_report", "wifi_stats", "scheduler_tasks", "cache_management", "MQTT", "statistics_reporting"], "state": 2, "file_id": 6054, "knowledge_revision": 19157, "git_revision": "", "ctags": [{"_type": "tag", "name": "SM_SURVEY_REPORT_COUNTER_INTERVAL_SEC", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^#define SM_SURVEY_REPORT_COUNTER_INTERVAL_SEC /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SM_TO_QM_SEND_INTERVAL_SEC", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^#define SM_TO_QM_SEND_INTERVAL_SEC /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "__anona7810ca90108", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^typedef struct {$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^    wifi_app_t      *app;$/", "file": true, "language": "C", "typeref": "typename:wifi_app_t *", "kind": "member", "scope": "__anona7810ca90108", "scopeKind": "struct"}, {"_type": "tag", "name": "client_report_cache_free_all", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^static inline void client_report_cache_free_all()$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "client_report_cache_init_all", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^static inline void client_report_cache_init_all()$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "neighbor_report_cache_free_all", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^static inline void neighbor_report_cache_free_all()$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "neighbor_report_cache_init_all", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^static inline void neighbor_report_cache_init_all()$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "report_push_to_dpp_cb", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^static int report_push_to_dpp_cb(void *args)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(void * args)"}, {"_type": "tag", "name": "report_tasks_clean_finished", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^static int report_tasks_clean_finished(struct scheduler *sched, hash_map_t *report_tasks_map)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler * sched,hash_map_t * report_tasks_map)"}, {"_type": "tag", "name": "report_tasks_map_free", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^static int report_tasks_map_free(wifi_app_t *app)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(wifi_app_t * app)"}, {"_type": "tag", "name": "reports_counter_task_id", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^int reports_counter_task_id = -1;$/", "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "send_qm_task_id", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^int send_qm_task_id = -1;$/", "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "sm_client_report_cache", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^sm_client_cache_t    sm_client_report_cache[MAX_NUM_RADIOS];$/", "language": "C", "typeref": "typename:sm_client_cache_t[]", "kind": "variable"}, {"_type": "tag", "name": "sm_mqtt_publish", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^static bool sm_mqtt_publish(long mlen, void *mbuf)$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(long mlen,void * mbuf)"}, {"_type": "tag", "name": "sm_neighbor_report_cache", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^sm_neighbor_cache_t  sm_neighbor_report_cache[MAX_NUM_RADIOS];$/", "language": "C", "typeref": "typename:sm_neighbor_cache_t[]", "kind": "variable"}, {"_type": "tag", "name": "sm_report_callback_arg_t", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^} sm_report_callback_arg_t;$/", "file": true, "language": "C", "typeref": "struct:__anona7810ca90108", "kind": "typedef"}, {"_type": "tag", "name": "sm_report_config_task", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^int sm_report_config_task(wifi_app_t *app, wifi_mon_stats_request_state_t state, const stats_con/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(wifi_app_t * app,wifi_mon_stats_request_state_t state,const stats_config_t * config)"}, {"_type": "tag", "name": "sm_report_deinit", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^int sm_report_deinit(wifi_app_t *app)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(wifi_app_t * app)"}, {"_type": "tag", "name": "sm_report_init", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^int sm_report_init(wifi_app_t *app)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(wifi_app_t * app)"}, {"_type": "tag", "name": "sm_report_send_to_qm_cb", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^int sm_report_send_to_qm_cb(void *args)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(void * args)"}, {"_type": "tag", "name": "sm_report_start_task", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^int sm_report_start_task(stats_type_t type, wifi_app_t *app, wifi_mon_stats_request_state_t stat/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(stats_type_t type,wifi_app_t * app,wifi_mon_stats_request_state_t state,const stats_config_t * config)"}, {"_type": "tag", "name": "sm_survey_report_cache", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^sm_survey_cache_t    sm_survey_report_cache[MAX_NUM_RADIOS];$/", "language": "C", "typeref": "typename:sm_survey_cache_t[]", "kind": "variable"}, {"_type": "tag", "name": "stats_cfg_id", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^    stats_cfg_id_t  stats_cfg_id;$/", "file": true, "language": "C", "typeref": "typename:stats_cfg_id_t", "kind": "member", "scope": "__anona7810ca90108", "scopeKind": "struct"}, {"_type": "tag", "name": "survey_report_cache_free_all", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^static inline void survey_report_cache_free_all()$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "survey_report_cache_init_all", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "pattern": "/^static inline void survey_report_cache_init_all()$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}], "hash": "e3f511c85dff5a81a915cf32d1bc142d", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/OneWifi/source/apps/sm/sm_report.c", "fields": [{"name": "wifi_app_t * app", "scope": "__anona7810ca90108", "scopeKind": "struct", "description": "unavailable"}, {"name": "int reports_counter_task_id", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int send_qm_task_id", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "sm_client_cache_t[] sm_client_report_cache", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "sm_neighbor_cache_t[] sm_neighbor_report_cache", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "sm_survey_cache_t[] sm_survey_report_cache", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "stats_cfg_id_t stats_cfg_id", "scope": "__anona7810ca90108", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"19157": ""}]}