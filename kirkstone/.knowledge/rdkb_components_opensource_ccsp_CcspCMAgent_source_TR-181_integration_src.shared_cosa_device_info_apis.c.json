{"is_source_file": true, "format": "C", "description": "This file contains implementation of device info management APIs for firmware download, version retrieval, URL and image handling, reboot coordination, and associated utility functions related to device firmware update processes and device information collection.", "external_files": ["cosa_device_info_apis.h", "cm_hal.h", "cosa_device_info_internal.h", "safec_lib_common.h", "/syscfg/syscfg.h"], "external_methods": ["CosaDmlDIGetDLFlag", "CosaDmlDIGetFWVersion", "cm_hal_Get_HTTP_Download_Status", "cm_hal_Set_HTTP_Download_Url", "cm_hal_Set_HTTP_Download_Interface", "cm_hal_HTTP_Download", "cm_hal_Reboot_Ready", "cm_hal_HTTP_Download_Reboot_Now"], "published": ["CosaDmlDIInit", "CosaDmlDIGetDLFlag", "CosaDmlDIGetFWVersion", "CosaDmlDIGetDLStatus", "CosaDmlDIGetProtocol", "CosaDmlDIGetURL", "CosaDmlDIGetImage", "CosaDmlDIDownloadNow", "IsFileUpdateNeeded", "WriteFactoryResetParams", "CosaDmlDISetURL", "CosaDmlDISetImage"], "classes": [], "methods": [{"name": "ANSC_STATUS CosaDmlDIInit(ANSC_HANDLE hDml,PANSC_HANDLE phContext)", "description": "Initializes device info data, retrieves download flag, firmware version, URL, and image information.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaDmlDIGetDLFlag(ANSC_HANDLE hContext)", "description": "Reads device properties to determine if firmware download is permitted and sets the internal flag accordingly.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaDmlDIGetFWVersion(ANSC_HANDLE hContext)", "description": "Retrieves current firmware version by parsing version file.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaDmlDIGetDLStatus(ANSC_HANDLE hContext,char * DL_Status)", "description": "Gets current download status as a string based on download process state.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaDmlDIGetProtocol(char * protocol,size_t len)", "description": "Retrieves the download protocol (HTTP/HTTPS) used for firmware updates.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaDmlDIGetURL(ANSC_HANDLE hContext)", "description": "Fetches the configured URL for firmware download.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaDmlDIGetImage(ANSC_HANDLE hContext)", "description": "Fetches the image version to be downloaded or upgraded.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaDmlDIDownloadNow(ANSC_HANDLE hContext)", "description": "Triggers immediate download of firmware image based on current URL and firmware name.", "scope": "", "scopeKind": ""}, {"name": "BOOL IsFileUpdateNeeded(ANSC_HANDLE hContext)", "description": "Checks if a new firmware file needs to be downloaded based on current config.", "scope": "", "scopeKind": ""}, {"name": "void WriteFactoryResetParams(ANSC_HANDLE hContext)", "description": "Stores current URL and firmware image to syscfg for factory reset purposes.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaDmlDISetURL(ANSC_HANDLE hContext,char * URL)", "description": "Sets the download URL, updates protocol, and commits configuration.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaDmlDISetImage(ANSC_HANDLE hContext,char * Image)", "description": "Sets the firmware image to be downloaded and updates configuration.", "scope": "", "scopeKind": ""}, {"name": "void * FWDL_ThreadFunc(void * args)", "description": "Thread function to manage download process, wait for completion, reboot, and log updates.", "scope": "", "scopeKind": ""}, {"name": "void convert_to_validFW(char * fw,char * valid_fw)", "description": "Utility function to normalize and validate firmware filename based on known patterns.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaDmlDIGetRfSignalStatus(BOOLEAN * pRfSignalStatus)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int CosaDmlDISetProtocol(PCOSA_DATAMODEL_DEVICEINFO pMyObject)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int GetFirmwareName(char * pValue,unsigned long maxSize)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["cm_hal_Get_HTTP_Download_Status", "cm_hal_Set_HTTP_Download_Url", "cm_hal_Set_HTTP_Download_Interface", "cm_hal_HTTP_Download", "cm_hal_Reboot_Ready", "cm_hal_HTTP_Download_Reboot_Now", "syscfg_get", "syscfg_set", "syscfg_commit", "v_secure_system"], "search-terms": ["firmware download", "device firmware", "COSA Data Model", "firmware version", "download status", "factory reset", "URL configuration", "reboot management", "firmware filename validation", "device properties"], "state": 2, "file_id": 6267, "knowledge_revision": 19367, "git_revision": "", "ctags": [{"_type": "tag", "name": "CM_HTTPURL_LEN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^#define CM_HTTPURL_LEN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "CosaDmlDIDownloadNow", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^ANSC_STATUS CosaDmlDIDownloadNow(ANSC_HANDLE hContext)$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hContext)"}, {"_type": "tag", "name": "CosaDmlDIGetDLFlag", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^ANSC_STATUS CosaDmlDIGetDLFlag(ANSC_HANDLE hContext)$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hContext)"}, {"_type": "tag", "name": "CosaDmlDIGetDLStatus", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^ANSC_STATUS CosaDmlDIGetDLStatus(ANSC_HANDLE hContext, char *DL_Status)$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hContext,char * DL_Status)"}, {"_type": "tag", "name": "CosaDmlDIGetFWVersion", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^ANSC_STATUS CosaDmlDIGetFWVersion(ANSC_HANDLE hContext)$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hContext)"}, {"_type": "tag", "name": "CosaDmlDIGetImage", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^ANSC_STATUS CosaDmlDIGetImage(ANSC_HANDLE hContext)$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hContext)"}, {"_type": "tag", "name": "CosaDmlDIGetProtocol", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^ANSC_STATUS CosaDmlDIGetProtocol(char *protocol, size_t len)$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(char * protocol,size_t len)"}, {"_type": "tag", "name": "CosaDmlDIGetRfSignalStatus", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^ANSC_STATUS CosaDmlDIGetRfSignalStatus(BOOLEAN *pRfSignalStatus) {$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(BOOLEAN * pRfSignalStatus)"}, {"_type": "tag", "name": "CosaDmlDIGetURL", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^ANSC_STATUS CosaDmlDIGetURL(ANSC_HANDLE hContext)$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hContext)"}, {"_type": "tag", "name": "CosaDmlDIInit", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^CosaDmlDIInit$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hDml,PANSC_HANDLE phContext)"}, {"_type": "tag", "name": "CosaDmlDISetImage", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^ANSC_STATUS CosaDmlDISetImage(ANSC_HANDLE hContext, char *Image)$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hContext,char * Image)"}, {"_type": "tag", "name": "CosaDmlDISetProtocol", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^static int CosaDmlDISetProtocol(PCOSA_DATAMODEL_DEVICEINFO pMyObject)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(PCOSA_DATAMODEL_DEVICEINFO pMyObject)"}, {"_type": "tag", "name": "CosaDmlDISetURL", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^ANSC_STATUS CosaDmlDISetURL(ANSC_HANDLE hContext, char *URL)$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hContext,char * URL)"}, {"_type": "tag", "name": "FWDL_ThreadFunc", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^void *FWDL_ThreadFunc(void *args)$/", "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "(void * args)"}, {"_type": "tag", "name": "GetFirmwareName", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^static int GetFirmwareName (char *pValue, unsigned long maxSize)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * pValue,unsigned long maxSize)"}, {"_type": "tag", "name": "IsFileUpdateNeeded", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^BOOL IsFileUpdateNeeded( ANSC_HANDLE hContext ) $/", "language": "C", "typeref": "typename:BOOL", "kind": "function", "signature": "(ANSC_HANDLE hContext)"}, {"_type": "tag", "name": "MAX_DL_STATUS", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^#define MAX_DL_STATUS /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "MAX_PROTOCOL", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^#define MAX_PROTOCOL /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "VALID_fW_LEN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^#define VALID_fW_LEN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "WriteFactoryResetParams", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^void WriteFactoryResetParams( ANSC_HANDLE hContext )$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(ANSC_HANDLE hContext)"}, {"_type": "tag", "name": "_GNU_SOURCE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^#define _GNU_SOURCE$/", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "convert_to_validFW", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^void convert_to_validFW(char *fw,char *valid_fw)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(char * fw,char * valid_fw)"}, {"_type": "tag", "name": "fw_file_name_type_table", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "pattern": "/^static char *fw_file_name_type_table[] = {$/", "file": true, "language": "C", "typeref": "typename:char * []", "kind": "variable"}], "hash": "ee814a6560fbe7d4b98f2fd476081f73", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/CcspCMAgent/source/TR-181/integration_src.shared/cosa_device_info_apis.c", "fields": [{"name": "char * [] fw_file_name_type_table", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"19367": ""}]}