{"is_source_file": true, "format": "Python", "description": "This Python source file provides utility functions for managing software packages within the OpenEmbedded build and test environment. It includes functions for selecting and configuring package managers (RPM, IPK, DEB), extracting packages required by tests, copying packages, and installing or uninstalling packages on target devices during testing processes.", "external_files": ["oeqa.core.utils.test", "oe.package_manager.rpm", "oe.package_manager.ipk", "oe.package_manager.deb", "oeqa.utils.package_manager"], "external_methods": ["getCaseFile", "getCaseMethod", "getSuiteCasesFiles", "bb.fatal", "oe.path.copytree", "os.path.exists", "shutil.rmtree", "shutil.copy2", "os.path.join"], "published": ["get_package_manager", "find_packages_to_extract", "extract_packages", "install_package", "uninstall_package", "test_needs_package"], "classes": [], "methods": [{"name": "get_package_manager(d, root_path)", "description": "Returns an OpenEmbedded package manager instance (RpmPM, OpkgPM, or DpkgPM) based on the package type specified in data variables.", "scope": "", "scopeKind": ""}, {"name": "find_packages_to_extract(test_suite)", "description": "Determines and returns a dictionary of packages needed for runtime tests by analyzing test suite files and related JSON files.", "scope": "", "scopeKind": ""}, {"name": "_get_json_file(module_path)", "description": "Returns the JSON filename associated with a module path if both the module file and corresponding JSON file exist.", "scope": "", "scopeKind": ""}, {"name": "_get_needed_packages(json_file, test=None)", "description": "Parses a JSON file to extract needed package information, optionally filtering for a specific test.", "scope": "", "scopeKind": ""}, {"name": "extract_packages(d, needed_packages)", "description": "Extracts and copies required packages based on the provided needed_packages dictionary, leveraging temporary directories and package manager functions.", "scope": "", "scopeKind": ""}, {"name": "_extract_in_tmpdir(d, pkg)", "description": "Extracts a package into a temporary directory and returns the extraction path.", "scope": "", "scopeKind": ""}, {"name": "_copy_package(d, pkg)", "description": "Copies a package file (RPM, DEB, or IPK) into the target directory.", "scope": "", "scopeKind": ""}, {"name": "install_package(test_case)", "description": "Installs required packages on the device under test if needed.", "scope": "", "scopeKind": ""}, {"name": "uninstall_package(test_case)", "description": "Uninstalls required packages from the device under test if needed.", "scope": "", "scopeKind": ""}, {"name": "test_needs_package(test_case)", "description": "Checks whether a given test case requires package installation or removal based on associated JSON data.", "scope": "", "scopeKind": ""}, {"name": "_install_uninstall_packages(needed_packages, test_case, install=True)", "description": "Handles the actual installation or removal of packages on the device under test, based on provided parameters.", "scope": "", "scopeKind": ""}], "calls": ["get_package_manager", "getCaseFile", "getCaseMethod", "getSuiteCasesFiles", "json.load", "os.path.isfile", "os.path.exists", "shutil.rmtree", "shutil.copy2", "d.getVar", "oe.path.copytree", "bb.fatal", "os.path.join"], "search-terms": ["package management", "test suite package dependencies", "OE package manager", "extract packages for tests", "dynamic package extraction", "install/uninstall packages in tests"], "state": 2, "file_id": 1869, "knowledge_revision": 15019, "git_revision": "", "ctags": [{"_type": "tag", "name": "_copy_package", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/package_manager.py", "pattern": "/^def _copy_package(d, pkg):$/", "language": "Python", "kind": "function", "signature": "(d, pkg)"}, {"_type": "tag", "name": "_extract_in_tmpdir", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/package_manager.py", "pattern": "/^def _extract_in_tmpdir(d, pkg):$/", "language": "Python", "kind": "function", "signature": "(d, pkg)"}, {"_type": "tag", "name": "_get_json_file", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/package_manager.py", "pattern": "/^def _get_json_file(module_path):$/", "language": "Python", "kind": "function", "signature": "(module_path)"}, {"_type": "tag", "name": "_get_needed_packages", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/package_manager.py", "pattern": "/^def _get_needed_packages(json_file, test=None):$/", "language": "Python", "kind": "function", "signature": "(json_file, test=None)"}, {"_type": "tag", "name": "_install_uninstall_packages", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/package_manager.py", "pattern": "/^def _install_uninstall_packages(needed_packages, test_case, install=True):$/", "language": "Python", "kind": "function", "signature": "(needed_packages, test_case, install=True)"}, {"_type": "tag", "name": "extract_packages", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/package_manager.py", "pattern": "/^def extract_packages(d, needed_packages):$/", "language": "Python", "kind": "function", "signature": "(d, needed_packages)"}, {"_type": "tag", "name": "find_packages_to_extract", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/package_manager.py", "pattern": "/^def find_packages_to_extract(test_suite):$/", "language": "Python", "kind": "function", "signature": "(test_suite)"}, {"_type": "tag", "name": "get_package_manager", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/package_manager.py", "pattern": "/^def get_package_manager(d, root_path):$/", "language": "Python", "kind": "function", "signature": "(d, root_path)"}, {"_type": "tag", "name": "install_package", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/package_manager.py", "pattern": "/^def install_package(test_case):$/", "language": "Python", "kind": "function", "signature": "(test_case)"}, {"_type": "tag", "name": "test_needs_package", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/package_manager.py", "pattern": "/^def test_needs_package(test_case):$/", "language": "Python", "kind": "function", "signature": "(test_case)"}, {"_type": "tag", "name": "uninstall_package", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/package_manager.py", "pattern": "/^def uninstall_package(test_case):$/", "language": "Python", "kind": "function", "signature": "(test_case)"}], "hash": "8d38528aa7fc3da10dc032a80913aa00", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "openembedded-core/meta/lib/oeqa/utils/package_manager.py", "revision_history": [{"15019": ""}]}