{"is_source_file": true, "format": "C", "description": "This file contains unit tests for the message queue system implemented in C, using the cmocka testing framework. It verifies behavior such as safe message clearing during processing and race conditions with message replies.", "external_files": ["<string.h>", "<stdio.h>", "<setjmp.h>", "<cmocka.h>", "<time.h>", "<pthread.h>", "<icLog/logging.h>", "<icConcurrent/timedWait.h>", "<icConcurrent/threadUtils.h>", "messageQueue.h", "message.h"], "external_methods": ["initIcLogger()", "closeIcLogger()", "initTimedWaitCond()", "messageQueueCreate()", "messageQueueStartThread()", "messageQueueClear()", "messageQueueStopThread()", "messageQueueDestroy()", "messageQueueAppend()", "messageQueueIsBusy()", "messageQueueContainsMessage()", "messageQueueCompleted()", "destroyMessage()", "createMessage()", "incrementalCondTimedWait()", "createThread()"], "published": ["test_queue_clear_during_process", "test_queue_busy_complete"], "classes": [], "methods": [{"name": "void test_queue_clear_during_process(void ** state)", "description": "Verifies that the message queue cannot destroy a message that is in processing when clearing the queue.", "scope": "", "scopeKind": ""}, {"name": "void test_queue_busy_complete(void ** state)", "description": "Ensures that a message race condition between a failed send and an async reply does not prematurely destroy the message.", "scope": "", "scopeKind": ""}, {"name": "int setup(void ** state)", "description": "Initializes the message queue before running each test.", "scope": "", "scopeKind": ""}, {"name": "int teardown(void ** state)", "description": "Cleans up the message queue after each test.", "scope": "", "scopeKind": ""}, {"name": "int main(int argc,const char ** argv)", "description": "Sets up and runs the unit tests using cmocka framework.", "scope": "", "scopeKind": ""}, {"name": "bool messageMeetsFilter(message * msg)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void messageNotify(message * msg,bool success,messageFailureReason reason)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "processMessageCode messageProcess(message * msg)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void * simulateReplyThread(message * msg)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["initIcLogger()", "initTimedWaitCond()", "messageQueueCreate()", "messageQueueStartThread()", "messageQueueClear()", "messageQueueStopThread()", "closeIcLogger()", "messageQueueDestroy()", "messageQueueAppend()", "messageQueueIsBusy()", "messageQueueContainsMessage()", "messageQueueCompleted()", "destroyMessage()", "createMessage()", "incrementalCondTimedWait()", "createThread()"], "search-terms": ["messageQueueUnitTest", "raceCondition", "messageProcessing", "asyncReply", "testSuite", "messageClear", "concurrentTest", "messageRaceTest"], "state": 2, "file_id": 1113, "knowledge_revision": 14264, "git_revision": "", "ctags": [{"_type": "tag", "name": "LOG_CAT", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/test/src/messageQueueTest.c", "pattern": "/^#define LOG_CAT /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "completeCond", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/test/src/messageQueueTest.c", "pattern": "/^static pthread_cond_t completeCond;$/", "file": true, "language": "C", "typeref": "typename:pthread_cond_t", "kind": "variable"}, {"_type": "tag", "name": "completeMtx", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/test/src/messageQueueTest.c", "pattern": "/^static pthread_mutex_t completeMtx = PTHREAD_MUTEX_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "invertedProcessCond", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/test/src/messageQueueTest.c", "pattern": "/^static pthread_cond_t invertedProcessCond;$/", "file": true, "language": "C", "typeref": "typename:pthread_cond_t", "kind": "variable"}, {"_type": "tag", "name": "invertedProcessMtx", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/test/src/messageQueueTest.c", "pattern": "/^static pthread_mutex_t invertedProcessMtx = PTHREAD_MUTEX_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "main", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/test/src/messageQueueTest.c", "pattern": "/^int main(int argc, const char ** argv)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(int argc,const char ** argv)"}, {"_type": "tag", "name": "messageMeetsFilter", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/test/src/messageQueueTest.c", "pattern": "/^static bool messageMeetsFilter(message *msg)$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(message * msg)"}, {"_type": "tag", "name": "messageNotify", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/test/src/messageQueueTest.c", "pattern": "/^static void messageNotify(message *msg, bool success, messageFailureReason reason)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(message * msg,bool success,messageFailureReason reason)"}, {"_type": "tag", "name": "messageProcess", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/test/src/messageQueueTest.c", "pattern": "/^static processMessageCode messageProcess(message *msg)$/", "file": true, "language": "C", "typeref": "typename:processMessageCode", "kind": "function", "signature": "(message * msg)"}, {"_type": "tag", "name": "setup", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/test/src/messageQueueTest.c", "pattern": "/^int setup(void **state)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(void ** state)"}, {"_type": "tag", "name": "simulateReplyThread", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/test/src/messageQueueTest.c", "pattern": "/^void *simulateReplyThread(message *msg)$/", "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "(message * msg)"}, {"_type": "tag", "name": "teardown", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/test/src/messageQueueTest.c", "pattern": "/^int teardown(void **state)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(void ** state)"}, {"_type": "tag", "name": "testDelegate", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/test/src/messageQueueTest.c", "pattern": "/^static messageQueueDelegate testDelegate = {$/", "file": true, "language": "C", "typeref": "typename:messageQueueDelegate", "kind": "variable"}, {"_type": "tag", "name": "testQueue", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/test/src/messageQueueTest.c", "pattern": "/^static messageQueue *testQueue;$/", "file": true, "language": "C", "typeref": "typename:messageQueue *", "kind": "variable"}, {"_type": "tag", "name": "test_queue_busy_complete", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/test/src/messageQueueTest.c", "pattern": "/^void test_queue_busy_complete(void **state)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void ** state)"}, {"_type": "tag", "name": "test_queue_clear_during_process", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/test/src/messageQueueTest.c", "pattern": "/^void test_queue_clear_during_process(void **state)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void ** state)"}], "hash": "adf08446753429f1d3651a14c8b7528b", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "components/opensource/zilker-sdk/source/services/comm/core/test/src/messageQueueTest.c", "fields": [{"name": "pthread_cond_t completeCond", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_mutex_t completeMtx", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_cond_t invertedProcessCond", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_mutex_t invertedProcessMtx", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "messageQueueDelegate testDelegate", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "messageQueue * testQueue", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"14264": ""}]}