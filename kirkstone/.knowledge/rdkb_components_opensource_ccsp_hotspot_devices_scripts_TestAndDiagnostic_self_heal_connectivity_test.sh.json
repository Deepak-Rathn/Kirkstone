{"is_source_file": true, "format": "sh", "description": "This is a shell script designed to perform network connectivity tests and initiate corrective actions in a router or network device environment. It includes functions for resetting the device, performing ping and DNS tests, and conditionally executing these based on configuration parameters.", "external_files": ["/nvram/syscfg.db", "syscfg", "awk", "date", "dmcli", "sysevent"], "external_methods": ["syscfg get", "syscfg create", "awk", "date +%N", "dmcli simu setv", "sysevent get", "sysevent set", "echo_t", "removehttp", "route"], "published": [], "classes": [], "methods": [{"name": "getCorrectiveActionState", "description": "Retrieves the current state of the corrective action setting from system configuration."}, {"name": "calcRandTimetoStartPing", "description": "Calculates a random delay (minutes and seconds) before starting the ping tests."}, {"name": "resetRouter", "description": "Triggers a device reboot to reset the router."}, {"name": "resetNeeded", "description": "Decides whether to reset the router based on the process name."}, {"name": "runDNSPingTest", "description": "Performs DNS resolution testing and takes corrective action if DNS resolution fails."}, {"name": "runPingTest", "description": "Performs network ping tests to check connectivity and triggers reboot if ping fails."}], "calls": ["syscfg get ConnTest_CorrectiveAction", "syscfg get selfheal_dns_pingtest_enable", "syscfg get selfheal_dns_pingtest_url", "removehttp", "getCorrectiveActionState", "dmcli simu setv", "sleep", "route -n", "tr", "cut", "ping -I", "sysevent get default_router", "syscfg get selfheal_ping_DataBlockSize", "syscfg get ConnTest_NumPingsPerServer", "syscfg get ConnTest_PingRespWaitTime", "sysevent get default_router", "ping -I", "grep", "awk", "echo", "resetRouter", "dmcli simu setv", "sleep"], "search-terms": ["selfheal_dns_pingtest", "DNS_PING_TEST_STATUS", "runDNSPingTest", "runPingTest", "selfheal_enable", "ConnTest_CorrectiveAction", "selfheal_enable", "PingInterval", "IPv4_Gateway_addr", "selfheal_ping_DataBlockSize"], "state": 2, "file_id": 9774, "knowledge_revision": 22788, "git_revision": "", "hash": "2163dd9a64954a165f5f223f128c4c38", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/hotspot/devices/scripts/TestAndDiagnostic/self_heal_connectivity_test.sh", "revision_history": [{"22788": ""}]}