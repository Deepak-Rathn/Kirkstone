{"is_source_file": true, "format": "C", "description": "This source file implements TCP server and client functionalities with SSL/TLS encryption, including certificate handling, client verification, data transfer, file operations, and connection management. It provides APIs for establishing secure connections, sending files or messages, and managing connection lifecycles in a networked environment.", "external_files": ["Idm_TCP_apis.h", "openssl/ssl.h", "openssl/err.h", "<net/if.h>", "<sys/ioctl.h>"], "external_methods": ["getARPMac", "IdmMgr_GetConfigData_locked", "IdmMgrDml_GetConfigData_release", "CcspTraceError", "CcspTraceInfo", "CCSP_TRACE_ERROR", "CCSP_TRACE_INFO"], "published": ["open_remote_connection", "getFile_to_remote", "sendFile_to_remote", "send_remote_message", "close_remote_connection"], "classes": [], "methods": [{"name": "SSL_CTX * init_ctx(void)", "description": "Initializes and sets up an SSL context for secure communication using SSL/TLS protocols.", "scope": "", "scopeKind": ""}, {"name": "int load_certificate(SSL_CTX * ctx)", "description": "Loads SSL certificate and private key files into the SSL context, verifying their correctness.", "scope": "", "scopeKind": ""}, {"name": "int verify_client(char * interface,char * ip_address,unsigned int * sock_index)", "description": "Verifies if a client device's MAC address and IP address match with the discovered devices list.", "scope": "", "scopeKind": ""}, {"name": "void tcp_server_thread(void * arg)", "description": "Main function for TCP server thread handling incoming connections, SSL handshake, and data exchange.", "scope": "", "scopeKind": ""}, {"name": "int open_remote_connection(connection_config_t * connectionConf,int (* connection_cb)(device_info_t * Device,connection_info_t * conn_info,uint encryption_status),int (* rcv_message_cb)(connection_info_t * conn_info,void * payload))", "description": "Creates a TCP connection to a remote device, starts the TCP server thread if not already started, and handles optional SSL setup.", "scope": "", "scopeKind": ""}, {"name": "char * getFile_to_remote(connection_info_t * conn_info,void * payload)", "description": "Reads a file from local storage, sends its size and content, supports SSL encryption, and reports errors.", "scope": "", "scopeKind": ""}, {"name": "char * sendFile_to_remote(connection_info_t * conn_info,void * payload,char * output_location)", "description": "Sends a file's content to a remote device, includes size validation, memory management, and optional SSL encryption.", "scope": "", "scopeKind": ""}, {"name": "int send_remote_message(connection_info_t * conn_info,void * payload)", "description": "Sends a message payload over an established connection with optional SSL encryption.", "scope": "", "scopeKind": ""}, {"name": "int close_remote_connection(connection_info_t * conn_info)", "description": "Gracefully closes an established connection, freeing SSL resources and closing sockets.", "scope": "", "scopeKind": ""}], "calls": ["SSL_library_init", "SSL_load_error_strings", "SSL_CTX_new", "SSL_CTX_use_certificate_file", "SSL_CTX_use_PrivateKey_file", "SSL_CTX_check_private_key", "SSL_free", "SSL_new", "SSL_set_fd", "SSL_accept", "SSL_connect", "SSL_read", "SSL_write", "SSL_CTX_free", "socket", "bind", "listen", "accept", "connect", "close", "read", "send", "fopen", "fseek", "ftell", "fread", "fclose", "strncpy_s", "strcpy_s", "malloc", "free", "calloc", "perror", "ioctl", "strncasecmp", "strncasecmp", "strncasecmp", "sleep", "select", "FD_ZERO", "FD_SET", "FD_ISSET"], "search-terms": ["ssl_ctx", "tcp_server", "file transfer", "SSL_certificate", "client verification", "secure TCP connection", "SSL handshake", "Idm_TCP_apis"], "state": 2, "file_id": 6639, "knowledge_revision": 19741, "git_revision": "", "ctags": [{"_type": "tag", "name": "MAX_TCP_CLIENTS", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "pattern": "/^#define MAX_TCP_CLIENTS /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SSL_CERTIFICATE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "pattern": "/^#define SSL_CERTIFICATE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SSL_KEY", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "pattern": "/^#define SSL_KEY /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "TCP_server_started", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "pattern": "/^bool TCP_server_started = false;$/", "language": "C", "typeref": "typename:bool", "kind": "variable"}, {"_type": "tag", "name": "TcpServerThreadArgs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "pattern": "/^} TcpServerThreadArgs;$/", "file": true, "language": "C", "typeref": "struct:tcp_server_threadargs", "kind": "typedef"}, {"_type": "tag", "name": "callback_recv", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "pattern": "/^typedef int (*callback_recv)( connection_info_t* conn_info, void *payload);$/", "file": true, "language": "C", "typeref": "typename:int (*)(connection_info_t * conn_info,void * payload)", "kind": "typedef"}, {"_type": "tag", "name": "cb", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "pattern": "/^    callback_recv cb;$/", "file": true, "language": "C", "typeref": "typename:callback_recv", "kind": "member", "scope": "tcp_server_threadargs", "scopeKind": "struct"}, {"_type": "tag", "name": "close_remote_connection", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "pattern": "/^int close_remote_connection(connection_info_t* conn_info)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(connection_info_t * conn_info)"}, {"_type": "tag", "name": "getFile_to_remote", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "pattern": "/^char* getFile_to_remote(connection_info_t* conn_info,void *payload)$/", "language": "C", "typeref": "typename:char *", "kind": "function", "signature": "(connection_info_t * conn_info,void * payload)"}, {"_type": "tag", "name": "init_ctx", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "pattern": "/^SSL_CTX* init_ctx(void)$/", "language": "C", "typeref": "typename:SSL_CTX *", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "interface", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "pattern": "/^    char interface[INTF_SIZE];$/", "file": true, "language": "C", "typeref": "typename:char[]", "kind": "member", "scope": "tcp_server_threadargs", "scopeKind": "struct"}, {"_type": "tag", "name": "load_certificate", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "pattern": "/^int load_certificate(SSL_CTX* ctx)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(SSL_CTX * ctx)"}, {"_type": "tag", "name": "open_remote_connection", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "pattern": "/^int open_remote_connection(connection_config_t* connectionConf, int (*connection_cb)(device_info/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(connection_config_t * connectionConf,int (* connection_cb)(device_info_t * Device,connection_info_t * conn_info,uint encryption_status),int (* rcv_message_cb)(connection_info_t * conn_info,void * payload))"}, {"_type": "tag", "name": "port", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "pattern": "/^    int port;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "member", "scope": "tcp_server_threadargs", "scopeKind": "struct"}, {"_type": "tag", "name": "sendFile_to_remote", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "pattern": "/^char* sendFile_to_remote(connection_info_t* conn_info,void *payload,char* output_location)$/", "language": "C", "typeref": "typename:char *", "kind": "function", "signature": "(connection_info_t * conn_info,void * payload,char * output_location)"}, {"_type": "tag", "name": "send_remote_message", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "pattern": "/^int send_remote_message(connection_info_t* conn_info,void *payload)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(connection_info_t * conn_info,void * payload)"}, {"_type": "tag", "name": "ssl_lib_init", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "pattern": "/^bool ssl_lib_init = false;$/", "language": "C", "typeref": "typename:bool", "kind": "variable"}, {"_type": "tag", "name": "tcp_server_thread", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "pattern": "/^void tcp_server_thread(void *arg)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void * arg)"}, {"_type": "tag", "name": "tcp_server_threadargs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "pattern": "/^typedef struct tcp_server_threadargs$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "verify_client", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "pattern": "/^int verify_client(char *interface, char *ip_address, unsigned int *sock_index)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * interface,char * ip_address,unsigned int * sock_index)"}], "hash": "933f9a0989abda7000604de781f62ab5", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/RdkInterDeviceManager/source/InterDeviceManager/Idm_TCP_apis.c", "fields": [{"name": "bool TCP_server_started", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "callback_recv cb", "scope": "tcp_server_threadargs", "scopeKind": "struct", "description": "unavailable"}, {"name": "char[] interface", "scope": "tcp_server_threadargs", "scopeKind": "struct", "description": "unavailable"}, {"name": "int port", "scope": "tcp_server_threadargs", "scopeKind": "struct", "description": "unavailable"}, {"name": "bool ssl_lib_init", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"19741": ""}]}