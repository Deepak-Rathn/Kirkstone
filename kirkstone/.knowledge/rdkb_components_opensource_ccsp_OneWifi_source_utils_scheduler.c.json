{"is_source_file": true, "format": "C", "description": "This file implements a scheduler in C that manages timer tasks, including adding, canceling, updating, executing, and removing tasks. It provides the core functionality for scheduling timed callbacks with support for high-priority and low-priority tasks, as well as handling task repetitions and timeouts.", "external_files": ["scheduler.h", "timespec_macro.h", "<sys/time.h>", "<stdlib.h>", "<string.h>", "<stdio.h>", "<unistd.h>"], "external_methods": ["clock_gettime", "pthread_mutex_init", "pthread_mutex_lock", "pthread_mutex_unlock", "pthread_mutex_destroy", "queue_create", "queue_destroy", "queue_push", "queue_peek", "queue_remove"], "published": ["scheduler_init", "scheduler_deinit", "scheduler_add_timer_task", "scheduler_cancel_timer_task", "scheduler_free_timer_task_arg", "scheduler_update_timer_task_interval", "scheduler_update_timer_task_repetitions", "scheduler_timer_task_is_completed", "scheduler_execute"], "classes": [], "methods": [{"name": "struct:scheduler * scheduler_init(void)", "description": "Initializes a new scheduler instance with data structures and mutexes.", "scope": "", "scopeKind": ""}, {"name": "int scheduler_deinit(struct scheduler ** sched)", "description": "Deinitializes and frees the scheduler, destroying its mutex and queues.", "scope": "", "scopeKind": ""}, {"name": "int scheduler_add_timer_task(struct scheduler * sched,bool high_prio,int * id,int (* cb)(void * arg),void * arg,unsigned int interval_ms,unsigned int repetitions,bool start_immediately)", "description": "Adds a new timer task to the scheduler, with optional immediate start and high priority.", "scope": "", "scopeKind": ""}, {"name": "struct:timer_task * scheduler_find_timer_task(struct scheduler * sched,int id)", "description": "Searches for a timer task in the scheduler by its ID.", "scope": "", "scopeKind": ""}, {"name": "int scheduler_cancel_timer_task(struct scheduler * sched,int id)", "description": "Marks a specific timer task for cancellation.", "scope": "", "scopeKind": ""}, {"name": "int scheduler_free_timer_task_arg(struct scheduler * sched,int id)", "description": "Frees the argument associated with a specific timer task.", "scope": "", "scopeKind": ""}, {"name": "int scheduler_update_timer_task_interval(struct scheduler * sched,int id,unsigned int interval_ms)", "description": "Updates the interval (period) of an existing timer task.", "scope": "", "scopeKind": ""}, {"name": "int scheduler_update_timer_task_repetitions(struct scheduler * sched,int id,unsigned int repetitions)", "description": "Updates the number of repetitions for a timer task.", "scope": "", "scopeKind": ""}, {"name": "bool scheduler_timer_task_is_completed(struct scheduler * sched,int id)", "description": "Checks if a timer task has completed based on its ID.", "scope": "", "scopeKind": ""}, {"name": "int scheduler_execute(struct scheduler * sched,struct timespec t_start,unsigned int timeout_ms)", "description": "Runs the scheduler loop, executing pending timer tasks until the timeout.", "scope": "", "scopeKind": ""}, {"name": "int scheduler_calculate_timeout(struct scheduler * sched,struct timespec t_now)", "description": "Calculates the timeouts for all timer tasks based on current time.", "scope": "", "scopeKind": ""}, {"name": "int scheduler_get_number_tasks_pending(struct scheduler * sched,bool high_prio)", "description": "Returns the number of pending tasks of specified priority.", "scope": "", "scopeKind": ""}, {"name": "int scheduler_remove_complete_tasks(struct scheduler * sched)", "description": "Removes completed or canceled tasks from the scheduler's queues.", "scope": "", "scopeKind": ""}], "calls": ["pthread_mutex_init", "pthread_mutex_lock", "pthread_mutex_unlock", "pthread_mutex_destroy", "queue_create", "queue_destroy", "queue_push", "queue_peek", "queue_remove", "clock_gettime", "timespeccmp", "timespecadd", "timespecsub", "timespecisset"], "search-terms": ["scheduler_timers", "high_priority_timer_list", "timer_task_struct", "timer_callback", "timeout", "interval", "repetitions", "task_execution", "task_management", "timer_task_id"], "state": 2, "file_id": 5951, "knowledge_revision": 19052, "git_revision": "", "ctags": [{"_type": "tag", "name": "__anon625f7ddb0108", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^    {$/", "file": true, "language": "C", "kind": "struct", "scope": "scheduler_add_timer_task", "scopeKind": "function"}, {"_type": "tag", "name": "arg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^    void *arg;                          \\/* Argument to be passed to call back function *\\/$/", "file": true, "language": "C", "typeref": "typename:void *", "kind": "member", "scope": "timer_task", "scopeKind": "struct"}, {"_type": "tag", "name": "cancel", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^    bool cancel;                        \\/* remove the task if true *\\/$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "member", "scope": "timer_task", "scopeKind": "struct"}, {"_type": "tag", "name": "execute", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^    bool execute;                       \\/* indication task should be executed *\\/$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "member", "scope": "timer_task", "scopeKind": "struct"}, {"_type": "tag", "name": "execution_counter", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^    unsigned int execution_counter;     \\/* number of times the task was executed completely *\\/$/", "file": true, "language": "C", "typeref": "typename:unsigned int", "kind": "member", "scope": "timer_task", "scopeKind": "struct"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^    int id;                             \\/* identifier - used to delete *\\/$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "member", "scope": "timer_task", "scopeKind": "struct"}, {"_type": "tag", "name": "index", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^        unsigned int *index;$/", "file": true, "language": "C", "typeref": "typename:unsigned int *", "kind": "member", "scope": "scheduler_add_timer_task::__anon625f7ddb0108", "scopeKind": "struct"}, {"_type": "tag", "name": "interval", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^    struct timespec interval;           \\/* Interval between execution *\\/$/", "file": true, "language": "C", "typeref": "struct:timespec", "kind": "member", "scope": "timer_task", "scopeKind": "struct"}, {"_type": "tag", "name": "num_tasks", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^        unsigned int *num_tasks;$/", "file": true, "language": "C", "typeref": "typename:unsigned int *", "kind": "member", "scope": "scheduler_add_timer_task::__anon625f7ddb0108", "scopeKind": "struct"}, {"_type": "tag", "name": "repetitions", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^    unsigned int repetitions;           \\/* number of configured repetitions *\\/$/", "file": true, "language": "C", "typeref": "typename:unsigned int", "kind": "member", "scope": "timer_task", "scopeKind": "struct"}, {"_type": "tag", "name": "scheduler_add_timer_task", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^int scheduler_add_timer_task(struct scheduler *sched, bool high_prio, int *id,$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler * sched,bool high_prio,int * id,int (* cb)(void * arg),void * arg,unsigned int interval_ms,unsigned int repetitions,bool start_immediately)"}, {"_type": "tag", "name": "scheduler_calculate_timeout", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^static int scheduler_calculate_timeout(struct scheduler *sched, struct timespec t_now)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler * sched,struct timespec t_now)"}, {"_type": "tag", "name": "scheduler_cancel_timer_task", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^int scheduler_cancel_timer_task(struct scheduler *sched, int id)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler * sched,int id)"}, {"_type": "tag", "name": "scheduler_deinit", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^int scheduler_deinit(struct scheduler **sched)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler ** sched)"}, {"_type": "tag", "name": "scheduler_execute", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^int scheduler_execute(struct scheduler *sched, struct timespec t_start, unsigned int timeout_ms)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler * sched,struct timespec t_start,unsigned int timeout_ms)"}, {"_type": "tag", "name": "scheduler_find_timer_task", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^static struct timer_task *scheduler_find_timer_task(struct scheduler *sched, int id)$/", "file": true, "language": "C", "typeref": "struct:timer_task *", "kind": "function", "signature": "(struct scheduler * sched,int id)"}, {"_type": "tag", "name": "scheduler_free_timer_task_arg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^int scheduler_free_timer_task_arg(struct scheduler *sched, int id)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler * sched,int id)"}, {"_type": "tag", "name": "scheduler_get_number_tasks_pending", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^static int scheduler_get_number_tasks_pending(struct scheduler *sched, bool high_prio)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler * sched,bool high_prio)"}, {"_type": "tag", "name": "scheduler_init", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^struct scheduler * scheduler_init(void)$/", "language": "C", "typeref": "struct:scheduler *", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "scheduler_remove_complete_tasks", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^static int scheduler_remove_complete_tasks(struct scheduler *sched)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler * sched)"}, {"_type": "tag", "name": "scheduler_timer_task_is_completed", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^bool scheduler_timer_task_is_completed(struct scheduler *sched, int id)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(struct scheduler * sched,int id)"}, {"_type": "tag", "name": "scheduler_update_timer_task_interval", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^int scheduler_update_timer_task_interval(struct scheduler *sched, int id, unsigned int interval_/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler * sched,int id,unsigned int interval_ms)"}, {"_type": "tag", "name": "scheduler_update_timer_task_repetitions", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^int scheduler_update_timer_task_repetitions(struct scheduler *sched, int id, unsigned int repeti/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler * sched,int id,unsigned int repetitions)"}, {"_type": "tag", "name": "timeout", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^    struct timespec timeout;            \\/* Next timeout *\\/$/", "file": true, "language": "C", "typeref": "struct:timespec", "kind": "member", "scope": "timer_task", "scopeKind": "struct"}, {"_type": "tag", "name": "timer_call_back", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^    int (*timer_call_back)(void *arg); \\/* Call back function *\\/$/", "file": true, "language": "C", "typeref": "typename:int (*)(void * arg)", "kind": "member", "scope": "timer_task", "scopeKind": "struct"}, {"_type": "tag", "name": "timer_list", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^        queue_t *timer_list;$/", "file": true, "language": "C", "typeref": "typename:queue_t *", "kind": "member", "scope": "scheduler_add_timer_task::__anon625f7ddb0108", "scopeKind": "struct"}, {"_type": "tag", "name": "timer_task", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "pattern": "/^struct timer_task {$/", "file": true, "language": "C", "kind": "struct"}], "hash": "47dc59e9221ed9e63106be036a26e139", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/OneWifi/source/utils/scheduler.c", "fields": [{"name": "void * arg", "scope": "timer_task", "scopeKind": "struct", "description": "unavailable"}, {"name": "bool cancel", "scope": "timer_task", "scopeKind": "struct", "description": "unavailable"}, {"name": "bool execute", "scope": "timer_task", "scopeKind": "struct", "description": "unavailable"}, {"name": "unsigned int execution_counter", "scope": "timer_task", "scopeKind": "struct", "description": "unavailable"}, {"name": "int id", "scope": "timer_task", "scopeKind": "struct", "description": "unavailable"}, {"name": "unsigned int * index", "scope": "scheduler_add_timer_task::__anon625f7ddb0108", "scopeKind": "struct", "description": "unavailable"}, {"name": "struct:timespec interval", "scope": "timer_task", "scopeKind": "struct", "description": "unavailable"}, {"name": "unsigned int * num_tasks", "scope": "scheduler_add_timer_task::__anon625f7ddb0108", "scopeKind": "struct", "description": "unavailable"}, {"name": "unsigned int repetitions", "scope": "timer_task", "scopeKind": "struct", "description": "unavailable"}, {"name": "struct:timespec timeout", "scope": "timer_task", "scopeKind": "struct", "description": "unavailable"}, {"name": "int (*)(void * arg) timer_call_back", "scope": "timer_task", "scopeKind": "struct", "description": "unavailable"}, {"name": "queue_t * timer_list", "scope": "scheduler_add_timer_task::__anon625f7ddb0108", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"19052": ""}]}