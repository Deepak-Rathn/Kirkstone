{"is_source_file": true, "format": "C", "description": "This file implements a scheduler with timer tasks, including functions for initialization, adding, canceling, updating, executing, and deinitializing timer tasks. It manages both high-priority and regular tasks, handling timing calculations and task repetitions.", "external_files": ["scheduler.h", "<system headers: sys/time.h, stdlib.h, string.h, stdio.h, unistd.h>"], "external_methods": ["queue_create()", "queue_destroy()", "queue_push()", "queue_peek()", "queue_remove()"], "published": ["scheduler_init", "scheduler_deinit", "scheduler_add_timer_task", "scheduler_cancel_timer_task", "scheduler_update_timer_task_interval", "scheduler_update_timer_task_repetitions", "scheduler_execute"], "classes": [], "methods": [{"name": "struct:scheduler * scheduler_init(void)", "description": "Initializes a scheduler instance, allocating memory and creating task queues, with thread synchronization mechanisms.", "scope": "", "scopeKind": ""}, {"name": "int scheduler_deinit(struct scheduler ** sched)", "description": "Deinitializes and frees resources associated with the scheduler instance, destroying mutexes and queues.", "scope": "", "scopeKind": ""}, {"name": "int scheduler_add_timer_task(struct scheduler * sched,bool high_prio,int * id,int (* cb)(void * arg),void * arg,unsigned int interval_ms,unsigned int repetitions)", "description": "Adds a new timer task, specifying priority, callback, interval, and repetitions.", "scope": "", "scopeKind": ""}, {"name": "int scheduler_cancel_timer_task(struct scheduler * sched,int id)", "description": "Marks a task as canceled based on its ID, so it can be removed during cleanup.", "scope": "", "scopeKind": ""}, {"name": "int scheduler_update_timer_task_interval(struct scheduler * sched,int id,unsigned int interval_ms)", "description": "Updates the interval for an existing timer task, adjusting its timeout accordingly.", "scope": "", "scopeKind": ""}, {"name": "int scheduler_update_timer_task_repetitions(struct scheduler * sched,int id,unsigned int repetitions)", "description": "Updates the number of repetitions for an existing timer task.", "scope": "", "scopeKind": ""}, {"name": "int scheduler_execute(struct scheduler * sched,struct timeval t_start,unsigned int timeout_ms)", "description": "Runs the scheduler, executing due tasks within the specified timeout, handling high and low priority scheduling, and updating timer expirations.", "scope": "", "scopeKind": ""}, {"name": "int scheduler_calculate_timeout(struct scheduler * sched,struct timeval * t_now)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int scheduler_get_number_tasks_pending(struct scheduler * sched,bool high_prio)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int scheduler_remove_complete_tasks(struct scheduler * sched)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int scheduler_update_timeout(struct scheduler * sched,struct timeval * t_diff)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["queue_create()", "queue_destroy()", "queue_push()", "queue_peek()", "queue_remove()", "pthread_mutex_init()", "pthread_mutex_lock()", "pthread_mutex_unlock()", "pthread_mutex_destroy()", "malloc()", "free()", "timerclear()", "timercmp()", "timersub()", "timeradd()", "gettimeofday()"], "search-terms": ["scheduler", "timer_task", "callback", "high_priority", "repetitions", "timeout", "interval", "timer_list", "task management", "timer execution"], "state": 2, "file_id": 9249, "knowledge_revision": 22271, "git_revision": "", "ctags": [{"_type": "tag", "name": "arg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^    void *arg;                          \\/* Argument to be passed to call back function *\\/$/", "file": true, "language": "C", "typeref": "typename:void *", "kind": "member", "scope": "timer_task", "scopeKind": "struct"}, {"_type": "tag", "name": "cancel", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^    bool cancel;                        \\/* remove the task if true *\\/$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "member", "scope": "timer_task", "scopeKind": "struct"}, {"_type": "tag", "name": "execute", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^    bool execute;                       \\/* indication task should be executed *\\/$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "member", "scope": "timer_task", "scopeKind": "struct"}, {"_type": "tag", "name": "execution_counter", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^    unsigned int execution_counter;     \\/* number of times the task was executed completely *\\/$/", "file": true, "language": "C", "typeref": "typename:unsigned int", "kind": "member", "scope": "timer_task", "scopeKind": "struct"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^    int id;                             \\/* identifier - used to delete *\\/$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "member", "scope": "timer_task", "scopeKind": "struct"}, {"_type": "tag", "name": "interval", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^    struct timeval interval;            \\/* Interval between execution *\\/$/", "file": true, "language": "C", "typeref": "struct:timeval", "kind": "member", "scope": "timer_task", "scopeKind": "struct"}, {"_type": "tag", "name": "repetitions", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^    unsigned int repetitions;           \\/* number of configured repetitions *\\/$/", "file": true, "language": "C", "typeref": "typename:unsigned int", "kind": "member", "scope": "timer_task", "scopeKind": "struct"}, {"_type": "tag", "name": "scheduler_add_timer_task", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^int scheduler_add_timer_task(struct scheduler *sched, bool high_prio, int *id,$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler * sched,bool high_prio,int * id,int (* cb)(void * arg),void * arg,unsigned int interval_ms,unsigned int repetitions)"}, {"_type": "tag", "name": "scheduler_calculate_timeout", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^static int scheduler_calculate_timeout(struct scheduler *sched, struct timeval *t_now)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler * sched,struct timeval * t_now)"}, {"_type": "tag", "name": "scheduler_cancel_timer_task", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^int scheduler_cancel_timer_task(struct scheduler *sched, int id)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler * sched,int id)"}, {"_type": "tag", "name": "scheduler_deinit", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^int scheduler_deinit(struct scheduler **sched)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler ** sched)"}, {"_type": "tag", "name": "scheduler_execute", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^int scheduler_execute(struct scheduler *sched, struct timeval t_start, unsigned int timeout_ms)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler * sched,struct timeval t_start,unsigned int timeout_ms)"}, {"_type": "tag", "name": "scheduler_get_number_tasks_pending", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^static int scheduler_get_number_tasks_pending(struct scheduler *sched, bool high_prio)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler * sched,bool high_prio)"}, {"_type": "tag", "name": "scheduler_init", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^struct scheduler * scheduler_init(void)$/", "language": "C", "typeref": "struct:scheduler *", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "scheduler_remove_complete_tasks", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^static int scheduler_remove_complete_tasks(struct scheduler *sched)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler * sched)"}, {"_type": "tag", "name": "scheduler_update_timeout", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^static int scheduler_update_timeout(struct scheduler *sched, struct timeval *t_diff)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler * sched,struct timeval * t_diff)"}, {"_type": "tag", "name": "scheduler_update_timer_task_interval", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^int scheduler_update_timer_task_interval(struct scheduler *sched, int id, unsigned int interval_/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler * sched,int id,unsigned int interval_ms)"}, {"_type": "tag", "name": "scheduler_update_timer_task_repetitions", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^int scheduler_update_timer_task_repetitions(struct scheduler *sched, int id, unsigned int repeti/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(struct scheduler * sched,int id,unsigned int repetitions)"}, {"_type": "tag", "name": "timeout", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^    struct timeval timeout;             \\/* Next timeout *\\/$/", "file": true, "language": "C", "typeref": "struct:timeval", "kind": "member", "scope": "timer_task", "scopeKind": "struct"}, {"_type": "tag", "name": "timer_call_back", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^    int (*timer_call_back)(void *arg); \\/* Call back function *\\/$/", "file": true, "language": "C", "typeref": "typename:int (*)(void * arg)", "kind": "member", "scope": "timer_task", "scopeKind": "struct"}, {"_type": "tag", "name": "timer_task", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "pattern": "/^struct timer_task {$/", "file": true, "language": "C", "kind": "struct"}], "hash": "8847ec854a014e00c75c54ea7eb6965e", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/scheduler.c", "fields": [{"name": "void * arg", "scope": "timer_task", "scopeKind": "struct", "description": "unavailable"}, {"name": "bool cancel", "scope": "timer_task", "scopeKind": "struct", "description": "unavailable"}, {"name": "bool execute", "scope": "timer_task", "scopeKind": "struct", "description": "unavailable"}, {"name": "unsigned int execution_counter", "scope": "timer_task", "scopeKind": "struct", "description": "unavailable"}, {"name": "int id", "scope": "timer_task", "scopeKind": "struct", "description": "unavailable"}, {"name": "struct:timeval interval", "scope": "timer_task", "scopeKind": "struct", "description": "unavailable"}, {"name": "unsigned int repetitions", "scope": "timer_task", "scopeKind": "struct", "description": "unavailable"}, {"name": "struct:timeval timeout", "scope": "timer_task", "scopeKind": "struct", "description": "unavailable"}, {"name": "int (*)(void * arg) timer_call_back", "scope": "timer_task", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"22271": ""}]}