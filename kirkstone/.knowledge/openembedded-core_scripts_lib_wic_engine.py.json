{"is_source_file": true, "format": "Python", "description": "This file implements the image creation engine and associated utilities for the 'wic' tool, used in embedded Linux image workflows. It contains functions for environment verification, canned image management, image creation, listing, and modification, and classes for disk image manipulation. The code handles partitioning, copying, removing, and writing disk images, as well as listing available plugins and canned images.", "external_files": ["wic", "wic.filemap", "wic.pluginbase", "wic.misc"], "external_methods": ["WicError", "get_bitbake_var", "exec_cmd", "shutil.which"], "published": ["verify_build_env", "build_canned_image_list", "find_canned_image", "list_canned_images", "list_canned_image_help", "list_source_plugins", "wic_create", "wic_list", "Disk", "wic_ls", "wic_cp", "wic_rm", "wic_write", "find_canned", "get_custom_config"], "classes": [{"name": "Disk", "description": "A class representing a disk image, capable of partition management, copying, removal, and writing to target media."}], "methods": [{"name": "verify_build_env()", "description": "Verifies that the build environment is set up correctly by checking environment variables.", "scope": "", "scopeKind": ""}, {"name": "build_canned_image_list(path)", "description": "Builds a list of directories containing canned-wks images based on BBLAYERS and script directories.", "scope": "", "scopeKind": ""}, {"name": "find_canned_image(scripts_path, wks_file)", "description": "Finds a specific canned-wks image file by name within canned image directories.", "scope": "", "scopeKind": ""}, {"name": "list_canned_images(scripts_path)", "description": "Lists available canned-wks images with their short descriptions.", "scope": "", "scopeKind": ""}, {"name": "list_canned_image_help(scripts_path, fullpath)", "description": "Displays detailed help and parameters for a specific canned-wks image.", "scope": "", "scopeKind": ""}, {"name": "list_source_plugins()", "description": "Lists available source plugins for --source.", "scope": "", "scopeKind": ""}, {"name": "wic_create(wks_file, rootfs_dir, bootimg_dir, kernel_dir, native_sysroot, options)", "description": "Creates a disk image based on a specified OE kickstart file and options.", "scope": "", "scopeKind": ""}, {"name": "wic_list(args, scripts_path)", "description": "Lists images or source plugins based on command-line arguments.", "scope": "", "scopeKind": ""}, {"name": "Disk", "description": "Represents a disk image with functionality for partition management and file operations within partitions."}, {"name": "wic_ls(args, native_sysroot)", "description": "Lists partition information or directory contents within a disk image.", "scope": "", "scopeKind": ""}, {"name": "wic_cp(args, native_sysroot)", "description": "Copies files or directories to/from a disk image partition.", "scope": "", "scopeKind": ""}, {"name": "wic_rm(args, native_sysroot)", "description": "Removes files or directories from a disk image partition.", "scope": "", "scopeKind": ""}, {"name": "wic_write(args, native_sysroot)", "description": "Writes a disk image to target media/device.", "scope": "", "scopeKind": ""}, {"name": "find_canned(scripts_path, file_name)", "description": "Finds a canned-wks file either by path or by filename within canned image directories.", "scope": "", "scopeKind": ""}, {"name": "get_custom_config(boot_file)", "description": "Retrieves custom bootloader configuration from a specified canned image or file.", "scope": "", "scopeKind": ""}, {"name": "__del__(self)", "scope": "Disk", "scopeKind": "class", "description": "unavailable"}, {"name": "__getattr__(self, name)", "scope": "Disk", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, imagepath, native_sysroot, fstypes=('fat', 'ext'))", "scope": "Disk", "scopeKind": "class", "description": "unavailable"}, {"name": "_get_part_image(self, pnum)", "scope": "Disk", "scopeKind": "class", "description": "unavailable"}, {"name": "_put_part_image(self, pnum)", "scope": "Disk", "scopeKind": "class", "description": "unavailable"}, {"name": "copy(self, src, dest)", "scope": "Disk", "scopeKind": "class", "description": "unavailable"}, {"name": "dir(self, pnum, path)", "scope": "Disk", "scopeKind": "class", "description": "unavailable"}, {"name": "get_partitions(self)", "scope": "Disk", "scopeKind": "class", "description": "unavailable"}, {"name": "read_ptable(path)", "scope": "Disk.write", "scopeKind": "member", "description": "unavailable"}, {"name": "remove(self, pnum, path, recursive)", "scope": "Disk", "scopeKind": "class", "description": "unavailable"}, {"name": "remove_ext(self, pnum, path, recursive)", "scope": "Disk", "scopeKind": "class", "description": "unavailable"}, {"name": "write(self, target, expand)", "scope": "Disk", "scopeKind": "class", "description": "unavailable"}, {"name": "write_ptable(parts, target)", "scope": "Disk.write", "scopeKind": "member", "description": "unavailable"}, {"name": "write_sfdisk_script(outf, parts)", "scope": "Disk.write", "scopeKind": "member", "description": "unavailable"}], "calls": ["logging.getLogger", "os.environ.get", "os.path.join", "os.path.isdir", "get_bitbake_var", "os.walk", "os.path.exists", "os.makedirs", "shutil.which", "exec_cmd", "open", "os.unlink", "os.ftruncate", "os.path.basename", "os.path.dirname", "os.read", "os.write", "subprocess", "os.path.splitext"], "search-terms": ["wic", "canned-wks", "openembedded", "disk image", "partition management", "filesystem", "image creation", "kickstart", "wks", "bootloader configuration"], "state": 2, "file_id": 1457, "knowledge_revision": 14612, "git_revision": "", "ctags": [{"_type": "tag", "name": "CANNED_IMAGE_DIR", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^CANNED_IMAGE_DIR = \"lib\\/wic\\/canned-wks\" # relative to scripts$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Disk", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^class Disk:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SCRIPTS_CANNED_IMAGE_DIR", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^SCRIPTS_CANNED_IMAGE_DIR = \"scripts\\/\" + CANNED_IMAGE_DIR$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "WIC_DIR", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^WIC_DIR = \"wic\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "__del__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^    def __del__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Disk", "scopeKind": "class"}, {"_type": "tag", "name": "__getattr__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^    def __getattr__(self, name):$/", "language": "Python", "kind": "member", "signature": "(self, name)", "scope": "Disk", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^    def __init__(self, imagepath, native_sysroot, fstypes=('fat', 'ext')):$/", "language": "Python", "kind": "member", "signature": "(self, imagepath, native_sysroot, fstypes=('fat', 'ext'))", "scope": "Disk", "scopeKind": "class"}, {"_type": "tag", "name": "_get_part_image", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^    def _get_part_image(self, pnum):$/", "language": "Python", "kind": "member", "signature": "(self, pnum)", "scope": "Disk", "scopeKind": "class"}, {"_type": "tag", "name": "_put_part_image", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^    def _put_part_image(self, pnum):$/", "language": "Python", "kind": "member", "signature": "(self, pnum)", "scope": "Disk", "scopeKind": "class"}, {"_type": "tag", "name": "build_canned_image_list", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^def build_canned_image_list(path):$/", "language": "Python", "kind": "function", "signature": "(path)"}, {"_type": "tag", "name": "copy", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^    def copy(self, src, dest):$/", "language": "Python", "kind": "member", "signature": "(self, src, dest)", "scope": "Disk", "scopeKind": "class"}, {"_type": "tag", "name": "dir", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^    def dir(self, pnum, path):$/", "language": "Python", "kind": "member", "signature": "(self, pnum, path)", "scope": "Disk", "scopeKind": "class"}, {"_type": "tag", "name": "find_canned", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^def find_canned(scripts_path, file_name):$/", "language": "Python", "kind": "function", "signature": "(scripts_path, file_name)"}, {"_type": "tag", "name": "find_canned_image", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^def find_canned_image(scripts_path, wks_file):$/", "language": "Python", "kind": "function", "signature": "(scripts_path, wks_file)"}, {"_type": "tag", "name": "get_custom_config", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^def get_custom_config(boot_file):$/", "language": "Python", "kind": "function", "signature": "(boot_file)"}, {"_type": "tag", "name": "get_partitions", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^    def get_partitions(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Disk", "scopeKind": "class"}, {"_type": "tag", "name": "list_canned_image_help", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^def list_canned_image_help(scripts_path, fullpath):$/", "language": "Python", "kind": "function", "signature": "(scripts_path, fullpath)"}, {"_type": "tag", "name": "list_canned_images", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^def list_canned_images(scripts_path):$/", "language": "Python", "kind": "function", "signature": "(scripts_path)"}, {"_type": "tag", "name": "list_source_plugins", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^def list_source_plugins():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^logger = logging.getLogger('wic')$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "read_ptable", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^        def read_ptable(path):$/", "file": true, "language": "Python", "kind": "function", "signature": "(path)", "scope": "Disk.write", "scopeKind": "member"}, {"_type": "tag", "name": "remove", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^    def remove(self, pnum, path, recursive):$/", "language": "Python", "kind": "member", "signature": "(self, pnum, path, recursive)", "scope": "Disk", "scopeKind": "class"}, {"_type": "tag", "name": "remove_ext", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^    def remove_ext(self, pnum, path, recursive):$/", "language": "Python", "kind": "member", "signature": "(self, pnum, path, recursive)", "scope": "Disk", "scopeKind": "class"}, {"_type": "tag", "name": "verify_build_env", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^def verify_build_env():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "wic_cp", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^def wic_cp(args, native_sysroot):$/", "language": "Python", "kind": "function", "signature": "(args, native_sysroot)"}, {"_type": "tag", "name": "wic_create", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^def wic_create(wks_file, rootfs_dir, bootimg_dir, kernel_dir,$/", "language": "Python", "kind": "function", "signature": "(wks_file, rootfs_dir, bootimg_dir, kernel_dir, native_sysroot, options)"}, {"_type": "tag", "name": "wic_list", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^def wic_list(args, scripts_path):$/", "language": "Python", "kind": "function", "signature": "(args, scripts_path)"}, {"_type": "tag", "name": "wic_ls", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^def wic_ls(args, native_sysroot):$/", "language": "Python", "kind": "function", "signature": "(args, native_sysroot)"}, {"_type": "tag", "name": "wic_rm", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^def wic_rm(args, native_sysroot):$/", "language": "Python", "kind": "function", "signature": "(args, native_sysroot)"}, {"_type": "tag", "name": "wic_write", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^def wic_write(args, native_sysroot):$/", "language": "Python", "kind": "function", "signature": "(args, native_sysroot)"}, {"_type": "tag", "name": "write", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^    def write(self, target, expand):$/", "language": "Python", "kind": "member", "signature": "(self, target, expand)", "scope": "Disk", "scopeKind": "class"}, {"_type": "tag", "name": "write_ptable", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^        def write_ptable(parts, target):$/", "file": true, "language": "Python", "kind": "function", "signature": "(parts, target)", "scope": "Disk.write", "scopeKind": "member"}, {"_type": "tag", "name": "write_sfdisk_script", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/engine.py", "pattern": "/^        def write_sfdisk_script(outf, parts):$/", "file": true, "language": "Python", "kind": "function", "signature": "(outf, parts)", "scope": "Disk.write", "scopeKind": "member"}], "hash": "fc78c36aad96c7162667d2e0e2067de9", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "openembedded-core/scripts/lib/wic/engine.py", "fields": [{"name": "CANNED_IMAGE_DIR = \"lib\\/wic\\/canned-wks\" # relative to scripts", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SCRIPTS_CANNED_IMAGE_DIR = \"scripts\\/\" + CANNED_IMAGE_DIR", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "WIC_DIR = \"wic\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logger = logging.getLogger('wic')", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"14612": ""}]}