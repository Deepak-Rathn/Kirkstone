{"is_source_file": true, "format": "C", "description": "This file implements a value-change detection API for a system using RBUS messaging. It manages subscriptions to parameter value changes, periodically polls for updates on registered parameters, and publishes events when changes are detected. The code includes subscription management, polling thread logic, filter application, and interaction with other system components for retrieving parameter values and publishing events.", "external_files": ["ccsp_rbus_value_change.h", "rbus_message_bus.h", "ccsp_base_api.h", "ccsp_message_bus.h", "ccsp_trace.h", "<rtmessage/rtVector.h>", "<rbus/rbus.h>"], "external_methods": ["rbusFilter_InitFromMessage", "rbusFilter_Release", "rbusFilter_Retain", "rbusFilter_Compare", "rbusFilter_AppendToMessage", "rbus_publishSubscriberEvent", "rbusValue_Init", "rbusValue_SetFromString", "rbusValue_Release"], "published": ["rbusValueChange_Close", "Ccsp_RbusValueChange_Subscribe", "Ccsp_RbusValueChange_Unsubscribe"], "classes": [], "methods": [{"name": "void rbusValueChange_Init()", "description": "Initializes internal data structures and mutex for value change detection.", "scope": "", "scopeKind": ""}, {"name": "void vcParams_Free(void * p)", "description": "Frees memory associated with a ValueChangeRecord instance.", "scope": "", "scopeKind": ""}, {"name": "ValueChangeRecord * vcParams_Find(void * handle,const char * listener,const char * parameter,const char * eventName,int32_t componentId,rbusFilter_t filter)", "description": "Searches for an existing subscription record matching the provided handle, listener, parameter, event name, component id, and filter.", "scope": "", "scopeKind": ""}, {"name": "parameterValStruct_t ** rbusValueChange_GetParameterValue(ValueChangeRecord * rec)", "description": "Retrieves the current value of a parameter via the bus interface.", "scope": "", "scopeKind": ""}, {"name": "rbusValueType_t rbusValueChange_GetDataType(enum dataType_e dt)", "description": "Maps internal enum data types to appropriate RBUS data types.", "scope": "", "scopeKind": ""}, {"name": "int rbusValueChange_getFilterResult(ValueChangeRecord * rec,parameterValStruct_t * val)", "description": "Applies the filter to old and new values to determine if a change was significant enough to trigger an event.", "scope": "", "scopeKind": ""}, {"name": "void rbusValueChange_handlePublish(ValueChangeRecord * rec,parameterValStruct_t * val,int filterResult)", "description": "Constructs and publishes a value-change event message to the listener via RBUS.", "scope": "", "scopeKind": ""}, {"name": "void * rbusValueChange_pollingThreadFunc(void * userData)", "description": "Background thread function that periodically polls registered parameters for value changes and triggers events.", "scope": "", "scopeKind": ""}, {"name": "int Ccsp_RbusValueChange_Subscribe(void * handle,const char * listener,const char * parameter,const char * eventName,int32_t componentId,int32_t interval,int32_t duration,rbusFilter_t filter)", "description": "Adds a new subscription for parameter value change detection and starts the polling thread if necessary.", "scope": "", "scopeKind": ""}, {"name": "int Ccsp_RbusValueChange_Unsubscribe(void * handle,const char * listener,const char * parameter,const char * eventName,int32_t componentId,rbusFilter_t filter)", "description": "Removes a subscription and stops the polling thread if no more subscriptions exist.", "scope": "", "scopeKind": ""}, {"name": "int rbusValueChange_Close(void * handle)", "description": "Cleans up all subscriptions and resources related to a given bus handle.", "scope": "", "scopeKind": ""}], "search-terms": ["value change detection", "parameter subscription", "polling thread", "RBUS message event", "filter application", "ccsp rbus", "ccsp_value_change", "subscription management"], "state": 2, "file_id": 10217, "knowledge_revision": 23211, "git_revision": "", "ctags": [{"_type": "tag", "name": "Ccsp_RbusValueChange_Subscribe", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^int Ccsp_RbusValueChange_Subscribe($/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(void * handle,const char * listener,const char * parameter,const char * eventName,int32_t componentId,int32_t interval,int32_t duration,rbusFilter_t filter)"}, {"_type": "tag", "name": "Ccsp_RbusValueChange_Unsubscribe", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^int Ccsp_RbusValueChange_Unsubscribe($/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(void * handle,const char * listener,const char * parameter,const char * eventName,int32_t componentId,rbusFilter_t filter)"}, {"_type": "tag", "name": "VC_LOCK", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^#define VC_LOCK(/", "file": true, "language": "C", "kind": "macro", "signature": "()"}, {"_type": "tag", "name": "VC_UNLOCK", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^#define VC_UNLOCK(/", "file": true, "language": "C", "kind": "macro", "signature": "()"}, {"_type": "tag", "name": "ValueChangeRecord", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^typedef struct ValueChangeRecord$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "ValueChangeRecord", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^} ValueChangeRecord;$/", "file": true, "language": "C", "typeref": "struct:ValueChangeRecord", "kind": "typedef"}, {"_type": "tag", "name": "_GNU_SOURCE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^#define _GNU_SOURCE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "componentId", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^    int32_t componentId;$/", "file": true, "language": "C", "typeref": "typename:int32_t", "kind": "member", "scope": "ValueChangeRecord", "scopeKind": "struct"}, {"_type": "tag", "name": "duration", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^    int32_t duration;$/", "file": true, "language": "C", "typeref": "typename:int32_t", "kind": "member", "scope": "ValueChangeRecord", "scopeKind": "struct"}, {"_type": "tag", "name": "eventName", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^    char* eventName;$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "ValueChangeRecord", "scopeKind": "struct"}, {"_type": "tag", "name": "filter", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^    rbusFilter_t filter;$/", "file": true, "language": "C", "typeref": "typename:rbusFilter_t", "kind": "member", "scope": "ValueChangeRecord", "scopeKind": "struct"}, {"_type": "tag", "name": "handle", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^    void* handle;$/", "file": true, "language": "C", "typeref": "typename:void *", "kind": "member", "scope": "ValueChangeRecord", "scopeKind": "struct"}, {"_type": "tag", "name": "interval", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^    int32_t interval;$/", "file": true, "language": "C", "typeref": "typename:int32_t", "kind": "member", "scope": "ValueChangeRecord", "scopeKind": "struct"}, {"_type": "tag", "name": "listener", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^    char* listener; $/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "ValueChangeRecord", "scopeKind": "struct"}, {"_type": "tag", "name": "parameter", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^    char* parameter; $/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "ValueChangeRecord", "scopeKind": "struct"}, {"_type": "tag", "name": "rbusValueChange_Close", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^int rbusValueChange_Close(void* handle)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(void * handle)"}, {"_type": "tag", "name": "rbusValueChange_GetDataType", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^static rbusValueType_t rbusValueChange_GetDataType(enum dataType_e dt)$/", "file": true, "language": "C", "typeref": "typename:rbusValueType_t", "kind": "function", "signature": "(enum dataType_e dt)"}, {"_type": "tag", "name": "rbusValueChange_GetParameterValue", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^static parameterValStruct_t** rbusValueChange_GetParameterValue(ValueChangeRecord* rec)$/", "file": true, "language": "C", "typeref": "typename:parameterValStruct_t **", "kind": "function", "signature": "(ValueChangeRecord * rec)"}, {"_type": "tag", "name": "rbusValueChange_Init", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^static void rbusValueChange_Init()$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "rbusValueChange_getFilterResult", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^static int rbusValueChange_getFilterResult(ValueChangeRecord* rec, parameterValStruct_t* val)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(ValueChangeRecord * rec,parameterValStruct_t * val)"}, {"_type": "tag", "name": "rbusValueChange_handlePublish", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^static void rbusValueChange_handlePublish(ValueChangeRecord* rec, parameterValStruct_t* val, int/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(ValueChangeRecord * rec,parameterValStruct_t * val,int filterResult)"}, {"_type": "tag", "name": "rbusValueChange_pollingThreadFunc", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^static void* rbusValueChange_pollingThreadFunc(void *userData)$/", "file": true, "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "(void * userData)"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^    char* value;$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "ValueChangeRecord", "scopeKind": "struct"}, {"_type": "tag", "name": "vcParams_Find", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^static ValueChangeRecord* vcParams_Find(void* handle, const char* listener, const char* paramete/", "file": true, "language": "C", "typeref": "typename:ValueChangeRecord *", "kind": "function", "signature": "(void * handle,const char * listener,const char * parameter,const char * eventName,int32_t componentId,rbusFilter_t filter)"}, {"_type": "tag", "name": "vcParams_Free", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^static void vcParams_Free(void* p)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void * p)"}, {"_type": "tag", "name": "vcinit", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^static int              vcinit      = 0;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "vcmutex", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^static pthread_mutex_t  vcmutex;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "vcparams", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^static rtVector         vcparams    = NULL;$/", "file": true, "language": "C", "typeref": "typename:rtVector", "kind": "variable"}, {"_type": "tag", "name": "vcperiod", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^static int              vcperiod    = 1;\\/\\/seconds$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "vcrunning", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^static int              vcrunning   = 0;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "vcthread", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "pattern": "/^static pthread_t        vcthread;$/", "file": true, "language": "C", "typeref": "typename:pthread_t", "kind": "variable"}], "hash": "dffcf85a141e00753cce46f0d596a2ce", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_rbus_value_change.c", "fields": [{"name": "int32_t componentId", "scope": "ValueChangeRecord", "scopeKind": "struct", "description": "unavailable"}, {"name": "int32_t duration", "scope": "ValueChangeRecord", "scopeKind": "struct", "description": "unavailable"}, {"name": "char * eventName", "scope": "ValueChangeRecord", "scopeKind": "struct", "description": "unavailable"}, {"name": "rbusFilter_t filter", "scope": "ValueChangeRecord", "scopeKind": "struct", "description": "unavailable"}, {"name": "void * handle", "scope": "ValueChangeRecord", "scopeKind": "struct", "description": "unavailable"}, {"name": "int32_t interval", "scope": "ValueChangeRecord", "scopeKind": "struct", "description": "unavailable"}, {"name": "char * listener", "scope": "ValueChangeRecord", "scopeKind": "struct", "description": "unavailable"}, {"name": "char * parameter", "scope": "ValueChangeRecord", "scopeKind": "struct", "description": "unavailable"}, {"name": "char * value", "scope": "ValueChangeRecord", "scopeKind": "struct", "description": "unavailable"}, {"name": "int vcinit", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_mutex_t vcmutex", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "rtVector vcparams", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int vcperiod", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int vcrunning", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_t vcthread", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"23211": ""}]}