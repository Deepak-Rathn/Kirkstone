{"is_source_file": true, "format": "Python", "description": "This Python script, openembedded-core/meta/lib/oe/buildhistory_analysis.py, defines a module that analyzes differences in build history repositories between revisions. It includes functions and classes for comparing package lists, file lists, blobs, and signatures, as well as processing git diffs and reporting changes related to package build histories, images, and repositories.", "external_files": ["git", "re", "shlex", "hashlib", "collections", "bb.utils", "bb.tinfoil"], "external_methods": ["bb.utils.explode_dep_versions2", "bb.utils.vercmp", "bb.utils.split_version", "bb.siggen.find_siginfo", "bb.siggen.compare_sigfiles"], "published": ["compare_dict_blobs", "process_changes", "compare_siglists", "compare_pkg_lists", "compare_file_lists", "compare_lists"], "classes": [{"name": "ChangeRecord", "description": "Represents a record of a change in build history data, with methods for formatting the change description."}, {"name": "FileChange", "description": "Represents a file change event with various types (add, remove, move, etc.) and string representations."}], "methods": [{"name": "init_colours(use_colours)", "description": "Initializes the colour codes for terminal output based on whether colours should be used.", "scope": "", "scopeKind": ""}, {"name": "blob_to_dict(blob)", "description": "Converts a blob's data stream into a dictionary of key-value pairs.", "scope": "", "scopeKind": ""}, {"name": "file_list_to_dict(lines)", "description": "Parses a list of file lines into a dictionary mapping file paths to their metadata.", "scope": "", "scopeKind": ""}, {"name": "compare_file_lists(alines, blines, compare_ownership=True)", "description": "Compares two file lists and returns a list of file change objects.", "scope": "", "scopeKind": ""}, {"name": "compare_lists(alines, blines)", "description": "Compares two simple string lists (such as package names) and reports additions/removals.", "scope": "", "scopeKind": ""}, {"name": "compare_pkg_lists(astr, bstr)", "description": "Compares two package dependency lists, returning processed dependency maps with differences.", "scope": "", "scopeKind": ""}, {"name": "compare_dict_blobs(path, ablob, bblob, report_all, report_ver)", "description": "Compares two blobs containing package or build data, returning a list of change records.", "scope": "", "scopeKind": ""}, {"name": "compare_siglists(a_blob, b_blob, taskdiff=False)", "description": "Compares signature lists from blobs to identify added, removed, or changed signatures.", "scope": "", "scopeKind": ""}, {"name": "process_changes(repopath, revision1, revision2='HEAD', report_all=False, report_ver=False, sigs=False, sigsdiff=False, exclude_path=None)", "description": "Main function that processes git repository diffs between two revisions, returning a list of build history changes such as package, image, or file modifications.", "scope": "", "scopeKind": ""}, {"name": "__init__(self, path, changetype, oldvalue = None, newvalue = None)", "scope": "FileChange", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, path, fieldname, oldvalue, newvalue, monitored)", "scope": "ChangeRecord", "scopeKind": "class", "description": "unavailable"}, {"name": "__str__(self)", "scope": "FileChange", "scopeKind": "class", "description": "unavailable"}, {"name": "_ftype_str(self, ftype)", "scope": "FileChange", "scopeKind": "class", "description": "unavailable"}, {"name": "_str_internal(self, outer)", "scope": "ChangeRecord", "scopeKind": "class", "description": "unavailable"}, {"name": "compare_hashfiles(pn, taskname, hash1, hash2)", "scope": "compare_siglists", "scopeKind": "function", "description": "unavailable"}, {"name": "detect_renamed_dirs(aitems, bitems)", "scope": "ChangeRecord._str_internal", "scopeKind": "member", "description": "unavailable"}, {"name": "pkglist_combine(depver)", "scope": "ChangeRecord._str_internal", "scopeKind": "member", "description": "unavailable"}, {"name": "readsigs(lines)", "scope": "compare_siglists", "scopeKind": "function", "description": "unavailable"}, {"name": "recursecb(key, hash1, hash2)", "scope": "compare_siglists", "scopeKind": "function", "description": "unavailable"}], "calls": ["git.Repo", "repo.commit", "commit.diff", "d.a_blob.data_stream.read", "d.b_blob.data_stream.read", "compare_dict_blobs", "compare_siglists", "compare_file_lists", "compare_lists", "bb.siggen.find_siginfo", "bb.siggen.compare_sigfiles", "bb.utils.explode_dep_versions2", "bb.utils.vercmp", "bb.utils.split_version"], "search-terms": ["buildhistory", "git diff", "package comparison", "build metadata", "build signature", "package lists", "delta analysis", "image change detection", "dependency differences"], "state": 2, "file_id": 1834, "knowledge_revision": 14977, "git_revision": "", "ctags": [{"_type": "tag", "name": "ChangeRecord", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^class ChangeRecord:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "FileChange", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^class FileChange:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^    def __init__(self, path, changetype, oldvalue = None, newvalue = None):$/", "language": "Python", "kind": "member", "signature": "(self, path, changetype, oldvalue = None, newvalue = None)", "scope": "FileChange", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^    def __init__(self, path, fieldname, oldvalue, newvalue, monitored):$/", "language": "Python", "kind": "member", "signature": "(self, path, fieldname, oldvalue, newvalue, monitored)", "scope": "ChangeRecord", "scopeKind": "class"}, {"_type": "tag", "name": "__str__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^    def __str__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ChangeRecord", "scopeKind": "class"}, {"_type": "tag", "name": "__str__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^    def __str__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "FileChange", "scopeKind": "class"}, {"_type": "tag", "name": "_ftype_str", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^    def _ftype_str(self, ftype):$/", "language": "Python", "kind": "member", "signature": "(self, ftype)", "scope": "FileChange", "scopeKind": "class"}, {"_type": "tag", "name": "_str_internal", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^    def _str_internal(self, outer):$/", "language": "Python", "kind": "member", "signature": "(self, outer)", "scope": "ChangeRecord", "scopeKind": "class"}, {"_type": "tag", "name": "blob_to_dict", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^def blob_to_dict(blob):$/", "language": "Python", "kind": "function", "signature": "(blob)"}, {"_type": "tag", "name": "changetype_add", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^    changetype_add = 'A'$/", "language": "Python", "kind": "variable", "scope": "FileChange", "scopeKind": "class"}, {"_type": "tag", "name": "changetype_link", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^    changetype_link = 'L'$/", "language": "Python", "kind": "variable", "scope": "FileChange", "scopeKind": "class"}, {"_type": "tag", "name": "changetype_move", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^    changetype_move = 'M'$/", "language": "Python", "kind": "variable", "scope": "FileChange", "scopeKind": "class"}, {"_type": "tag", "name": "changetype_ownergroup", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^    changetype_ownergroup = 'O'$/", "language": "Python", "kind": "variable", "scope": "FileChange", "scopeKind": "class"}, {"_type": "tag", "name": "changetype_perms", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^    changetype_perms = 'P'$/", "language": "Python", "kind": "variable", "scope": "FileChange", "scopeKind": "class"}, {"_type": "tag", "name": "changetype_remove", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^    changetype_remove = 'R'$/", "language": "Python", "kind": "variable", "scope": "FileChange", "scopeKind": "class"}, {"_type": "tag", "name": "changetype_type", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^    changetype_type = 'T'$/", "language": "Python", "kind": "variable", "scope": "FileChange", "scopeKind": "class"}, {"_type": "tag", "name": "colours", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^colours = {$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "compare_dict_blobs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^def compare_dict_blobs(path, ablob, bblob, report_all, report_ver):$/", "language": "Python", "kind": "function", "signature": "(path, ablob, bblob, report_all, report_ver)"}, {"_type": "tag", "name": "compare_file_lists", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^def compare_file_lists(alines, blines, compare_ownership=True):$/", "language": "Python", "kind": "function", "signature": "(alines, blines, compare_ownership=True)"}, {"_type": "tag", "name": "compare_hashfiles", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^            def compare_hashfiles(pn, taskname, hash1, hash2):$/", "file": true, "language": "Python", "kind": "function", "signature": "(pn, taskname, hash1, hash2)", "scope": "compare_siglists", "scopeKind": "function"}, {"_type": "tag", "name": "compare_lists", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^def compare_lists(alines, blines):$/", "language": "Python", "kind": "function", "signature": "(alines, blines)"}, {"_type": "tag", "name": "compare_pkg_lists", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^def compare_pkg_lists(astr, bstr):$/", "language": "Python", "kind": "function", "signature": "(astr, bstr)"}, {"_type": "tag", "name": "compare_siglists", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^def compare_siglists(a_blob, b_blob, taskdiff=False):$/", "language": "Python", "kind": "function", "signature": "(a_blob, b_blob, taskdiff=False)"}, {"_type": "tag", "name": "defaultval_map", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^defaultval_map = {'PKG': 'PKG', 'PKGE': 'PE', 'PKGV': 'PV', 'PKGR': 'PR'}$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "detect_renamed_dirs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^        def detect_renamed_dirs(aitems, bitems):$/", "file": true, "language": "Python", "kind": "function", "signature": "(aitems, bitems)", "scope": "ChangeRecord._str_internal", "scopeKind": "member"}, {"_type": "tag", "name": "file_list_to_dict", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^def file_list_to_dict(lines):$/", "language": "Python", "kind": "function", "signature": "(lines)"}, {"_type": "tag", "name": "img_monitor_files", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^img_monitor_files = ['installed-package-names.txt', 'files-in-image.txt']$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "init_colours", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^def init_colours(use_colours):$/", "language": "Python", "kind": "function", "signature": "(use_colours)"}, {"_type": "tag", "name": "list_fields", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^list_fields = ['DEPENDS', 'RPROVIDES', 'RDEPENDS', 'RRECOMMENDS', 'RSUGGESTS', 'RREPLACES', 'RCO/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "list_order_fields", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^list_order_fields = ['PACKAGES']$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "monitor_fields", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^monitor_fields = ['RPROVIDES', 'RDEPENDS', 'RRECOMMENDS', 'RREPLACES', 'RCONFLICTS', 'PACKAGES',/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "monitor_numeric_threshold", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^monitor_numeric_threshold = 10$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "numeric_fields", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^numeric_fields = ['PKGSIZE', 'IMAGESIZE']$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "numeric_removal", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^numeric_removal = str.maketrans('0123456789', 'XXXXXXXXXX')$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "pkglist_combine", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^        def pkglist_combine(depver):$/", "file": true, "language": "Python", "kind": "function", "signature": "(depver)", "scope": "ChangeRecord._str_internal", "scopeKind": "member"}, {"_type": "tag", "name": "process_changes", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^def process_changes(repopath, revision1, revision2='HEAD', report_all=False, report_ver=False,$/", "language": "Python", "kind": "function", "signature": "(repopath, revision1, revision2='HEAD', report_all=False, report_ver=False, sigs=False, sigsdiff=False, exclude_path=None)"}, {"_type": "tag", "name": "readsigs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^    def readsigs(lines):$/", "file": true, "language": "Python", "kind": "function", "signature": "(lines)", "scope": "compare_siglists", "scopeKind": "function"}, {"_type": "tag", "name": "recursecb", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^            def recursecb(key, hash1, hash2):$/", "file": true, "language": "Python", "kind": "function", "signature": "(key, hash1, hash2)", "scope": "compare_siglists", "scopeKind": "function"}, {"_type": "tag", "name": "ver_monitor_fields", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/buildhistory_analysis.py", "pattern": "/^ver_monitor_fields = ['PKGE', 'PKGV', 'PKGR']$/", "language": "Python", "kind": "variable"}], "hash": "5a98144883d12b4ba93e6a2a73ddcde0", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "openembedded-core/meta/lib/oe/buildhistory_analysis.py", "fields": [{"name": "changetype_add = 'A'", "scope": "FileChange", "scopeKind": "class", "description": "unavailable"}, {"name": "changetype_link = 'L'", "scope": "FileChange", "scopeKind": "class", "description": "unavailable"}, {"name": "changetype_move = 'M'", "scope": "FileChange", "scopeKind": "class", "description": "unavailable"}, {"name": "changetype_ownergroup = 'O'", "scope": "FileChange", "scopeKind": "class", "description": "unavailable"}, {"name": "changetype_perms = 'P'", "scope": "FileChange", "scopeKind": "class", "description": "unavailable"}, {"name": "changetype_remove = 'R'", "scope": "FileChange", "scopeKind": "class", "description": "unavailable"}, {"name": "changetype_type = 'T'", "scope": "FileChange", "scopeKind": "class", "description": "unavailable"}, {"name": "colours = {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "defaultval_map = {'PKG': 'PKG', 'PKGE': 'PE', 'PKGV': 'PV', 'PKGR': 'PR'}", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "img_monitor_files = ['installed-package-names.txt', 'files-in-image.txt']", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list_fields = ['DEPENDS', 'RPROVIDES', 'RDEPENDS', 'RRECOMMENDS', 'RSUGGESTS', 'RREPLACES', 'RCO/", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list_order_fields = ['PACKAGES']", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "monitor_fields = ['RPROVIDES', 'RDEPENDS', 'RRECOMMENDS', 'RREPLACES', 'RCONFLICTS', 'PACKAGES',/", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "monitor_numeric_threshold = 10", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "numeric_fields = ['PKGSIZE', 'IMAGESIZE']", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "numeric_removal = str.maketrans('0123456789', 'XXXXXXXXXX')", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ver_monitor_fields = ['PKGE', 'PKGV', 'PKGR']", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"14977": ""}]}