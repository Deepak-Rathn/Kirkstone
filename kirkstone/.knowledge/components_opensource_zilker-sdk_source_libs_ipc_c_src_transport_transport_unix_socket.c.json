{"is_source_file": true, "format": "C", "description": "This file implements UNIX socket transport layer for inter-process communication (IPC). It includes functions for creating, connecting, binding, subscribing, sending, receiving, and shutting down sockets, both for client and server roles. It manages socket mapping with hash maps, handles multicast and unicast message exchange, and provides synchronization for thread safety.", "external_files": ["<stdio.h>", "<stdlib.h>", "<stdint.h>", "<stdbool.h>", "<unistd.h>", "<string.h>", "<inttypes.h>", "<errno.h>", "<fcntl.h>", "<sys/types.h>", "<sys/socket.h>", "<sys/select.h>", "<sys/un.h>", "<arpa/inet.h>", "<icTypes/icHashMap.h>", "<icLog/logging.h>", "<icIpc/ipcSender.h>", "<icIpc/ipcMessage.h>", "<pthread.h>", "<icIpc/baseEvent.h>", "../serviceRegistry.h", "transport.h"], "external_methods": ["hashMapCreate", "hashMapPut", "hashMapGet", "hashMapDelete", "hashMapIteratorCreate", "hashMapIteratorHasNext", "hashMapIteratorGetNext", "hashMapIteratorDeleteCurrent", "hashMapIteratorDestroy", "createIPCMessage", "cJSON_Parse"], "published": ["transport_connect", "transport_establish", "transport_pub_register", "transport_sub_register", "transport_get_shutdown_sock_readfd", "transport_close", "transport_abortmsg", "transport_subscribe", "transport_sub_recv", "transport_publish", "transport_send", "transport_sendmsg", "transport_recv", "transport_recvmsg", "transport_shutdown"], "classes": [], "methods": [{"name": "ConnectionInfo getConnectionInfo(int socket)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "icHashMap * get_map(void)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void hashmap_free_handler(void * key,void * value)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void transport_abortmsg(transport_control_t * control)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void transport_close(int sockfd)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int transport_connect(const char * host,uint16_t servicePortNum)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int transport_establish(const char * host,uint16_t servicePortNum)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void transport_free_msg(void * ptr)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int transport_get_shutdown_sock_readfd(int sockfd)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void * transport_malloc_msg(size_t size)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int transport_pub_register(const char * channel)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void transport_publish(int sockfd,const cJSON * event)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void * transport_realloc_msg(void * ptr,size_t size)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "IPCCode transport_recv(int sockfd,IPCMessage ** msg,time_t timeoutSecs)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "IPCCode transport_recvmsg(int sockfd,transport_control_t * control,IPCMessage ** msg,long timeoutSecs)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "IPCCode transport_send(int sockfd,const IPCMessage * msg,time_t timeoutSecs)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "IPCCode transport_sendmsg(int sockfd,transport_control_t * control,const IPCMessage * msg,time_t timeoutSecs)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void transport_shutdown()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int transport_sub_recv(int sockfd,cJSON ** event)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int transport_sub_register(const char * channel)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int transport_subscribe(int sockfd,int id)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["socket", "connect", "bind", "listen", "accept", "close", "shutdown", "setsockopt", "inet_aton", "getpeername", "getsockname", "recvfrom", "sendto", "send", "recv", "write", "pipe", "malloc", "free", "realloc", "memset", "htons", "ntohs", "htonl", "ntohl", "strerror", "pthread_mutex_lock", "pthread_mutex_unlock", "hashMapCreate", "hashMapPut", "hashMapGet", "hashMapDelete", "hashMapIteratorCreate", "hashMapIteratorHasNext", "hashMapIteratorGetNext", "hashMapIteratorDeleteCurrent", "hashMapIteratorDestroy", "createIPCMessage", "cJSON_Parse", "canReadFromServiceSocket"], "search-terms": ["UnixSocketTransport", "transport_unix_socket", "ipc transport", "socket hash map", "multicast socket", "client connect", "server bind listen", "shutdown pipe", "message send recv", "IPCMessage", "transport_shutdown"], "state": 2, "file_id": 733, "knowledge_revision": 13896, "git_revision": "", "ctags": [{"_type": "tag", "name": "ConnectionInfo", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^} ConnectionInfo;$/", "file": true, "language": "C", "typeref": "struct:__anon2e3b57220108", "kind": "typedef"}, {"_type": "tag", "name": "INTERNAL_SHUTDOWN_MSG", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^#define INTERNAL_SHUTDOWN_MSG /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SOCKET_KEY_LEN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^#define SOCKET_KEY_LEN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SUB_RECV_BUFFER_SIZE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^#define SUB_RECV_BUFFER_SIZE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "__anon2e3b57220108", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^{$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "client_sockfd", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^    int client_sockfd;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "member", "scope": "control_block", "scopeKind": "struct"}, {"_type": "tag", "name": "control_block", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^typedef struct control_block {$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "control_block_t", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^} control_block_t;$/", "file": true, "language": "C", "typeref": "struct:control_block", "kind": "typedef"}, {"_type": "tag", "name": "getConnectionInfo", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^static ConnectionInfo getConnectionInfo(int socket)$/", "file": true, "language": "C", "typeref": "typename:ConnectionInfo", "kind": "function", "signature": "(int socket)"}, {"_type": "tag", "name": "get_map", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^static icHashMap* get_map(void)$/", "file": true, "language": "C", "typeref": "typename:icHashMap *", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "hashmap_free_handler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^static void hashmap_free_handler(void* key, void* value)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void * key,void * value)"}, {"_type": "tag", "name": "ipcSenderShutdownReadFd", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^static int ipcSenderShutdownReadFd = -1;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "ipcSenderShutdownWriteFd", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^static int ipcSenderShutdownWriteFd = -1;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "localPort", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^    uint16_t localPort;$/", "file": true, "language": "C", "typeref": "typename:uint16_t", "kind": "member", "scope": "__anon2e3b57220108", "scopeKind": "struct"}, {"_type": "tag", "name": "map_mutex", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^static pthread_mutex_t map_mutex = PTHREAD_MUTEX_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "peerPort", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^    uint16_t peerPort;$/", "file": true, "language": "C", "typeref": "typename:uint16_t", "kind": "member", "scope": "__anon2e3b57220108", "scopeKind": "struct"}, {"_type": "tag", "name": "pubsub_multicast_sockaddr", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^static struct sockaddr_in pubsub_multicast_sockaddr;$/", "file": true, "language": "C", "typeref": "struct:sockaddr_in", "kind": "variable"}, {"_type": "tag", "name": "shutdown_sock_readfd", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^    int shutdown_sock_readfd;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "member", "scope": "transport_ipc", "scopeKind": "struct"}, {"_type": "tag", "name": "shutdown_sock_writefd", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^    int shutdown_sock_writefd;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "member", "scope": "transport_ipc", "scopeKind": "struct"}, {"_type": "tag", "name": "socketMap", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^static icHashMap* socketMap = NULL;$/", "file": true, "language": "C", "typeref": "typename:icHashMap *", "kind": "variable"}, {"_type": "tag", "name": "sockfd", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^    int sockfd;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "member", "scope": "transport_ipc", "scopeKind": "struct"}, {"_type": "tag", "name": "transport_abortmsg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^void transport_abortmsg(transport_control_t *control)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(transport_control_t * control)"}, {"_type": "tag", "name": "transport_close", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^void transport_close(int sockfd)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(int sockfd)"}, {"_type": "tag", "name": "transport_connect", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^int transport_connect(const char* host, uint16_t servicePortNum)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(const char * host,uint16_t servicePortNum)"}, {"_type": "tag", "name": "transport_establish", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^int transport_establish(const char* host, uint16_t servicePortNum)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(const char * host,uint16_t servicePortNum)"}, {"_type": "tag", "name": "transport_free_msg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^void transport_free_msg(void* ptr)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void * ptr)"}, {"_type": "tag", "name": "transport_get_shutdown_sock_readfd", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^int transport_get_shutdown_sock_readfd(int sockfd)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(int sockfd)"}, {"_type": "tag", "name": "transport_ipc", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^typedef struct transport_ipc$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "transport_ipc_t", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^} transport_ipc_t;$/", "file": true, "language": "C", "typeref": "struct:transport_ipc", "kind": "typedef"}, {"_type": "tag", "name": "transport_malloc_msg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^void* transport_malloc_msg(size_t size)$/", "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "(size_t size)"}, {"_type": "tag", "name": "transport_pub_register", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^int transport_pub_register(const char* channel)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(const char * channel)"}, {"_type": "tag", "name": "transport_publish", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^void transport_publish(int sockfd, const cJSON* event)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(int sockfd,const cJSON * event)"}, {"_type": "tag", "name": "transport_realloc_msg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^void* transport_realloc_msg(void* ptr, size_t size)$/", "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "(void * ptr,size_t size)"}, {"_type": "tag", "name": "transport_recv", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^IPCCode transport_recv(int sockfd, IPCMessage** msg, time_t timeoutSecs)$/", "language": "C", "typeref": "typename:IPCCode", "kind": "function", "signature": "(int sockfd,IPCMessage ** msg,time_t timeoutSecs)"}, {"_type": "tag", "name": "transport_recvmsg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^IPCCode transport_recvmsg(int sockfd, transport_control_t* control, IPCMessage** msg, long timeo/", "language": "C", "typeref": "typename:IPCCode", "kind": "function", "signature": "(int sockfd,transport_control_t * control,IPCMessage ** msg,long timeoutSecs)"}, {"_type": "tag", "name": "transport_send", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^IPCCode transport_send(int sockfd, const IPCMessage* msg, time_t timeoutSecs)$/", "language": "C", "typeref": "typename:IPCCode", "kind": "function", "signature": "(int sockfd,const IPCMessage * msg,time_t timeoutSecs)"}, {"_type": "tag", "name": "transport_sendmsg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^IPCCode transport_sendmsg(int sockfd, transport_control_t* control, const IPCMessage* msg, time_/", "language": "C", "typeref": "typename:IPCCode", "kind": "function", "signature": "(int sockfd,transport_control_t * control,const IPCMessage * msg,time_t timeoutSecs)"}, {"_type": "tag", "name": "transport_shutdown", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^void transport_shutdown()$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "transport_sub_recv", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^int transport_sub_recv(int sockfd, cJSON** event)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(int sockfd,cJSON ** event)"}, {"_type": "tag", "name": "transport_sub_register", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^int transport_sub_register(const char* channel)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(const char * channel)"}, {"_type": "tag", "name": "transport_subscribe", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "pattern": "/^int transport_subscribe(int sockfd, int id)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(int sockfd,int id)"}], "hash": "b119a21bb4305df9bca50e6220d4dd23", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "components/opensource/zilker-sdk/source/libs/ipc/c/src/transport/transport_unix_socket.c", "fields": [{"name": "int client_sockfd", "scope": "control_block", "scopeKind": "struct", "description": "unavailable"}, {"name": "int ipcSenderShutdownReadFd", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int ipcSenderShutdownWriteFd", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "uint16_t localPort", "scope": "__anon2e3b57220108", "scopeKind": "struct", "description": "unavailable"}, {"name": "pthread_mutex_t map_mutex", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "uint16_t peerPort", "scope": "__anon2e3b57220108", "scopeKind": "struct", "description": "unavailable"}, {"name": "struct:sockaddr_in pubsub_multicast_sockaddr", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int shutdown_sock_readfd", "scope": "transport_ipc", "scopeKind": "struct", "description": "unavailable"}, {"name": "int shutdown_sock_writefd", "scope": "transport_ipc", "scopeKind": "struct", "description": "unavailable"}, {"name": "icHashMap * socketMap", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int sockfd", "scope": "transport_ipc", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"13896": ""}]}