{"is_source_file": true, "format": "C", "description": "This file implements functionalities for discovering, monitoring, and controlling Sonos speakers over a network. It includes methods for starting/stopping discovery, playing clips on speakers, monitoring speaker health, and handling SSDP discovery callbacks.", "external_files": ["<sonos/sonos.h>", "<ssdp/ssdp.h>", "<icLog/logging.h>", "<curl/curl.h>", "<cjson/cJSON.h>", "<icBuildtime.h>"], "external_methods": ["ssdpDiscoverStart", "ssdpDiscoverStop", "ssdpRecoverIpAddress", "hashMapCreate", "hashMapGet", "hashMapPut", "hashMapDelete", "hashMapCount", "hashMapDestroy"], "published": [], "classes": [], "methods": [{"name": "bool sonosStartDiscovery(SonosDiscoverCallback callback)", "description": "Initiates the SSDP discovery process for Sonos devices, setting a callback for when devices are discovered.", "scope": "", "scopeKind": ""}, {"name": "bool sonosStopDiscovery()", "description": "Stops the ongoing SSDP discovery process for Sonos devices.", "scope": "", "scopeKind": ""}, {"name": "bool sonosPlayClip(const char * ipAddress,const char * clipUrl)", "description": "Sends a command to a Sonos speaker to play a specified audio clip via HTTP PUT.", "scope": "", "scopeKind": ""}, {"name": "void sonosSpeakerDestroy(SonosSpeaker * speaker)", "description": "Frees memory associated with a SonosSpeaker object.", "scope": "", "scopeKind": ""}, {"name": "bool sonosStartMonitoring(const char * macAddress,const char * ipAddress,SonosIpAddressChangedCallback ipAddressChangedCallback)", "description": "Starts a thread to monitor a specific speaker's availability and IP address.", "scope": "", "scopeKind": ""}, {"name": "bool sonosStopMonitoring(const char * ipAddress)", "description": "Stops monitoring a specific speaker by IP address.", "scope": "", "scopeKind": ""}, {"name": "void destroySpeakerMonitoringInfo(SpeakerMonitoringInfo * info)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void localSpeakerDiscoveredCallback(SsdpDevice * device)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool pingSpeaker(const char * ipAddress)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void * speakerMonitoringThreadProc(void * arg)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "size_t writeCallback(void * contents,size_t size,size_t nmemb,void * userp)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["ssdpDiscoverStart", "ssdpDiscoverStop", "ssdpRecoverIpAddress", "curl_easy_init", "curl_easy_setopt", "curl_easy_perform", "curl_easy_cleanup", "curl_slist_append", "curl_slist_free_all", "hashMapCreate", "hashMapGet", "hashMapPut", "hashMapDelete", "hashMapCount", "hashMapDestroy"], "search-terms": ["Sonos discovery", "SSDP callback", "speaker monitoring", "play clip", "IP address recovery", "multithreaded speaker check", "Sonos control"], "state": 2, "file_id": 565, "knowledge_revision": 13729, "git_revision": "", "ctags": [{"_type": "tag", "name": "LOG_TAG", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^#define LOG_TAG /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "MONITOR_INTERVAL_SECS", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^#define MONITOR_INTERVAL_SECS /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "MemoryBlock", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^struct MemoryBlock$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "RECOVERY_TIMEOUT_SECONDS", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^#define RECOVERY_TIMEOUT_SECONDS /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SpeakerMonitoringInfo", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^} SpeakerMonitoringInfo;$/", "file": true, "language": "C", "typeref": "struct:__anonf51dc8150108", "kind": "typedef"}, {"_type": "tag", "name": "__anonf51dc8150108", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^{$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "clientSpeakerDiscoveredCallback", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^static SonosDiscoverCallback clientSpeakerDiscoveredCallback = NULL;$/", "file": true, "language": "C", "typeref": "typename:SonosDiscoverCallback", "kind": "variable"}, {"_type": "tag", "name": "destroySpeakerMonitoringInfo", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^static void destroySpeakerMonitoringInfo(SpeakerMonitoringInfo *info)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(SpeakerMonitoringInfo * info)"}, {"_type": "tag", "name": "discoverMutex", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^static pthread_mutex_t discoverMutex = PTHREAD_MUTEX_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "ipAddress", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^    char *ipAddress;$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "__anonf51dc8150108", "scopeKind": "struct"}, {"_type": "tag", "name": "ipChangedCallback", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^    SonosIpAddressChangedCallback ipChangedCallback;$/", "file": true, "language": "C", "typeref": "typename:SonosIpAddressChangedCallback", "kind": "member", "scope": "__anonf51dc8150108", "scopeKind": "struct"}, {"_type": "tag", "name": "localSpeakerDiscoveredCallback", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^static void localSpeakerDiscoveredCallback(SsdpDevice *device)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(SsdpDevice * device)"}, {"_type": "tag", "name": "macAddress", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^    char *macAddress;$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "__anonf51dc8150108", "scopeKind": "struct"}, {"_type": "tag", "name": "memory", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^    char *memory;$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "MemoryBlock", "scopeKind": "struct"}, {"_type": "tag", "name": "monitors", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^static icHashMap *monitors = NULL;$/", "file": true, "language": "C", "typeref": "typename:icHashMap *", "kind": "variable"}, {"_type": "tag", "name": "monitorsMutex", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^static pthread_mutex_t monitorsMutex = PTHREAD_MUTEX_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "pingSpeaker", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^static bool pingSpeaker(const char *ipAddress)$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(const char * ipAddress)"}, {"_type": "tag", "name": "running", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^    bool running;$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "member", "scope": "__anonf51dc8150108", "scopeKind": "struct"}, {"_type": "tag", "name": "size", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^    size_t size;$/", "file": true, "language": "C", "typeref": "typename:size_t", "kind": "member", "scope": "MemoryBlock", "scopeKind": "struct"}, {"_type": "tag", "name": "sonosPlayClip", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^bool sonosPlayClip(const char *ipAddress, const char *clipUrl)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(const char * ipAddress,const char * clipUrl)"}, {"_type": "tag", "name": "sonosSpeakerDestroy", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^void sonosSpeakerDestroy(SonosSpeaker *speaker)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(SonosSpeaker * speaker)"}, {"_type": "tag", "name": "sonosStartDiscovery", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^bool sonosStartDiscovery(SonosDiscoverCallback callback)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(SonosDiscoverCallback callback)"}, {"_type": "tag", "name": "sonosStartMonitoring", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^bool sonosStartMonitoring(const char *macAddress,$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(const char * macAddress,const char * ipAddress,SonosIpAddressChangedCallback ipAddressChangedCallback)"}, {"_type": "tag", "name": "sonosStopDiscovery", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^bool sonosStopDiscovery()$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "sonosStopMonitoring", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^bool sonosStopMonitoring(const char *ipAddress)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(const char * ipAddress)"}, {"_type": "tag", "name": "speakerMonitoringThreadProc", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^static void *speakerMonitoringThreadProc(void *arg)$/", "file": true, "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "(void * arg)"}, {"_type": "tag", "name": "ssdpHandle", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^static uint32_t ssdpHandle = 0;$/", "file": true, "language": "C", "typeref": "typename:uint32_t", "kind": "variable"}, {"_type": "tag", "name": "thread", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^    pthread_t thread;$/", "file": true, "language": "C", "typeref": "typename:pthread_t", "kind": "member", "scope": "__anonf51dc8150108", "scopeKind": "struct"}, {"_type": "tag", "name": "writeCallback", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "pattern": "/^static size_t writeCallback(void *contents, size_t size, size_t nmemb, void *userp)$/", "file": true, "language": "C", "typeref": "typename:size_t", "kind": "function", "signature": "(void * contents,size_t size,size_t nmemb,void * userp)"}], "hash": "81b4e71ac30547281f6381496fddfef3", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "components/opensource/zilker-sdk/source/libs/device/sonos/c/src/sonos.c", "fields": [{"name": "SonosDiscoverCallback clientSpeakerDiscoveredCallback", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_mutex_t discoverMutex", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char * ipAddress", "scope": "__anonf51dc8150108", "scopeKind": "struct", "description": "unavailable"}, {"name": "SonosIpAddressChangedCallback ipChangedCallback", "scope": "__anonf51dc8150108", "scopeKind": "struct", "description": "unavailable"}, {"name": "char * macAddress", "scope": "__anonf51dc8150108", "scopeKind": "struct", "description": "unavailable"}, {"name": "char * memory", "scope": "MemoryBlock", "scopeKind": "struct", "description": "unavailable"}, {"name": "icHashMap * monitors", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_mutex_t monitorsMutex", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool running", "scope": "__anonf51dc8150108", "scopeKind": "struct", "description": "unavailable"}, {"name": "size_t size", "scope": "MemoryBlock", "scopeKind": "struct", "description": "unavailable"}, {"name": "uint32_t ssdpHandle", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_t thread", "scope": "__anonf51dc8150108", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"13729": ""}]}