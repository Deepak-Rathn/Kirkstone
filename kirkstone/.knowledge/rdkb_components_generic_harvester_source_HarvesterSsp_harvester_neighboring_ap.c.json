{"is_source_file": true, "format": "C", "description": "This file implements functionality for harvesting neighboring Wi-Fi access points, managing reporting and polling periods, maintaining a linked list of neighboring AP data, and interfacing with system commands and external APIs related to Wi-Fi radio data. It includes thread management for periodic harvesting, and handles data collection, storage, and reporting for neighboring Wi-Fi access points.", "external_files": ["harvester_neighboring_ap.h", "harvester_avro.h", "ccsp_harvesterLog_wrapper.h", "safec_lib_common.h", "harvester_rbus_api.h"], "external_methods": ["wifi_getRadioEnable", "wifi_getRadioChannel", "wifi_getRadioOperatingFrequencyBand", "wifi_getNeighboringWiFiDiagnosticResult2", "rbus_getBoolValue", "rbus_getUInt32Value", "rbus_getStringValue", "ap_avro_cleanup", "GetCurrentTimeInSecond", "SetNAPPollingPeriodInNVRAM", "SetNAPReportingPeriodInNVRAM"], "published": ["SetNAPHarvestingStatus", "GetNAPHarvestingStatus", "SetNAPReportingPeriod", "GetNAPReportingPeriod", "SetNAPPollingPeriod", "GetNAPPollingPeriod", "SetNAPReportingPeriodDefault", "GetNAPReportingPeriodDefault", "SetNAPPollingPeriodDefault", "GetNAPPollingPeriodDefault", "GetNAPOverrideTTL", "SetNAPOverrideTTL", "GetNAPOverrideTTLDefault"], "classes": [{"name": "neighboringapdata", "description": "Data structure holding information about neighboring APs including radio name, number of APs, timestamp, and related data."}], "methods": [{"name": "void * StartNeighboringAPHarvesting(void * arg)", "description": "Thread function that periodically harvests neighboring AP data from Wi-Fi radios and manages reporting thresholds.", "scope": "", "scopeKind": ""}, {"name": "void add_to_nap_list(char * radioIfName,ULONG numAPs,wifi_neighbor_ap2_t * neighborapdata,char * freqband,ULONG channel)", "description": "Adds a neighboring AP data entry to the linked list.", "scope": "", "scopeKind": ""}, {"name": "void print_nap_list()", "description": "Prints all entries in the neighboring AP list for diagnostics.", "scope": "", "scopeKind": ""}, {"name": "void delete_nap_list()", "description": "Deletes all entries in the neighboring AP linked list to free resources.", "scope": "", "scopeKind": ""}, {"name": "int GetRadioNeighboringAPData(int radioIndex,char * radioIfName)", "description": "Fetches neighboring AP data for a specific radio interface, including calling system APIs and parsing results.", "scope": "", "scopeKind": ""}, {"name": "int _napsyscmd(char * cmd,char * retBuf,int retBufSize)", "description": "Executes a system command and captures its output.", "scope": "", "scopeKind": ""}, {"name": "BOOL GetNAPHarvestingStatus()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ULONG GetNAPOverrideTTL()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ULONG GetNAPOverrideTTLDefault()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ULONG GetNAPPollingPeriod()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ULONG GetNAPPollingPeriodDefault()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ULONG GetNAPReportingPeriod()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ULONG GetNAPReportingPeriodDefault()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int SetNAPHarvestingStatus(BOOL status)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int SetNAPOverrideTTL(ULONG count)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int SetNAPPollingPeriod(ULONG interval)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int SetNAPPollingPeriodDefault(ULONG interval)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int SetNAPReportingPeriod(ULONG interval)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int SetNAPReportingPeriodDefault(ULONG interval)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "BOOL ValidateNAPPeriod(ULONG interval)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void WaitForPthreadConditionTimeoutNAP()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "BOOL isvalueinNAParray(ULONG val,ULONG * arr,int size)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["pthread_create", "pthread_cond_signal", "pthread_cond_timedwait", "pthread_mutex_lock", "pthread_mutex_unlock", "clock_gettime", "gettimeofday", "wifi_getRadioEnable", "wifi_getRadioChannel", "wifi_getRadioOperatingFrequencyBand", "wifi_getNeighboringWiFiDiagnosticResult2", "ap_avro_cleanup", "SetNAPOverrideTTL", "SetNAPPollingPeriod", "SetNAPReportingPeriod", "SetNAPPollingPeriodInNVRAM", "SetNAPReportingPeriodInNVRAM", "waitForPthreadConditionTimeoutNAP"], "search-terms": ["neighboringap", "harvester_neighboring_ap", "NAPReportingPeriod", "NAPPollingPeriod", "neighboringapdata", "harvest", "WiFi Radio", "neighbor AP", "multipolling", "NAPOverrideTTL"], "state": 2, "file_id": 5656, "knowledge_revision": 18769, "git_revision": "", "ctags": [{"_type": "tag", "name": "GetNAPHarvestingStatus", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^BOOL GetNAPHarvestingStatus()$/", "language": "C", "typeref": "typename:BOOL", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "GetNAPOverrideTTL", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^ULONG GetNAPOverrideTTL()$/", "language": "C", "typeref": "typename:ULONG", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "GetNAPOverrideTTLDefault", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^ULONG GetNAPOverrideTTLDefault()$/", "language": "C", "typeref": "typename:ULONG", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "GetNAPPollingPeriod", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^ULONG GetNAPPollingPeriod()$/", "language": "C", "typeref": "typename:ULONG", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "GetNAPPollingPeriodDefault", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^ULONG GetNAPPollingPeriodDefault()$/", "language": "C", "typeref": "typename:ULONG", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "GetNAPReportingPeriod", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^ULONG GetNAPReportingPeriod()$/", "language": "C", "typeref": "typename:ULONG", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "GetNAPReportingPeriodDefault", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^ULONG GetNAPReportingPeriodDefault()$/", "language": "C", "typeref": "typename:ULONG", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "GetRadioNeighboringAPData", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^int GetRadioNeighboringAPData(int radioIndex, char* radioIfName)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(int radioIndex,char * radioIfName)"}, {"_type": "tag", "name": "NAPHarvesterStatus", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^BOOL NAPHarvesterStatus = FALSE;$/", "language": "C", "typeref": "typename:BOOL", "kind": "variable"}, {"_type": "tag", "name": "NAPOverrideTTL", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^ULONG NAPOverrideTTL = 43200;$/", "language": "C", "typeref": "typename:ULONG", "kind": "variable"}, {"_type": "tag", "name": "NAPOverrideTTLDefault", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^ULONG NAPOverrideTTLDefault = 43200;$/", "language": "C", "typeref": "typename:ULONG", "kind": "variable"}, {"_type": "tag", "name": "NAPPollingPeriod", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^ULONG NAPPollingPeriod = 21600;$/", "language": "C", "typeref": "typename:ULONG", "kind": "variable"}, {"_type": "tag", "name": "NAPPollingPeriodDefault", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^ULONG NAPPollingPeriodDefault = 21600;$/", "language": "C", "typeref": "typename:ULONG", "kind": "variable"}, {"_type": "tag", "name": "NAPReportingPeriod", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^ULONG NAPReportingPeriod = 43200;$/", "language": "C", "typeref": "typename:ULONG", "kind": "variable"}, {"_type": "tag", "name": "NAPReportingPeriodDefault", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^ULONG NAPReportingPeriodDefault = 43200;$/", "language": "C", "typeref": "typename:ULONG", "kind": "variable"}, {"_type": "tag", "name": "NeighboringAPPeriods", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^ULONG NeighboringAPPeriods[8] = {300,900,1800,3600,10800,21600,43200,86400};$/", "language": "C", "typeref": "typename:ULONG[8]", "kind": "variable"}, {"_type": "tag", "name": "SetNAPHarvestingStatus", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^int SetNAPHarvestingStatus(BOOL status)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(BOOL status)"}, {"_type": "tag", "name": "SetNAPOverrideTTL", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^int SetNAPOverrideTTL(ULONG count)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(ULONG count)"}, {"_type": "tag", "name": "SetNAPPollingPeriod", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^int SetNAPPollingPeriod(ULONG interval)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(ULONG interval)"}, {"_type": "tag", "name": "SetNAPPollingPeriodDefault", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^int SetNAPPollingPeriodDefault(ULONG interval)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(ULONG interval)"}, {"_type": "tag", "name": "SetNAPReportingPeriod", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^int SetNAPReportingPeriod(ULONG interval)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(ULONG interval)"}, {"_type": "tag", "name": "SetNAPReportingPeriodDefault", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^int SetNAPReportingPeriodDefault(ULONG interval)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(ULONG interval)"}, {"_type": "tag", "name": "StartNeighboringAPHarvesting", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^void* StartNeighboringAPHarvesting( void *arg )$/", "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "(void * arg)"}, {"_type": "tag", "name": "ValidateNAPPeriod", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^BOOL ValidateNAPPeriod(ULONG interval)$/", "language": "C", "typeref": "typename:BOOL", "kind": "function", "signature": "(ULONG interval)"}, {"_type": "tag", "name": "WaitForPthreadConditionTimeoutNAP", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^static void WaitForPthreadConditionTimeoutNAP()$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_napsyscmd", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^int _napsyscmd(char *cmd, char *retBuf, int retBufSize)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * cmd,char * retBuf,int retBufSize)"}, {"_type": "tag", "name": "add_to_nap_list", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^void add_to_nap_list(char* radioIfName, ULONG numAPs, wifi_neighbor_ap2_t* neighborapdata, char*/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(char * radioIfName,ULONG numAPs,wifi_neighbor_ap2_t * neighborapdata,char * freqband,ULONG channel)"}, {"_type": "tag", "name": "ap_buffer", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^char ap_buffer[128] = {'\\\\0'};$/", "language": "C", "typeref": "typename:char[128]", "kind": "variable"}, {"_type": "tag", "name": "currentNAPReportingPeriod", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^ULONG currentNAPReportingPeriod = 0;$/", "language": "C", "typeref": "typename:ULONG", "kind": "variable"}, {"_type": "tag", "name": "currnode", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^static struct neighboringapdata *currnode = NULL;$/", "file": true, "language": "C", "typeref": "struct:neighboringapdata *", "kind": "variable"}, {"_type": "tag", "name": "delete_nap_list", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^void delete_nap_list()$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "headnode", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^static struct neighboringapdata *headnode = NULL;$/", "file": true, "language": "C", "typeref": "struct:neighboringapdata *", "kind": "variable"}, {"_type": "tag", "name": "isvalueinNAParray", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^BOOL isvalueinNAParray(ULONG val, ULONG *arr, int size)$/", "language": "C", "typeref": "typename:BOOL", "kind": "function", "signature": "(ULONG val,ULONG * arr,int size)"}, {"_type": "tag", "name": "napCond", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^static pthread_cond_t napCond = PTHREAD_COND_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_cond_t", "kind": "variable"}, {"_type": "tag", "name": "napMutex", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^static pthread_mutex_t napMutex = PTHREAD_MUTEX_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "neighWiFiDiag_executed", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^static bool neighWiFiDiag_executed = false;$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "variable"}, {"_type": "tag", "name": "print_nap_list", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "pattern": "/^void print_nap_list()$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}], "hash": "c824d2989a403b64dd17ab58f67f2326", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/generic/harvester/source/HarvesterSsp/harvester_neighboring_ap.c", "fields": [{"name": "BOOL NAPHarvesterStatus", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ULONG NAPOverrideTTL", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ULONG NAPOverrideTTLDefault", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ULONG NAPPollingPeriod", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ULONG NAPPollingPeriodDefault", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ULONG NAPReportingPeriod", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ULONG NAPReportingPeriodDefault", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ULONG[8] NeighboringAPPeriods", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char[128] ap_buffer", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ULONG currentNAPReportingPeriod", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "struct:neighboringapdata * currnode", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "struct:neighboringapdata * headnode", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_cond_t napCond", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_mutex_t napMutex", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool neighWiFiDiag_executed", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"18769": ""}]}