{"is_source_file": true, "format": "C", "description": "This file is a C source file implementing crontab management functions. It handles creating, updating, removing, and checking cron jobs, including file locking, parsing from storage, and writing to crontab files. It also manages external system calls and file operations related to cron jobs on Linux systems.", "external_files": ["<unistd.h>", "<sys/types.h>", "<stdlib.h>", "<stdio.h>", "<string.h>", "<sys/stat.h>", "<sys/file.h>", "<errno.h>", "<signal.h>", "<pthread.h>", "icLog/logging.h", "propsMgr/paths.h", "xhCron/crontab.h", "icTypes/icStringHashMap.h", "icConfig/storage.h", "icBuildtime.h"], "external_methods": ["getDynamicConfigPath()", "storageGetKeys()", "storageLoad()", "storageSave()", "storageDelete()", "stringHashMapCreate()", "stringHashMapPut()", "stringHashMapIteratorCreate()", "stringHashMapIteratorHasNext()", "stringHashMapIteratorGetNext()", "stringHashMapIteratorDestroy()", "stringHashMapDestroy()", "linkedListIteratorCreate()", "linkedListIteratorHasNext()", "linkedListIteratorGetNext()", "linkedListIteratorDestroy()", "linkedListDestroy()", "icLogError()", "icLogWarn()"], "published": ["addOrUpdatePreformattedCrontabEntry", "removeCrontabEntry", "hasCrontabEntry"], "classes": [], "methods": [{"name": "char * getCronRootLockFilePath()", "description": "Constructs and returns the full path to the cron root lock file, initializing it lazily.", "scope": "", "scopeKind": ""}, {"name": "char * getCronRootFilePath()", "description": "Constructs and returns the full path to the cron root file, initializing it lazily.", "scope": "", "scopeKind": ""}, {"name": "char * getCronUpdateFilePath()", "description": "Constructs and returns the path to the cron update file, initializing it lazily.", "scope": "", "scopeKind": ""}, {"name": "void createCronUpdateFile()", "description": "Creates or updates the cron update file, depending on platform. On Linux, it invokes 'crontab' with the current crontab file.", "scope": "", "scopeKind": ""}, {"name": "icStringHashMap * parseFromStorage()", "description": "Parses crontab entries stored in generic storage into an internal hash map.", "scope": "", "scopeKind": ""}, {"name": "int saveCrontab(icStringHashMap * crontabEntries)", "description": "Writes the current crontab entries from the hash map to the crontab file and triggers a cron update.", "scope": "", "scopeKind": ""}, {"name": "int getFileLock()", "description": "Attempts to acquire a file lock using a lock file with retries, installs a signal handler for cleanup on segmentation faults.", "scope": "", "scopeKind": ""}, {"name": "void releaseFileLock()", "description": "Releases the lock file, unlocks the file descriptor, and cleans up the lock file.", "scope": "", "scopeKind": ""}, {"name": "void releaseFileLockOnSig(int nSignum)", "description": "Signal handler to release the lock file and re-raise the signal.", "scope": "", "scopeKind": ""}, {"name": "int addOrUpdatePreformattedCrontabEntry(const char * entryLine,const char * entryName)", "description": "Adds or updates a crontab entry by storing it and rewriting the crontab file.", "scope": "", "scopeKind": ""}, {"name": "int removeCrontabEntry(const char * entryName)", "description": "Removes a crontab entry from storage and updates the crontab file accordingly.", "scope": "", "scopeKind": ""}, {"name": "int hasCrontabEntry(const char * entryLine,const char * entryName)", "description": "Checks if a particular crontab entry exists and matches the provided line.", "scope": "", "scopeKind": ""}], "calls": ["getDynamicConfigPath()", "storageGetKeys()", "storageLoad()", "storageSave()", "storageDelete()", "stringHashMapCreate()", "stringHashMapPut()", "stringHashMapIteratorCreate()", "stringHashMapIteratorHasNext()", "stringHashMapIteratorGetNext()", "stringHashMapIteratorDestroy()", "stringHashMapDestroy()", "linkedListIteratorCreate()", "linkedListIteratorHasNext()", "linkedListIteratorGetNext()", "linkedListIteratorDestroy()", "icLogError()", "icLogWarn()"], "search-terms": ["crontab", "cron management", "crontab file", "crontab storage", "file locking", "crontab entries", "crontab update", "Linux crontab", "cron system call", "crontab lock file"], "state": 2, "file_id": 620, "knowledge_revision": 13791, "git_revision": "", "ctags": [{"_type": "tag", "name": "CRON_ROOT_FILEPATH", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^#define CRON_ROOT_FILEPATH /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "CRON_ROOT_LOCK_FILEPATH", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^#define CRON_ROOT_LOCK_FILEPATH /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "CRON_UPDATE_FILEPATH", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^#define CRON_UPDATE_FILEPATH /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "LOCK_FILE_RETRIES", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^#define LOCK_FILE_RETRIES /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "LOG_TAG", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^#define LOG_TAG /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "NANOS_IN_ONE_MILLI", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^#define NANOS_IN_ONE_MILLI /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "PATH_BUFFER", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^#define PATH_BUFFER /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "STORAGE_NAMESPACE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^#define STORAGE_NAMESPACE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "VERSION_STRING", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^#define VERSION_STRING /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "addOrUpdatePreformattedCrontabEntry", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^int addOrUpdatePreformattedCrontabEntry(const char *entryLine, const char *entryName)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(const char * entryLine,const char * entryName)"}, {"_type": "tag", "name": "createCronUpdateFile", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^static void createCronUpdateFile()$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "cronRootFilePath", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^static char cronRootFilePath[PATH_BUFFER] = \"\";$/", "file": true, "language": "C", "typeref": "typename:char[]", "kind": "variable"}, {"_type": "tag", "name": "cronRootLockFilePath", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^static char cronRootLockFilePath[PATH_BUFFER] = \"\";$/", "file": true, "language": "C", "typeref": "typename:char[]", "kind": "variable"}, {"_type": "tag", "name": "cronUpdateFilePath", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^static char cronUpdateFilePath[PATH_BUFFER] = \"\";$/", "file": true, "language": "C", "typeref": "typename:char[]", "kind": "variable"}, {"_type": "tag", "name": "fileMTX", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^static pthread_mutex_t fileMTX = PTHREAD_MUTEX_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "getCronRootFilePath", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^static char* getCronRootFilePath()$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getCronRootLockFilePath", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^static char* getCronRootLockFilePath()$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getCronUpdateFilePath", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^static char* getCronUpdateFilePath()$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getFileLock", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^static int getFileLock()$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "handlerInstalled", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^static bool handlerInstalled = false;$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "variable"}, {"_type": "tag", "name": "hasCrontabEntry", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^int hasCrontabEntry(const char *entryLine, const char *entryName)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(const char * entryLine,const char * entryName)"}, {"_type": "tag", "name": "lockFileFD", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^static int lockFileFD = -1;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "originalAction", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^struct sigaction originalAction;$/", "language": "C", "typeref": "struct:sigaction", "kind": "variable"}, {"_type": "tag", "name": "parseFromStorage", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^static icStringHashMap *parseFromStorage()$/", "file": true, "language": "C", "typeref": "typename:icStringHashMap *", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "releaseFileLock", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^static void releaseFileLock()$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "releaseFileLockOnSig", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^static void releaseFileLockOnSig(int nSignum)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(int nSignum)"}, {"_type": "tag", "name": "removeCrontabEntry", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^int removeCrontabEntry(const char *entryName)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(const char * entryName)"}, {"_type": "tag", "name": "sa", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^struct sigaction sa;$/", "language": "C", "typeref": "struct:sigaction", "kind": "variable"}, {"_type": "tag", "name": "saveCrontab", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "pattern": "/^static int saveCrontab(icStringHashMap *crontabEntries)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(icStringHashMap * crontabEntries)"}], "hash": "ea852dfed9297b7eae6216b765897db3", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "components/opensource/zilker-sdk/source/libs/cron/c/src/crontab.c", "fields": [{"name": "char[] cronRootFilePath", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char[] cronRootLockFilePath", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char[] cronUpdateFilePath", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_mutex_t fileMTX", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool handlerInstalled", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int lockFileFD", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "struct:sigaction originalAction", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "struct:sigaction sa", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"13791": ""}]}