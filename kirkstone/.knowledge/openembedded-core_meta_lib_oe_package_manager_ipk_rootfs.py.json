{"is_source_file": true, "format": "Python", "description": "This source file defines classes for managing root filesystem images using the ipk package manager within the OpenEmbedded build system. It includes functionality for parsing package statuses, handling dependencies, performing sanity tests, managing post-install scripts, and building the root filesystem for embedded Linux images.", "external_files": ["oe.rootfs", "oe.manifest", "oe.utils", "oe.package_manager.ipk.manifest", "oe.package_manager.ipk"], "external_methods": ["execute_pre_post_process", "bb.utils.contains", "bb.utils.mkdirhier", "bb.utils.remove", "bb.utils.remove", "bb.note", "bb.fatal", "bb.utils", "self.d.getVar", "self.d.expand"], "published": ["PkgRootfs", "DpkgOpkgRootfs"], "classes": [{"name": "DpkgOpkgRootfs", "description": "A class extending Rootfs to handle Debian-style package post-install dependencies and other package management tasks."}, {"name": "PkgRootfs", "description": "A class extending DpkgOpkgRootfs for managing IPK root filesystem images, including dependency resolution, image creation, and incremental build support within the Yocto Project/OpenEmbedded framework."}], "methods": [{"name": "_get_pkgs_postinsts(self, status_file)", "description": "Parses package status files to extract package dependencies for unpacked packages.", "scope": "DpkgOpkgRootfs", "scopeKind": "class"}, {"name": "_get_delayed_postinsts_common(self, status_file)", "description": "Resolves package dependencies for delayed post-install scripts, detecting circular dependencies.", "scope": "DpkgOpkgRootfs", "scopeKind": "class"}, {"name": "_save_postinsts_common(self, dst_postinst_dir, src_postinst_dir)", "description": "Copies post-install scripts to the build output directory, excluding features based on build configuration.", "scope": "DpkgOpkgRootfs", "scopeKind": "class"}, {"name": "_file_equal(self, key, f1, f2)", "description": "Compares two files to determine if they are identical, used to detect duplicated files from different packages.", "scope": "PkgRootfs", "scopeKind": "class"}, {"name": "_multilib_sanity_test(self, dirs)", "description": "Performs sanity checks on multiple library variants to ensure file compatibility and detect duplicate files.", "scope": "PkgRootfs", "scopeKind": "class"}, {"name": "_multilib_test_install(self, pkgs)", "description": "Performs a sanity check installation for multilib packages across different variants.", "scope": "PkgRootfs", "scopeKind": "class"}, {"name": "_remove_extra_packages(self, pkgs_initial_install)", "description": "Removes packages that are no longer needed by comparing current and previous full manifests when incremental image generation is enabled.", "scope": "PkgRootfs", "scopeKind": "class"}, {"name": "_remove_old_rootfs(self)", "description": "Determines whether to remove the existing root filesystem based on changes in configuration variables for incremental builds.", "scope": "PkgRootfs", "scopeKind": "class"}, {"name": "_create(self)", "description": "Main method to create the root filesystem image, handling package installation, dependency management, and post-processing.", "scope": "PkgRootfs", "scopeKind": "class"}, {"name": "_depends_list()", "description": "Returns a list of build variables that influence dependency resolution.", "scope": "PkgRootfs", "scopeKind": "class"}, {"name": "_get_delayed_postinsts(self)", "description": "Retrieves delayed post-install scripts to execute after package installation.", "scope": "PkgRootfs", "scopeKind": "class"}, {"name": "_save_postinsts(self)", "description": "Saves post-install scripts to the output directory.", "scope": "PkgRootfs", "scopeKind": "class"}, {"name": "_log_check(self)", "description": "Performs logging checks on the built root filesystem.", "scope": "PkgRootfs", "scopeKind": "class"}, {"name": "_cleanup(self)", "description": "Performs cleanup tasks, such as removing temporary lists from the package manager.", "scope": "PkgRootfs", "scopeKind": "class"}, {"name": "__init__(self, d, manifest_dir, progress_reporter=None, logcatcher=None)", "scope": "PkgRootfs", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, d, progress_reporter=None, logcatcher=None)", "scope": "DpkgOpkgRootfs", "scopeKind": "class", "description": "unavailable"}, {"name": "_dep_resolve(graph, node, resolved, seen)", "scope": "DpkgOpkgRootfs._get_delayed_postinsts_common", "scopeKind": "member", "description": "unavailable"}, {"name": "_get_pkg_depends_list(pkg_depends)", "scope": "DpkgOpkgRootfs._get_pkgs_postinsts", "scopeKind": "member", "description": "unavailable"}], "calls": ["re.match", "open", "data.split", "shutil.copy", "os.path.exists", "os.path.join", "filecmp.cmp", "bb.utils.contains", "bb.utils.mkdirhier", "bb.utils.remove", "bb.note", "bb.fatal", "self.pm.update", "self.pm.install", "self.pm.remove", "self.pm.backup_packaging_data"], "search-terms": ["DpkgOpkgRootfs", "PkgRootfs", "postinsts", "package dependencies", "full manifest", "multilib sanity test", "incremental image"], "state": 2, "file_id": 1797, "knowledge_revision": 14940, "git_revision": "", "ctags": [{"_type": "tag", "name": "DpkgOpkgRootfs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "pattern": "/^class DpkgOpkgRootfs(Rootfs):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PkgRootfs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "pattern": "/^class PkgRootfs(DpkgOpkgRootfs):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "pattern": "/^    def __init__(self, d, manifest_dir, progress_reporter=None, logcatcher=None):$/", "language": "Python", "kind": "member", "signature": "(self, d, manifest_dir, progress_reporter=None, logcatcher=None)", "scope": "PkgRootfs", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "pattern": "/^    def __init__(self, d, progress_reporter=None, logcatcher=None):$/", "language": "Python", "kind": "member", "signature": "(self, d, progress_reporter=None, logcatcher=None)", "scope": "DpkgOpkgRootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_cleanup", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "pattern": "/^    def _cleanup(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PkgRootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_create", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "pattern": "/^    def _create(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PkgRootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_dep_resolve", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "pattern": "/^        def _dep_resolve(graph, node, resolved, seen):$/", "file": true, "language": "Python", "kind": "function", "signature": "(graph, node, resolved, seen)", "scope": "DpkgOpkgRootfs._get_delayed_postinsts_common", "scopeKind": "member"}, {"_type": "tag", "name": "_depends_list", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "pattern": "/^    def _depends_list():$/", "language": "Python", "kind": "member", "signature": "()", "scope": "PkgRootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_file_equal", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "pattern": "/^    def _file_equal(self, key, f1, f2):$/", "language": "Python", "kind": "member", "signature": "(self, key, f1, f2)", "scope": "PkgRootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_get_delayed_postinsts", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "pattern": "/^    def _get_delayed_postinsts(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PkgRootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_get_delayed_postinsts_common", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "pattern": "/^    def _get_delayed_postinsts_common(self, status_file):$/", "language": "Python", "kind": "member", "signature": "(self, status_file)", "scope": "DpkgOpkgRootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_get_pkg_depends_list", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "pattern": "/^        def _get_pkg_depends_list(pkg_depends):$/", "file": true, "language": "Python", "kind": "function", "signature": "(pkg_depends)", "scope": "DpkgOpkgRootfs._get_pkgs_postinsts", "scopeKind": "member"}, {"_type": "tag", "name": "_get_pkgs_postinsts", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "pattern": "/^    def _get_pkgs_postinsts(self, status_file):$/", "language": "Python", "kind": "member", "signature": "(self, status_file)", "scope": "DpkgOpkgRootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_log_check", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "pattern": "/^    def _log_check(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PkgRootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_multilib_sanity_test", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "pattern": "/^    def _multilib_sanity_test(self, dirs):$/", "language": "Python", "kind": "member", "signature": "(self, dirs)", "scope": "PkgRootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_multilib_test_install", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "pattern": "/^    def _multilib_test_install(self, pkgs):$/", "language": "Python", "kind": "member", "signature": "(self, pkgs)", "scope": "PkgRootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_remove_extra_packages", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "pattern": "/^    def _remove_extra_packages(self, pkgs_initial_install):$/", "language": "Python", "kind": "member", "signature": "(self, pkgs_initial_install)", "scope": "PkgRootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_remove_old_rootfs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "pattern": "/^    def _remove_old_rootfs(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PkgRootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_save_postinsts", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "pattern": "/^    def _save_postinsts(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PkgRootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_save_postinsts_common", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "pattern": "/^    def _save_postinsts_common(self, dst_postinst_dir, src_postinst_dir):$/", "language": "Python", "kind": "member", "signature": "(self, dst_postinst_dir, src_postinst_dir)", "scope": "DpkgOpkgRootfs", "scopeKind": "class"}], "hash": "b189c98c14c2d71cc59884846f96e007", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "openembedded-core/meta/lib/oe/package_manager/ipk/rootfs.py", "revision_history": [{"14940": ""}]}