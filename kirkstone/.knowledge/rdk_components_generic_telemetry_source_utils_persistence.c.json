{"is_source_file": true, "format": "C language", "description": "This source file manages persistence and caching of configuration data and reports in a telemetry system. It includes functions to read, write, save, clear, and manage configuration files and cached report data on disk, with thread safety mechanisms.", "external_files": ["persistence.h", "t2log_wrapper.h", "telemetry2_0.h"], "external_methods": ["Vector_PushBack", "Vector_Size", "Vector_At"], "published": ["fetchLocalConfigs", "saveConfigToFile", "MsgPackSaveConfig", "clearPersistenceFolder", "removeProfileFromDisk", "saveCachedReportToPersistenceFolder", "populateCachedReportList"], "classes": [], "methods": [{"name": "void persistReportMethodInit()", "description": "Initializes the report persistence mutex once for thread safety.", "scope": "", "scopeKind": ""}, {"name": "T2ERROR fetchLocalConfigs(const char * path,Vector * configList)", "description": "Reads configuration files from a specified directory into a list.", "scope": "", "scopeKind": ""}, {"name": "T2ERROR saveConfigToFile(const char * path,const char * profileName,const char * configuration)", "description": "Saves configuration data to a file within a specified directory.", "scope": "", "scopeKind": ""}, {"name": "T2ERROR MsgPackSaveConfig(const char * path,const char * fileName,const char * msgpack_blob,size_t blob_size)", "description": "Saves a MsgPack binary blob into a file within a specified directory.", "scope": "", "scopeKind": ""}, {"name": "void clearPersistenceFolder(const char * path)", "description": "Removes all files in a specified persistence folder.", "scope": "", "scopeKind": ""}, {"name": "void removeProfileFromDisk(const char * path,const char * fileName)", "description": "Deletes a specific profile file from disk.", "scope": "", "scopeKind": ""}, {"name": "T2ERROR saveCachedReportToPersistenceFolder(const char * profileName,Vector * reportList)", "description": "Stores cached reports in a file within a thread-safe manner.", "scope": "", "scopeKind": ""}, {"name": "T2ERROR populateCachedReportList(const char * profileName,Vector * outReportList)", "description": "Loads cached reports from disk into a list and deletes the cache file afterward.", "scope": "", "scopeKind": ""}], "calls": ["pthread_mutex_init", "mkdir", "opendir", "closedir", "readdir", "open", "fstat", "read", "close", "fclose", "fprintf", "system", "v_secure_system", "snprintf", "unlink", "remove", "fwrite", "getline"], "search-terms": ["persistence", "configuration files", "cached reports", "thread safety", "file management", "report cache", "telemetry data"], "state": 2, "file_id": 12849, "knowledge_revision": 25749, "git_revision": "", "ctags": [{"_type": "tag", "name": "MAX_FILENAME_LENGTH", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/utils/persistence.c", "pattern": "/^#define MAX_FILENAME_LENGTH /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "MsgPackSaveConfig", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/utils/persistence.c", "pattern": "/^T2ERROR MsgPackSaveConfig(const char* path, const char *fileName, const char *msgpack_blob, size/", "language": "C", "typeref": "typename:T2ERROR", "kind": "function", "signature": "(const char * path,const char * fileName,const char * msgpack_blob,size_t blob_size)"}, {"_type": "tag", "name": "clearPersistenceFolder", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/utils/persistence.c", "pattern": "/^void clearPersistenceFolder(const char* path)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(const char * path)"}, {"_type": "tag", "name": "fetchLocalConfigs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/utils/persistence.c", "pattern": "/^T2ERROR fetchLocalConfigs(const char* path, Vector *configList)$/", "language": "C", "typeref": "typename:T2ERROR", "kind": "function", "signature": "(const char * path,Vector * configList)"}, {"_type": "tag", "name": "persistCachedReportMutex", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/utils/persistence.c", "pattern": "/^static pthread_mutex_t persistCachedReportMutex;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "persistCahedReporMutexOnce", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/utils/persistence.c", "pattern": "/^static pthread_once_t persistCahedReporMutexOnce = PTHREAD_ONCE_INIT;$/", "file": true, "language": "C", "typeref": "typename:pthread_once_t", "kind": "variable"}, {"_type": "tag", "name": "persistReportMethodInit", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/utils/persistence.c", "pattern": "/^static void persistReportMethodInit( ) {$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "populateCachedReportList", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/utils/persistence.c", "pattern": "/^T2ERROR populateCachedReportList(const char *profileName, Vector *outReportList)$/", "language": "C", "typeref": "typename:T2ERROR", "kind": "function", "signature": "(const char * profileName,Vector * outReportList)"}, {"_type": "tag", "name": "removeProfileFromDisk", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/utils/persistence.c", "pattern": "/^void removeProfileFromDisk(const char* path, const char* fileName)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(const char * path,const char * fileName)"}, {"_type": "tag", "name": "saveCachedReportToPersistenceFolder", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/utils/persistence.c", "pattern": "/^T2ERROR saveCachedReportToPersistenceFolder(const char *profileName, Vector *reportList)$/", "language": "C", "typeref": "typename:T2ERROR", "kind": "function", "signature": "(const char * profileName,Vector * reportList)"}, {"_type": "tag", "name": "saveConfigToFile", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/utils/persistence.c", "pattern": "/^T2ERROR saveConfigToFile(const char* path, const char *profileName, const char* configuration)$/", "language": "C", "typeref": "typename:T2ERROR", "kind": "function", "signature": "(const char * path,const char * profileName,const char * configuration)"}], "hash": "0996f7ccb05d02c66ba39bb8b1f3f7bb", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdk/components/generic/telemetry/source/utils/persistence.c", "fields": [{"name": "pthread_mutex_t persistCachedReportMutex", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_once_t persistCahedReporMutexOnce", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"25749": ""}]}