{"is_source_file": true, "format": "Shell script", "description": "This is a shell script used to manage the SSH daemon (sshd) on a device. It includes functions to start and stop sshd, generate host keys if missing, and handle various service-related events such as status changes and restarts.", "external_files": ["/etc/utopia/service.d/ulog_functions.sh", "/etc/utopia/service.d/pmon.sh", "/etc/sshd.conf", "/etc/ssh/ssh_host_dsa_key", "/etc/ssh/ssh_host_rsa_key"], "external_methods": ["pidof", "syscfg get mgmt_wan_access", "syscfg get mgmt_wan_sshaccess", "sysevent get lan-status", "sysevent get wan-status", "sysevent get bridge-status", "sysevent set ssh_daemon_state", "sysevent set ${SERVICE_NAME}-errinfo", "sysevent set ${SERVICE_NAME}-status", "sysevent set ${SERVICE_NAME}-errinfo", "sysevent set ${SERVICE_NAME}-status", "ulog", "pidof -o", "kill"], "published": ["sshd", "sshd-restart"], "classes": [], "methods": [{"name": "do_start", "description": "Starts the sshd service, creates necessary directories, generates host keys if they do not exist, and starts the daemon."}, {"name": "do_stop", "description": "Stops the sshd service by killing the sshd process."}, {"name": "service_start", "description": "Logs and initiates the SSH service start process."}, {"name": "service_stop", "description": "Logs and initiates the SSH service stop process."}, {"name": "service_lanwan_status", "description": "Starts or stops the SSH service based on LAN/WAN status events."}, {"name": "service_bridge_status", "description": "Starts or stops the SSH service based on bridge status events."}], "calls": ["pidof sshd", "pidof sshd", "mkdir -p", "chown", "chgrp", "chmod", "ssh-keygen", "sysevent set ssh_daemon_state", "syscfg get mgmt_wan_access", "syscfg get mgmt_wan_sshaccess", "$PMON setproc", "$PMON unsetproc", "sysevent get lan-status", "sysevent get wan-status", "sysevent get bridge-status", "sysevent set ${SERVICE_NAME}-errinfo", "sysevent set ${SERVICE_NAME}-status", "echo"], "search-terms": ["ssh daemon startup script", "shell script SSH management", "service handling sshd", "sshd configuration", "ssh key generation"], "state": 2, "file_id": 7593, "knowledge_revision": 20664, "git_revision": "", "hash": "9ca6bf4ac11eda1006e93f9efa63f4bc", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/Utopia/source/scripts/init/service.d/service_sshd/service_opensshd.sh", "revision_history": [{"20664": ""}]}