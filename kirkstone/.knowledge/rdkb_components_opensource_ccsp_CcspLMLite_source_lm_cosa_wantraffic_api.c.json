{"is_source_file": true, "format": "C", "description": "This file contains implementation of backend APIs related to WAN traffic monitoring, including initialization, event handling, syscfg interactions, Rbus subscription/publication, thread management, and data structure handling for tracking and reporting WAN traffic statistics based on DSCP values.", "external_files": ["rbus.h", "ansc_platform.h", "ccsp_lmliteLog_wrapper.h", "syscfg/syscfg.h", "safec_lib_common.h", "cosa_wantraffic_api.h", "lm_util.h", "ccsp_base_api.h", "ssp_internal.h", "cosa_wantraffic_utils.h", "wtc_rbus_apis.h"], "external_methods": ["rbusEvent_Publish", "rbusEvent_Subscribe", "rbusEvent_Unsubscribe", "rbusError_ToString", "rbusObject_GetValue", "rbusObject_Init", "rbusObject_SetValue", "rbusValue_SetString", "rbusValue_SetUInt32", "rbusValue_Init", "rbusValue_Release", "rbusObject_Release", "rbusEvent_t", "rbusObject_t", "rbusValue_t", "platform_hal_setDscp", "platform_hal_resetDscpCounts", "platform_hal_getDscpClientList"], "published": ["WTC_EventPublish", "WTC_SetConfig", "WTC_GetConfig", "WTC_Init", "WTC_EventHandler", "WTC_ApplyStateChange", "WTC_GetCount"], "classes": [], "methods": [{"name": "VOID WTC_Init(VOID)", "description": "Initializes the WAN Traffic Count tracking structure, sets up RBUS subscriptions, and starts the traffic monitoring thread.", "scope": "", "scopeKind": ""}, {"name": "VOID WTC_EventHandler(rbusHandle_t handle,rbusEvent_t const * event,rbusEventSubscription_t * subscription)", "description": "Handles RBUS events for LAN and WAN mode changes, triggers state updates accordingly.", "scope": "", "scopeKind": ""}, {"name": "VOID WTC_ApplyStateChange(VOID)", "description": "Fetches configuration flags and manages thread states for WAN traffic monitoring based on configuration changes.", "scope": "", "scopeKind": ""}, {"name": "VOID WTC_GetCount(CHAR * pValue,ULONG * pUlSize,BOOL countPerInterval,pstWanTrafficCountInfo_t WAN_Traffic)", "description": "Retrieves and formats WAN traffic data (DSCP, Mac, Rx/Tx counts) for reporting.", "scope": "", "scopeKind": ""}, {"name": "rbusError_t WTC_EventPublish(eWTCEvent_t wtcEvent,CHAR * data,INT index)", "description": "Publishes WAN traffic statistics events over RBUS.", "scope": "", "scopeKind": ""}, {"name": "RETURN_STATUS WTC_SetConfig(CHAR * param,CHAR * value,WAN_INTERFACE ethWanMode)", "description": "Sets configuration parameters in syscfg for a specific WAN interface.", "scope": "", "scopeKind": ""}, {"name": "RETURN_STATUS WTC_GetConfig(CHAR * param,CHAR * value,ULONG valueLen,WAN_INTERFACE ethWanMode)", "description": "Retrieves configuration parameters from syscfg for a specific WAN interface.", "scope": "", "scopeKind": ""}, {"name": "VOID WTC_RbusUnsubscribe(UINT index)", "description": "Unsubscribes from RBUS events for LAN and WAN modes.", "scope": "", "scopeKind": ""}, {"name": "RETURN_STATUS WTC_RbusSubscribe(UINT index)", "description": "Subscribes to RBUS events for LAN and WAN modes, managing reference counts.", "scope": "", "scopeKind": ""}, {"name": "RETURN_STATUS WTC_SendTrafficCountRbus(UINT index)", "description": "Sends traffic count data over RBUS events.", "scope": "", "scopeKind": ""}, {"name": "VOID WTC_DeInit(UINT index,BOOL doUnSubscribe)", "description": "De-initializes traffic monitoring for a WAN interface, optionally unsubscribing from RBUS.", "scope": "", "scopeKind": ""}, {"name": "pstDSCPInfo_t PrintDscpTree(CHAR * pValue,ULONG * pUlSize,UINT * offset,BOOL countPerInterval,pstDSCPInfo_t DscpTree)", "description": "Recursively prints DSCP tree data structure into a string buffer.", "scope": "", "scopeKind": ""}, {"name": "VOID * WTC_Thread()", "description": "Main worker thread that polls traffic data, updates data structures, and manages state transitions.", "scope": "", "scopeKind": ""}, {"name": "VOID WTC_CreateThread(VOID)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "VOID WTC_SetThreadState(UINT index,eWTCThreadState_t newState)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "VOID WTC_SetThreadStatus(UINT index,eWTCThreadStatus_t newStatus)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "CHAR * WTC_ThreadStateToStr(eWTCThreadState_t threadState)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "CHAR * WTC_ThreadStatusToStr(eWTCThreadStatus_t threadStatus)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["rbusEvent_Publish", "rbusEvent_Subscribe", "rbusEvent_Unsubscribe", "rbusObject_GetValue", "rbusObject_Init", "rbusValue_SetString", "rbusValue_SetUInt32", "platform_hal_setDscp", "platform_hal_resetDscpCounts", "platform_hal_getDscpClientList", "WTC_GetConfig", "WTC_SetConfig", "WTC_RbusSubscribe", "WTC_RbusUnsubscribe", "WTC_EventPublish", "WTC_DeInit", "PrintDscpTree", "WTC_Thread"], "search-terms": ["WAN traffic", "DSCP", "RBUS", "traffic counts", "thread management", "syscfg", "monitoring", "WTC", "CosaWanTraffic"], "state": 2, "file_id": 7183, "knowledge_revision": 20264, "git_revision": "", "ctags": [{"_type": "tag", "name": "AllValidDscp", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^CHAR *AllValidDscp = \"32, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9,10,11,12,13,14,\"$/", "language": "C", "typeref": "typename:CHAR *", "kind": "variable"}, {"_type": "tag", "name": "CliList", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^DSCP_list_t  CliList;$/", "language": "C", "typeref": "typename:DSCP_list_t", "kind": "variable"}, {"_type": "tag", "name": "PrintDscpTree", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^static pstDSCPInfo_t PrintDscpTree$/", "file": true, "language": "C", "typeref": "typename:pstDSCPInfo_t", "kind": "function", "signature": "(CHAR * pValue,ULONG * pUlSize,UINT * offset,BOOL countPerInterval,pstDSCPInfo_t DscpTree)"}, {"_type": "tag", "name": "WTC_ApplyStateChange", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^VOID WTC_ApplyStateChange$/", "language": "C", "typeref": "typename:VOID", "kind": "function", "signature": "(VOID)"}, {"_type": "tag", "name": "WTC_CreateThread", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^static VOID WTC_CreateThread$/", "file": true, "language": "C", "typeref": "typename:VOID", "kind": "function", "signature": "(VOID)"}, {"_type": "tag", "name": "WTC_DeInit", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^static VOID WTC_DeInit$/", "file": true, "language": "C", "typeref": "typename:VOID", "kind": "function", "signature": "(UINT index,BOOL doUnSubscribe)"}, {"_type": "tag", "name": "WTC_EventHandler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^static VOID WTC_EventHandler$/", "file": true, "language": "C", "typeref": "typename:VOID", "kind": "function", "signature": "(rbusHandle_t handle,rbusEvent_t const * event,rbusEventSubscription_t * subscription)"}, {"_type": "tag", "name": "WTC_EventPublish", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^rbusError_t WTC_EventPublish$/", "language": "C", "typeref": "typename:rbusError_t", "kind": "function", "signature": "(eWTCEvent_t wtcEvent,CHAR * data,INT index)"}, {"_type": "tag", "name": "WTC_GetConfig", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^RETURN_STATUS WTC_GetConfig$/", "language": "C", "typeref": "typename:RETURN_STATUS", "kind": "function", "signature": "(CHAR * param,CHAR * value,ULONG valueLen,WAN_INTERFACE ethWanMode)"}, {"_type": "tag", "name": "WTC_GetCount", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^VOID WTC_GetCount$/", "language": "C", "typeref": "typename:VOID", "kind": "function", "signature": "(CHAR * pValue,ULONG * pUlSize,BOOL countPerInterval,pstWanTrafficCountInfo_t WAN_Traffic)"}, {"_type": "tag", "name": "WTC_Init", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^VOID WTC_Init$/", "language": "C", "typeref": "typename:VOID", "kind": "function", "signature": "(VOID)"}, {"_type": "tag", "name": "WTC_RbusSubscribe", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^static RETURN_STATUS WTC_RbusSubscribe$/", "file": true, "language": "C", "typeref": "typename:RETURN_STATUS", "kind": "function", "signature": "(UINT index)"}, {"_type": "tag", "name": "WTC_RbusUnsubscribe", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^static VOID WTC_RbusUnsubscribe$/", "file": true, "language": "C", "typeref": "typename:VOID", "kind": "function", "signature": "(UINT index)"}, {"_type": "tag", "name": "WTC_SendTrafficCountRbus", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^static RETURN_STATUS WTC_SendTrafficCountRbus$/", "file": true, "language": "C", "typeref": "typename:RETURN_STATUS", "kind": "function", "signature": "(UINT index)"}, {"_type": "tag", "name": "WTC_SetConfig", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^RETURN_STATUS WTC_SetConfig$/", "language": "C", "typeref": "typename:RETURN_STATUS", "kind": "function", "signature": "(CHAR * param,CHAR * value,WAN_INTERFACE ethWanMode)"}, {"_type": "tag", "name": "WTC_SetThreadState", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^static inline VOID WTC_SetThreadState$/", "file": true, "language": "C", "typeref": "typename:VOID", "kind": "function", "signature": "(UINT index,eWTCThreadState_t newState)"}, {"_type": "tag", "name": "WTC_SetThreadStatus", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^static inline VOID WTC_SetThreadStatus$/", "file": true, "language": "C", "typeref": "typename:VOID", "kind": "function", "signature": "(UINT index,eWTCThreadStatus_t newStatus)"}, {"_type": "tag", "name": "WTC_Thread", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^static VOID* WTC_Thread()$/", "file": true, "language": "C", "typeref": "typename:VOID *", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "WTC_ThreadStateToStr", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^static inline CHAR* WTC_ThreadStateToStr$/", "file": true, "language": "C", "typeref": "typename:CHAR *", "kind": "function", "signature": "(eWTCThreadState_t threadState)"}, {"_type": "tag", "name": "WTC_ThreadStatusToStr", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^static inline CHAR* WTC_ThreadStatusToStr$/", "file": true, "language": "C", "typeref": "typename:CHAR *", "kind": "function", "signature": "(eWTCThreadStatus_t threadStatus)"}, {"_type": "tag", "name": "WTCinfo", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^pstWTCInfo_t WTCinfo;$/", "language": "C", "typeref": "typename:pstWTCInfo_t", "kind": "variable"}, {"_type": "tag", "name": "WanTrafficCountInfo_t", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^pstWanTrafficCountInfo_t WanTrafficCountInfo_t[SUPPORTED_WAN_MODES];$/", "language": "C", "typeref": "typename:pstWanTrafficCountInfo_t[]", "kind": "variable"}, {"_type": "tag", "name": "gPrintBuf", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^static CHAR gPrintBuf[BUFLEN_20480] = {0};$/", "file": true, "language": "C", "typeref": "typename:CHAR[]", "kind": "variable"}, {"_type": "tag", "name": "wanMode", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "pattern": "/^static CHAR wanMode[SUPPORTED_WAN_MODES][BUFLEN_4] = { \"DCS\",  \\/*   Docsis      *\\/$/", "file": true, "language": "C", "typeref": "typename:CHAR[][]", "kind": "variable"}], "hash": "907d45c7777c4f76a647bf768f6aa2f3", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/CcspLMLite/source/lm/cosa_wantraffic_api.c", "fields": [{"name": "CHAR * AllValidDscp", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DSCP_list_t CliList", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pstWTCInfo_t WTCinfo", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pstWanTrafficCountInfo_t[] WanTrafficCountInfo_t", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "CHAR[] gPrintBuf", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "CHAR[][] wanMode", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"20264": ""}]}