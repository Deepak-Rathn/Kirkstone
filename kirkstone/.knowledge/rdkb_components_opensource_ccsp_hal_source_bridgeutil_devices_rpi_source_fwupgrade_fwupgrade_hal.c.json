{"is_source_file": true, "format": "C", "description": "This file implements firmware upgrade functionalities for a device, including setting download URLs, initiating downloads, checking download status, rebooting, and handling firmware update workflows. It interacts with system commands, network resolutions, and file I/O to manage firmware updates over HTTP/HTTPS.", "external_files": ["fwupgrade_hal.h", "lib/rdk/rpi_image_Flasher.sh"], "external_methods": ["fwupgrade_hal_get_download_url", "fwupgrade_hal_util_get_syscmd_output"], "published": ["fwupgrade_hal_set_download_url", "fwupgrade_hal_get_download_url", "fwupgrade_hal_set_download_interface", "fwupgrade_hal_get_download_interface", "fwupgrade_hal_download", "fwupgrade_hal_get_download_status", "fwupgrade_hal_reboot_ready", "fwupgrade_hal_download_reboot_now", "fwupgrade_hal_update_and_factoryreset", "fwupgrade_hal_download_install"], "classes": [], "methods": [{"name": "INT fwupgrade_hal_util_get_syscmd_output(char * pCmd,char * pOutput,int iOutputSize)", "description": "Executes a system command and captures its first line of output into a buffer.", "scope": "", "scopeKind": ""}, {"name": "INT download_image_from_server(char * httpUrl,char * fileName)", "description": "Downloads a firmware image from an HTTP URL to a specific directory.", "scope": "", "scopeKind": ""}, {"name": "INT fwupgrade_hal_set_download_url(char * pUrl,char * pfilename)", "description": "Stores the firmware download URL and filename in configuration files, and removes previous download status if changed.", "scope": "", "scopeKind": ""}, {"name": "INT fwupgrade_hal_get_download_url(char * pUrl,char * pfilename)", "description": "Retrieves the stored download URL and filename from configuration files.", "scope": "", "scopeKind": ""}, {"name": "INT fwupgrade_hal_set_download_interface(unsigned int interface)", "description": "Sets the network interface (wan0 or erouter0) for downloading in a config file.", "scope": "", "scopeKind": ""}, {"name": "INT fwupgrade_hal_get_download_interface(unsigned int * pinterface)", "description": "Retrieves the network interface for downloading from a config file.", "scope": "", "scopeKind": ""}, {"name": "INT fwupgrade_hal_download()", "description": "Performs the firmware download process: resolving hostnames to IP, download via curl, and executing a flash script.", "scope": "", "scopeKind": ""}, {"name": "INT fwupgrade_hal_get_download_status()", "description": "Checks the status of the ongoing or completed firmware download.", "scope": "", "scopeKind": ""}, {"name": "INT fwupgrade_hal_reboot_ready(ULONG * pValue)", "description": "Indicates whether the device is ready to reboot after updating firmware.", "scope": "", "scopeKind": ""}, {"name": "INT fwupgrade_hal_download_reboot_now()", "description": "Sets reboot reason, performs logs backup, and initiates device reboot.", "scope": "", "scopeKind": ""}, {"name": "INT fwupgrade_hal_update_and_factoryreset()", "description": "Runs the download and then reboots to complete firmware update.", "scope": "", "scopeKind": ""}, {"name": "INT fwupgrade_hal_download_install(const char * url)", "description": "Stub for installing firmware from a URL, currently returns success.", "scope": "", "scopeKind": ""}], "calls": ["popen", "fgets", "fclose", "snprintf", "system", "gethostbyname", "inet_ntoa", "atoi", "strcmp", "strstr", "strlen"], "search-terms": ["fwupgrade_hal", "download_url", "reboot", "firmware", "http", "image download", "reboot reason", "fwupdate", "device upgrade"], "state": 2, "file_id": 7012, "knowledge_revision": 20097, "git_revision": "", "ctags": [{"_type": "tag", "name": "HTTP_DWNLD_CONFIG_FILE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^#define HTTP_DWNLD_CONFIG_FILE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "HTTP_DWNLD_IF_FILE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^#define HTTP_DWNLD_IF_FILE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "REBOOT_REASON_SW_UPGRADE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^#define REBOOT_REASON_SW_UPGRADE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "download_image_from_server", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^static INT download_image_from_server(char *httpUrl, char* fileName)$/", "file": true, "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "(char * httpUrl,char * fileName)"}, {"_type": "tag", "name": "fwupgrade_hal_download", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^INT fwupgrade_hal_download ()$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fwupgrade_hal_download_install", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^INT fwupgrade_hal_download_install(const char *url)$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "(const char * url)"}, {"_type": "tag", "name": "fwupgrade_hal_download_reboot_now", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^INT fwupgrade_hal_download_reboot_now()$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fwupgrade_hal_get_download_interface", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^INT fwupgrade_hal_get_download_interface(unsigned int* pinterface)$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "(unsigned int * pinterface)"}, {"_type": "tag", "name": "fwupgrade_hal_get_download_status", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^INT fwupgrade_hal_get_download_status()$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fwupgrade_hal_get_download_url", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^INT fwupgrade_hal_get_download_url (char *pUrl, char* pfilename)$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "(char * pUrl,char * pfilename)"}, {"_type": "tag", "name": "fwupgrade_hal_reboot_ready", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^INT fwupgrade_hal_reboot_ready(ULONG *pValue)$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "(ULONG * pValue)"}, {"_type": "tag", "name": "fwupgrade_hal_set_download_interface", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^INT fwupgrade_hal_set_download_interface(unsigned int interface)$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "(unsigned int interface)"}, {"_type": "tag", "name": "fwupgrade_hal_set_download_url", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^INT fwupgrade_hal_set_download_url (char* pUrl, char* pfilename)$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "(char * pUrl,char * pfilename)"}, {"_type": "tag", "name": "fwupgrade_hal_update_and_factoryreset", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^INT fwupgrade_hal_update_and_factoryreset()$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fwupgrade_hal_util_get_syscmd_output", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^static INT fwupgrade_hal_util_get_syscmd_output( char *pCmd, char *pOutput, int iOutputSize )$/", "file": true, "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "(char * pCmd,char * pOutput,int iOutputSize)"}, {"_type": "tag", "name": "gDwdInProgressFlag", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/fwupgrade/fwupgrade_hal.c", "pattern": "/^static int gDwdInProgressFlag = 0; \\/* flag to set dload inprogress *\\/$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "variable"}], "hash": "55fbc943c009ccb480f13d36021b02eb", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/fwupgrade/fwupgrade_hal.c", "fields": [{"name": "int gDwdInProgressFlag", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"20097": ""}]}