{"is_source_file": true, "format": "C", "description": "This file implements back-end APIs for managing system time configurations, including NTP settings, timezone, local and UTC time retrieval, and related journal handling functions. It contains platform-specific code for different environments such as simulation, ARM, and MIPS architectures, and interacts with external system files, services, and configuration storage.", "external_files": ["cosa_time_apis.h", "cjson/cJSON.h", "secure_wrapper.h", "safec_lib_common.h", "/nvram/partners_defaults.json", "/nvram/bootstrap.json", "utctx/utctx.h", "utctx/utctx_api.h", "utapi.h", "utapi_util.h", "cosa_drg_common.h", "platform_hal.h"], "external_methods": ["AnscCopyMemory", "AnscTraceWarning", "v_secure_system", "commonSyseventGet", "Utopia_Init", "Utopia_Set_DeviceTime_LocalTZ", "Utopia_RawSet", "Utopia_Get_DeviceTime_LocalTZ", "Utopia_Get_DeviceTime_NTPServer", "Utopia_Get_DeviceTime_DaylightEnable", "Utopia_Get_DeviceTime_DaylightOffset", "Utopia_Get_DeviceTime_Enable", "Utopia_Free", "platform_hal_getTimeOffSet"], "published": ["CosaDmlTimeInit", "CosaDmlTimeSetCfg", "CosaDmlTimeGetCfg", "CosaDmlTimeGetState", "CosaDmlTimeGetLocalTime", "CosaDmlTimeGetUTCTime"], "classes": [], "methods": [{"name": "ANSC_STATUS CosaNTPInitJournal(PCOSA_DML_TIME_CFG pTimeCfg)", "description": "Initializes the NTP journal configuration by reading partner-specific settings from JSON files and updating system configuration accordingly.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaDmlTimeInit(ANSC_HANDLE hDml,PANSC_HANDLE phContext)", "description": "Initializes the time configuration, typically fetching current system settings.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaDmlTimeSetCfg(ANSC_HANDLE hContext,PCOSA_DML_TIME_CFG pTimeCfg)", "description": "Sets the time configuration including timezone, NTP servers, daylight saving, and enables/disables time sync, often updating system storage and optionally restarting NTP services.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaDmlTimeGetCfg(ANSC_HANDLE hContext,PCOSA_DML_TIME_CFG pTimeCfg)", "description": "Retrieves current time configuration from system storage into the provided configuration structure.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaDmlTimeGetState(ANSC_HANDLE hContext,PCOSA_DML_TIME_STATUS pStatus,PANSC_UNIVERSAL_TIME pCurrLocalTime)", "description": "Gets the current synchronization status of system time.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaDmlTimeGetLocalTime(ANSC_HANDLE hContext,char * pCurrLocalTime)", "description": "Retrieves the current local time as a formatted string.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaDmlTimeGetUTCTime(ANSC_HANDLE hContext,char * pCurrUTCTime)", "description": "Retrieves the current UTC time as a formatted string.", "scope": "", "scopeKind": ""}, {"name": "ANSC_STATUS CosaDmlTimeGetTimeOffset(ANSC_HANDLE hContext,char * pTimeOffset)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void FillParamUpdateSourceNTP(cJSON * partnerObj,char * key,char * paramUpdateSource)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void FillPartnerIDNTPJournal(cJSON * json,char * partnerID,PCOSA_DML_TIME_CFG pTimeCfg)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int checkIfUTCEnabled(const char * fname)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ANSC_STATUS getTimeOffset(char * name,char ** timeOffset,int version)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int hexToInt(char s[])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "BOOL isTimeSynced()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void * startNTP(void * arg)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ANSC_STATUS updateTimeZone(const char * timezone)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["AnscCopyMemory", "AnscTraceWarning", "v_secure_system", "commonSyseventGet", "Utopia_Init", "Utopia_Set_DeviceTime_LocalTZ", "Utopia_RawSet", "Utopia_Get_DeviceTime_LocalTZ", "Utopia_Get_DeviceTime_NTPServer", "Utopia_Get_DeviceTime_DaylightEnable", "Utopia_Get_DeviceTime_DaylightOffset", "Utopia_Get_DeviceTime_Enable", "Utopia_Free", "platform_hal_getTimeOffSet"], "search-terms": ["CosaDmlTime", "NTPServer", "TimeZone", "getTimeOffset", "TimeSync", "LocalTime", "UTCTime", "bootstrap.json", "partners_defaults.json", "ntpclient.conf"], "state": 2, "file_id": 8512, "knowledge_revision": 21545, "git_revision": "", "ctags": [{"_type": "tag", "name": "BOOTSTRAP_INFO_FILE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^#define BOOTSTRAP_INFO_FILE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "CosaDmlTimeGetCfg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^CosaDmlTimeGetCfg$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hContext,PCOSA_DML_TIME_CFG pTimeCfg)"}, {"_type": "tag", "name": "CosaDmlTimeGetLocalTime", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^CosaDmlTimeGetLocalTime$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hContext,char * pCurrLocalTime)"}, {"_type": "tag", "name": "CosaDmlTimeGetState", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^CosaDmlTimeGetState$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hContext,PCOSA_DML_TIME_STATUS pStatus,PANSC_UNIVERSAL_TIME pCurrLocalTime)"}, {"_type": "tag", "name": "CosaDmlTimeGetTimeOffset", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^CosaDmlTimeGetTimeOffset$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hContext,char * pTimeOffset)"}, {"_type": "tag", "name": "CosaDmlTimeGetUTCTime", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^CosaDmlTimeGetUTCTime$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hContext,char * pCurrUTCTime)"}, {"_type": "tag", "name": "CosaDmlTimeInit", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^CosaDmlTimeInit$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hDml,PANSC_HANDLE phContext)"}, {"_type": "tag", "name": "CosaDmlTimeSetCfg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^CosaDmlTimeSetCfg$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(ANSC_HANDLE hContext,PCOSA_DML_TIME_CFG pTimeCfg)"}, {"_type": "tag", "name": "CosaNTPInitJournal", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^CosaNTPInitJournal$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(PCOSA_DML_TIME_CFG pTimeCfg)"}, {"_type": "tag", "name": "DEF_NTPSERVER1", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^#define DEF_NTPSERVER1 /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "DEF_NTPSERVER2", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^#define DEF_NTPSERVER2 /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "DEF_TIMEZONE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^#define DEF_TIMEZONE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "FillParamUpdateSourceNTP", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^void FillParamUpdateSourceNTP(cJSON *partnerObj, char *key, char *paramUpdateSource)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(cJSON * partnerObj,char * key,char * paramUpdateSource)"}, {"_type": "tag", "name": "FillPartnerIDNTPJournal", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^void FillPartnerIDNTPJournal$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(cJSON * json,char * partnerID,PCOSA_DML_TIME_CFG pTimeCfg)"}, {"_type": "tag", "name": "INVALID_TIME_OFFSET_VAL", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^#define INVALID_TIME_OFFSET_VAL /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "MAXBUF", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^#define MAXBUF /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "MAX_COSATIMEOFFSET_SIZE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^#define MAX_COSATIMEOFFSET_SIZE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "NELEMS", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^#define NELEMS(/", "file": true, "language": "C", "kind": "macro", "signature": "(arr)"}, {"_type": "tag", "name": "NTPC_CONF", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^#define NTPC_CONF /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "NTPC_STARSTATUS", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^#define NTPC_STARSTATUS /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "NTPC_STATUS", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^#define NTPC_STATUS /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "NTPPAR_ENABLE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^#define     NTPPAR_ENABLE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "NTPPAR_NTPSERVER1", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^#define     NTPPAR_NTPSERVER1 /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "NTPPAR_NTPSERVER2", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^#define     NTPPAR_NTPSERVER2 /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "NTPPAR_TIMEZONE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^#define     NTPPAR_TIMEZONE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "PARTNERS_INFO_FILE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^#define PARTNERS_INFO_FILE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "PARTNER_ID_LEN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^#define PARTNER_ID_LEN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "UTOPIA_TR181_PARAM_SIZE1", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^#define UTOPIA_TR181_PARAM_SIZE1 /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "VALUE_ALREADY_IN_DECIMAL", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^#define VALUE_ALREADY_IN_DECIMAL /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "checkIfUTCEnabled", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^int checkIfUTCEnabled(const char *fname)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(const char * fname)"}, {"_type": "tag", "name": "g_TimeCfg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^COSA_DML_TIME_CFG                   g_TimeCfg = {0};$/", "language": "C", "typeref": "typename:COSA_DML_TIME_CFG", "kind": "variable"}, {"_type": "tag", "name": "getTimeOffset", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^ANSC_STATUS getTimeOffset(char *name, char **timeOffset, int version)$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(char * name,char ** timeOffset,int version)"}, {"_type": "tag", "name": "hexToInt", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^static int hexToInt(char s[])$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char s[])"}, {"_type": "tag", "name": "isTimeSynced", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^BOOL isTimeSynced()$/", "language": "C", "typeref": "typename:BOOL", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "startNTP", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^void* startNTP(void* arg)$/", "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "(void * arg)"}, {"_type": "tag", "name": "timesyncConfFile", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^const char timesyncConfFile[] = \"\\/tmp\\/systemd-timesyncd.conf\";$/", "language": "C", "typeref": "typename:const char[]", "kind": "variable"}, {"_type": "tag", "name": "updateTimeZone", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^ANSC_STATUS updateTimeZone(const char *timezone)$/", "language": "C", "typeref": "typename:ANSC_STATUS", "kind": "function", "signature": "(const char * timezone)"}, {"_type": "tag", "name": "updateTimesyncConf", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "pattern": "/^const char updateTimesyncConf[] = \"\\/usr\\/ccsp\\/updateTimesyncdConf.sh\";$/", "language": "C", "typeref": "typename:const char[]", "kind": "variable"}], "hash": "d3973cc2068d4617d6b57d459db2e0b9", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/CcspPandM/source-arm/TR-181/board_sbapi/cosa_time_apis.c", "fields": [{"name": "COSA_DML_TIME_CFG g_TimeCfg", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "const char[] timesyncConfFile", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "const char[] updateTimesyncConf", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"21545": ""}]}