{"is_source_file": true, "format": "C", "description": "This file, 'channelManager.c', is a C source file responsible for managing communication channels within a SDK. It includes initialization, shutdown, status querying, event broadcasting, and configuration management functions for various communication channels such as TCP, UDP, HTTPS, and MQTT. It centralizes control over the lifecycle and statuses of these channels, providing methods for status reporting, event broadcasting, and dynamic channel handling.", "external_files": ["icBuildtime.h", "icLog/logging.h", "icSystem/hardwareCapabilities.h", "icSystem/runtimeAttributes.h", "icIpc/eventIdSequence.h", "icConcurrent/timedWait.h", "icConcurrent/delayedTask.h", "icSystem/softwareCapabilities.h", "icTypes/icHashMap.h", "icUtil/stringUtils.h", "commMgr/commService_eventAdapter.h", "propsMgr/propsService_event.h", "propsMgr/propsService_eventAdapter.h", "propsMgr/propsHelper.h", "channelManager.h", "channel.h", "commServiceEventBroadcaster.h", "commServiceCommon.h", "sample/sampleChannel.h"], "external_methods": ["scheduleDelayTask", "cancelDelayTask", "hashMapCreate", "hashMapPut", "hashMapGet", "hashMapDestroy", "hashMapIteratorCreate", "hashMapIteratorHasNext", "hashMapIteratorGetNext", "hashMapIteratorDestroy", "createSampleChannel", "create_commOnlineChangedEvent", "destroy_commOnlineChangedEvent", "setEventId", "setEventTimeToNow", "broadcastCommOnlineChangedEvent", "linkedListCreate", "linkedListAppend", "isoLogWarn", "isoLogDebug", "isoLogInfo"], "published": ["initChannelManager", "shutdownChannelManager", "inChannelStartupWindow", "getChannelById", "channelIsAnythingOnline", "channelGetOnlineDetailedStatus", "channelSendCommOnlineChangedEvent", "getChannelRuntimeStatusIPC", "collectChannelMessageStatisticsIPC", "channelConfigurationRestoredIPC", "destroyChannelTestResult", "channelPerformConnectionTests", "channelConfigurationResetToDefaultsIPC", "channelGetSunriseSunsetTimeIPC", "channelSendMessageToSubscriberIPC", "channelGetCloudAssociationStateIPC", "channelStartManualCloudAssociationIPC", "channelGetHostnameConfigurationListIPC", "channelSetHostnameConfigurationListIPC"], "classes": [], "methods": [{"name": "void initChannelManager()", "description": "Performs one-time initialization of the channel manager, creating the channel hash map, starting the startup window timer, and creating initial sample channel.", "scope": "", "scopeKind": ""}, {"name": "void shutdownChannelManager()", "description": "Cleans up resources by stopping timers, shutting down channels, and destroying the hash map.", "scope": "", "scopeKind": ""}, {"name": "bool inChannelStartupWindow()", "description": "Returns whether the system is still within the startup window period.", "scope": "", "scopeKind": ""}, {"name": "channel * getChannelById(uint8_t channelId)", "description": "Retrieves a channel object by its unique identifier.", "scope": "", "scopeKind": ""}, {"name": "bool channelIsAnythingOnline()", "description": "Checks if any known channel is currently connected/online.", "scope": "", "scopeKind": ""}, {"name": "void channelGetOnlineDetailedStatus(commChannelStatusList * output)", "description": "Populates the provided list with detailed online status info for each channel.", "scope": "", "scopeKind": ""}, {"name": "void channelSendCommOnlineChangedEvent()", "description": "Creates and broadcasts a 'communication online status' event based on current channel states.", "scope": "", "scopeKind": ""}, {"name": "void getChannelRuntimeStatusIPC(serviceStatusPojo * output)", "description": "Collects runtime status info from all enabled channels into an output POJO.", "scope": "", "scopeKind": ""}, {"name": "void collectChannelMessageStatisticsIPC(runtimeStatsPojo * container,bool thenClear)", "description": "Gathers message statistics from channels and optionally clears counters.", "scope": "", "scopeKind": ""}, {"name": "bool channelConfigurationRestoredIPC(configRestoredInput * input)", "description": "Notifies channels that configuration has been restored and returns if any channel handled it.", "scope": "", "scopeKind": ""}, {"name": "void destroyChannelTestResult(channelTestResult * testResult)", "description": "Frees memory allocated for a channel test result object.", "scope": "", "scopeKind": ""}, {"name": "icLinkedList * channelPerformConnectionTests(bool useCell,bool primaryOnly)", "description": "Performs connection tests on channels, returning a list of results for each tested channel.", "scope": "", "scopeKind": ""}, {"name": "void channelConfigurationResetToDefaultsIPC()", "description": "Instructs all channels to reset to default configurations.", "scope": "", "scopeKind": ""}, {"name": "bool channelGetSunriseSunsetTimeIPC(sunriseSunsetTimes * output)", "description": "Requests sunrise/sunset times from enabled channels.", "scope": "", "scopeKind": ""}, {"name": "bool channelSendMessageToSubscriberIPC(ruleSendMessage * input)", "description": "Instructs channels to send messages to subscribers.", "scope": "", "scopeKind": ""}, {"name": "bool channelGetCloudAssociationStateIPC(cloudAssociationValue * output)", "description": "Queries channels for their cloud association state.", "scope": "", "scopeKind": ""}, {"name": "bool channelStartManualCloudAssociationIPC(cloudAssociationParms * input,cloudAssociationResponse * output)", "description": "Requests channels to manually initiate cloud association.", "scope": "", "scopeKind": ""}, {"name": "bool channelGetHostnameConfigurationListIPC(commHostConfigList * output)", "description": "Requests the list of hostname configurations from channels.", "scope": "", "scopeKind": ""}, {"name": "bool channelSetHostnameConfigurationListIPC(commHostConfigList * input)", "description": "Sets hostname configurations in channels.", "scope": "", "scopeKind": ""}, {"name": "void startupWindowCallback(void * arg)", "description": "Callback function invoked when startup window timer expires; updates state and broadcasts initial status.", "scope": "", "scopeKind": ""}], "calls": ["scheduleDelayTask", "cancelDelayTask", "hashMapCreate", "hashMapPut", "hashMapGet", "hashMapDestroy", "hashMapIteratorCreate", "hashMapIteratorHasNext", "hashMapIteratorGetNext", "hashMapIteratorDestroy", "createSampleChannel", "create_commOnlineChangedEvent", "destroy_commOnlineChangedEvent", "setEventId", "setEventTimeToNow", "broadcastCommOnlineChangedEvent"], "search-terms": ["channelManager", "communication channels", "channel lifecycle", "status monitoring", "event broadcasting", "channel hash map", "startup window", "connection testing", "cloud association", "hostname configuration"], "state": 2, "file_id": 1138, "knowledge_revision": 14295, "git_revision": "", "ctags": [{"_type": "tag", "name": "CHANNEL_MAP_KEYLEN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^#define CHANNEL_MAP_KEYLEN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "STARTUP_WINDOW_MTX", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^static pthread_mutex_t STARTUP_WINDOW_MTX  = PTHREAD_MUTEX_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "channelConfigurationResetToDefaultsIPC", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^void channelConfigurationResetToDefaultsIPC()$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "channelConfigurationRestoredIPC", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^bool channelConfigurationRestoredIPC(configRestoredInput *input)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(configRestoredInput * input)"}, {"_type": "tag", "name": "channelGetCloudAssociationStateIPC", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^bool channelGetCloudAssociationStateIPC(cloudAssociationValue *output)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(cloudAssociationValue * output)"}, {"_type": "tag", "name": "channelGetHostnameConfigurationListIPC", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^bool channelGetHostnameConfigurationListIPC(commHostConfigList *output)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(commHostConfigList * output)"}, {"_type": "tag", "name": "channelGetOnlineDetailedStatus", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^void channelGetOnlineDetailedStatus(commChannelStatusList *output)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(commChannelStatusList * output)"}, {"_type": "tag", "name": "channelGetSunriseSunsetTimeIPC", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^bool channelGetSunriseSunsetTimeIPC(sunriseSunsetTimes *output)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(sunriseSunsetTimes * output)"}, {"_type": "tag", "name": "channelIsAnythingOnline", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^bool channelIsAnythingOnline()$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "channelMap", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^static icHashMap *channelMap;            \\/\\/ hash of channel objects (indexed by uin84_t)$/", "file": true, "language": "C", "typeref": "typename:icHashMap *", "kind": "variable"}, {"_type": "tag", "name": "channelPerformConnectionTests", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^icLinkedList *channelPerformConnectionTests(bool useCell, bool primaryOnly)$/", "language": "C", "typeref": "typename:icLinkedList *", "kind": "function", "signature": "(bool useCell,bool primaryOnly)"}, {"_type": "tag", "name": "channelSendCommOnlineChangedEvent", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^void channelSendCommOnlineChangedEvent()$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "channelSendMessageToSubscriberIPC", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^bool channelSendMessageToSubscriberIPC(ruleSendMessage *input)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(ruleSendMessage * input)"}, {"_type": "tag", "name": "channelSetHostnameConfigurationListIPC", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^bool channelSetHostnameConfigurationListIPC(commHostConfigList *input)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(commHostConfigList * input)"}, {"_type": "tag", "name": "channelStartManualCloudAssociationIPC", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^bool channelStartManualCloudAssociationIPC(cloudAssociationParms *input, cloudAssociationRespons/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(cloudAssociationParms * input,cloudAssociationResponse * output)"}, {"_type": "tag", "name": "collectChannelMessageStatisticsIPC", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^void collectChannelMessageStatisticsIPC(runtimeStatsPojo *container, bool thenClear)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(runtimeStatsPojo * container,bool thenClear)"}, {"_type": "tag", "name": "destroyChannelTestResult", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^void destroyChannelTestResult(channelTestResult *testResult)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(channelTestResult * testResult)"}, {"_type": "tag", "name": "getChannelById", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^channel *getChannelById(uint8_t channelId)$/", "language": "C", "typeref": "typename:channel *", "kind": "function", "signature": "(uint8_t channelId)"}, {"_type": "tag", "name": "getChannelRuntimeStatusIPC", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^void getChannelRuntimeStatusIPC(serviceStatusPojo *output)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(serviceStatusPojo * output)"}, {"_type": "tag", "name": "inChannelStartupWindow", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^bool inChannelStartupWindow()$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "inStartupWindow", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^static bool      inStartupWindow = true;                \\/\\/ will remain true until our startup /", "file": true, "language": "C", "typeref": "typename:bool", "kind": "variable"}, {"_type": "tag", "name": "initChannelManager", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^void initChannelManager()$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "primaryChannelId", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^static uint8_t   primaryChannelId = SAMPLE_CHANNEL_ID;  \\/\\/ FIXME: populate with a real channel$/", "file": true, "language": "C", "typeref": "typename:uint8_t", "kind": "variable"}, {"_type": "tag", "name": "shutdownChannelManager", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^void shutdownChannelManager()$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "startupWindowCallback", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^static void startupWindowCallback(void *arg)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void * arg)"}, {"_type": "tag", "name": "startupWindowTask", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "pattern": "/^static uint32_t  startupWindowTask = 0;$/", "file": true, "language": "C", "typeref": "typename:uint32_t", "kind": "variable"}], "hash": "307f9e310089911c6390bee91dccd5a6", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "components/opensource/zilker-sdk/source/services/comm/core/src/channelManager.c", "fields": [{"name": "pthread_mutex_t STARTUP_WINDOW_MTX", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "icHashMap * channelMap", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool inStartupWindow", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "uint8_t primaryChannelId", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "uint32_t startupWindowTask", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"14295": ""}]}