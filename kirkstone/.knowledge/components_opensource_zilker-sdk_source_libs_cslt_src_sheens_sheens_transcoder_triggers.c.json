{"is_source_file": true, "format": "C", "description": "This file defines functions for handling various triggers and converting them into JSON-based specifications for a rule engine, including specific handlers for sensor, timing, and device triggers, along with utility functions for UUID generation and pattern building.", "external_files": ["<stdio.h>", "<string.h>", "<uuid/uuid.h>", "<icrule/icrule.h>", "<errno.h>", "<stdlib.h>", "<deviceService/deviceService_event.h>", "<icrule/icrule_time.h>", "<icUtil/stringUtils.h>", "<jsonrpc/jsonrpc.h>", "<commonDeviceDefs.h>", "js/timeFunctions.js.h", "sheens_javascript.h", "sheens_json.h", "sheens_request.h", "sheens_transcoders.h"], "external_methods": ["uuid_generate", "uuid_unparse_upper", "sheens_create_branch", "sheens_create_state_node", "sheens_create_timer_fired_object", "sheens_create_timer_emit_object", "sheens_pattern_add_constraints_required", "cJSON_CreateObject", "cJSON_AddItemToObjectCS", "cJSON_CreateString", "cJSON_CreateNumber", "cJSON_CreateBool", "cJSON_IsNull", "cJSON_Delete", "cJSON_PrintBuffered", "cJSON_AddItemToArray", "cJSON_CreateArray", "sheens_create_time_object", "stringBuilder", "stringCoalesceAlt", "bool2str", "cJSON_GetObjectItem", "linkedListCreate", "linkedListAppend", "linkedListCreate", "linkedListDestroy", "linkedListIteratorCreate", "linkedListIteratorHasNext", "linkedListIteratorGetNext", "standardDoNotFreeFunc", "auto_clean_macro"], "published": ["sheens_trigger2javascript"], "classes": [], "methods": [{"name": "char * generate_uuid()", "description": "Generates a new UUID string for use as a node name; caller is responsible for freeing the returned string.", "scope": "", "scopeKind": ""}, {"name": "cJSON * create_conditional_state_node(const char * js,const char * on_success_node,const char * on_failure_node,cJSON * success_pattern)", "description": "Creates a state node that executes JavaScript, transitioning to success or failure nodes based on pattern matching.", "scope": "", "scopeKind": ""}, {"name": "cJSON * create_save_binding_state_node(const char * key,const char * value,const char * next_node_target)", "description": "Creates a pass-through node that binds a key/value pair into the rule's execution bindings.", "scope": "", "scopeKind": ""}, {"name": "cJSON * build_device_pattern(const char * id,const char * resource,const char * value)", "description": "Constructs a JSON pattern object representing a device resource with specific value.", "scope": "", "scopeKind": ""}, {"name": "cJSON * build_trouble_pattern_no_extra(cJSON * add_to,int troubleType)", "description": "Builds a pattern object representing a trouble event with a specific trouble type.", "scope": "", "scopeKind": ""}, {"name": "cJSON * build_trouble_pattern(cJSON * add_to,int troubleType)", "description": "Builds a pattern object for trouble events with an 'extra' field.", "scope": "", "scopeKind": ""}, {"name": "bool sensor_trigger_build_state(cJSON * json,icrule_trigger_sensor_state_t state)", "description": "Builds the sensor trigger JSON pattern based on sensor state (open, closed, trouble).", "scope": "", "scopeKind": ""}, {"name": "bool sensor_trigger_build_sensortype(cJSON * json,icrule_trigger_sensor_type_t type)", "description": "Sets sensor type constraints in patterns based on the trigger type.", "scope": "", "scopeKind": ""}, {"name": "cJSON * sensor_trigger_handler(const icrule_trigger_t * trigger,const char * on_success_node,const char * on_failure_node,cJSON * nodes_object,cJSON * node_branches)", "description": "Processes a sensor trigger and generates pattern branches for the rule engine, handling trouble and sensor states.", "scope": "", "scopeKind": ""}, {"name": "cJSON * lighting_trigger_handler(const icrule_trigger_t * trigger,const char * on_success_node,const char * on_failure_node,cJSON * nodes_object,cJSON * node_branches)", "description": "Handles lighting on/off triggers, producing pattern branches.", "scope": "", "scopeKind": ""}, {"name": "cJSON * doorlock_trigger_handler(const icrule_trigger_t * trigger,const char * on_success_node,const char * on_failure_node,cJSON * nodes_object,cJSON * node_branches)", "description": "Handles door lock triggers, generating corresponding patterns for locked/unlocked states or trouble.", "scope": "", "scopeKind": ""}, {"name": "cJSON * thermostat_trigger_handler(const icrule_trigger_t * trigger,const char * on_success_node,const char * on_failure_node,cJSON * nodes_object,cJSON * node_branches)", "description": "Handles thermostat triggers, including trouble conditions and temperature bounds, creating pattern branches accordingly.", "scope": "", "scopeKind": ""}, {"name": "char * build_time_object(const icrule_time_t * time)", "description": "Creates a JSON time object from a trigger time.", "scope": "", "scopeKind": ""}, {"name": "char * build_repeat_interval(const icrule_trigger_time_t * time,const char * on_success_node,const char * on_failure_node,cJSON * nodes_object,cJSON * node_branches)", "description": "Builds JavaScript for interval timers, managing repeated trigger execution.", "scope": "", "scopeKind": ""}, {"name": "cJSON * time_trigger_handler(const icrule_trigger_t * trigger,const char * on_success_node,const char * on_failure_node,cJSON * nodes_object,cJSON * node_branches)", "description": "Processes time-based triggers, producing pattern branches for exact or interval timing.", "scope": "", "scopeKind": ""}, {"name": "cJSON * zigbee_comm_trigger_handler(const icrule_trigger_t * trigger,const char * on_success_node,const char * on_failure_node,cJSON * nodes_object,cJSON * node_branches)", "description": "Generates pattern for Zigbee communication failure triggers.", "scope": "", "scopeKind": ""}, {"name": "cJSON * sheens_trigger2javascript(const icrule_trigger_t * trigger,const char * on_success_node,const char * on_failure_node,cJSON * nodes_object,cJSON * node_branches)", "description": "Main dispatch function that converts a trigger into its JSON pattern form by selecting appropriate handler.", "scope": "", "scopeKind": ""}, {"name": "cJSON * thermostat_threshold_trigger_handler(const icrule_trigger_t * trigger,const char * on_success_node,const char * on_failure_node,cJSON * nodes_object,cJSON * node_branches)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["uuid_generate", "uuid_unparse_upper", "sheens_create_branch", "sheens_create_state_node", "sheens_create_timer_fired_object", "sheens_create_timer_emit_object", "sheens_pattern_add_constraints_required", "cJSON_CreateObject", "cJSON_AddItemToObjectCS", "cJSON_CreateString", "cJSON_CreateNumber", "cJSON_CreateBool", "cJSON_IsNull", "cJSON_Delete", "cJSON_PrintBuffered", "cJSON_AddItemToArray", "cJSON_CreateArray", "sheens_create_time_object", "stringBuilder", "stringCoalesceAlt", "bool2str", "cJSON_GetObjectItem", "linkedListCreate", "linkedListAppend", "linkedListDestroy", "linkedListIteratorCreate", "linkedListIteratorHasNext", "linkedListIteratorGetNext"], "search-terms": ["sheens_trigger2javascript", "icrule_trigger_t", "trigger_handler_t", "trigger", "shell trigger", "pattern", "device pattern", "trouble pattern", "sensor trigger", "time trigger", "door lock trigger", "thermostat trigger", "zigbee communication trigger"], "state": 2, "file_id": 820, "knowledge_revision": 13989, "git_revision": "", "ctags": [{"_type": "tag", "name": "SECURITY_ZONE_TYPE_CO", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^#define SECURITY_ZONE_TYPE_CO /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SECURITY_ZONE_TYPE_DOOR", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^#define SECURITY_ZONE_TYPE_DOOR /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SECURITY_ZONE_TYPE_GLASS_BREAK", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^#define SECURITY_ZONE_TYPE_GLASS_BREAK /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SECURITY_ZONE_TYPE_MOTION", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^#define SECURITY_ZONE_TYPE_MOTION /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SECURITY_ZONE_TYPE_SMOKE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^#define SECURITY_ZONE_TYPE_SMOKE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SECURITY_ZONE_TYPE_WATER", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^#define SECURITY_ZONE_TYPE_WATER /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SECURITY_ZONE_TYPE_WINDOW", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^#define SECURITY_ZONE_TYPE_WINDOW /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "TROUBLE_OCCURED_EVENT", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^#define TROUBLE_OCCURED_EVENT /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "TROUBLE_TYPE_DEVICE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^#define TROUBLE_TYPE_DEVICE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "UUID_SIZE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^#define UUID_SIZE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "ZONE_EVENT_FAULT_CODE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^#define ZONE_EVENT_FAULT_CODE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "ZONE_EVENT_OCC_FAULT_VALUE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^#define ZONE_EVENT_OCC_FAULT_VALUE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "ZONE_EVENT_OCC_RESTORE_VALUE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^#define ZONE_EVENT_OCC_RESTORE_VALUE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "ZONE_EVENT_RESTORE_CODE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^#define ZONE_EVENT_RESTORE_CODE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "build_device_pattern", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^static cJSON* build_device_pattern(const char* id, const char* resource, const char* value)$/", "file": true, "language": "C", "typeref": "typename:cJSON *", "kind": "function", "signature": "(const char * id,const char * resource,const char * value)"}, {"_type": "tag", "name": "build_repeat_interval", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^static char* build_repeat_interval(const icrule_trigger_time_t* time,$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "function", "signature": "(const icrule_trigger_time_t * time,const char * on_success_node,const char * on_failure_node,cJSON * nodes_object,cJSON * node_branches)"}, {"_type": "tag", "name": "build_time_object", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^static char* build_time_object(const icrule_time_t* time)$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "function", "signature": "(const icrule_time_t * time)"}, {"_type": "tag", "name": "build_trouble_pattern", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^static cJSON* build_trouble_pattern(cJSON* add_to, int troubleType)$/", "file": true, "language": "C", "typeref": "typename:cJSON *", "kind": "function", "signature": "(cJSON * add_to,int troubleType)"}, {"_type": "tag", "name": "build_trouble_pattern_no_extra", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^static cJSON* build_trouble_pattern_no_extra(cJSON *add_to, int troubleType)$/", "file": true, "language": "C", "typeref": "typename:cJSON *", "kind": "function", "signature": "(cJSON * add_to,int troubleType)"}, {"_type": "tag", "name": "create_conditional_state_node", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^static cJSON* create_conditional_state_node(const char* js, const char* on_success_node,$/", "file": true, "language": "C", "typeref": "typename:cJSON *", "kind": "function", "signature": "(const char * js,const char * on_success_node,const char * on_failure_node,cJSON * success_pattern)"}, {"_type": "tag", "name": "create_save_binding_state_node", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^static cJSON* create_save_binding_state_node(const char* key, const char* value, const char* nex/", "file": true, "language": "C", "typeref": "typename:cJSON *", "kind": "function", "signature": "(const char * key,const char * value,const char * next_node_target)"}, {"_type": "tag", "name": "device_update_event_key", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^static const char* device_update_event_key = DEVICE_RESOURCE_UPDATED_EVENT_NAME;$/", "file": true, "language": "C", "typeref": "typename:const char *", "kind": "variable"}, {"_type": "tag", "name": "doorlock_trigger_handler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^static cJSON* doorlock_trigger_handler(const icrule_trigger_t* trigger,$/", "file": true, "language": "C", "typeref": "typename:cJSON *", "kind": "function", "signature": "(const icrule_trigger_t * trigger,const char * on_success_node,const char * on_failure_node,cJSON * nodes_object,cJSON * node_branches)"}, {"_type": "tag", "name": "generate_uuid", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^static char* generate_uuid()$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "lighting_trigger_handler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^static cJSON* lighting_trigger_handler(const icrule_trigger_t* trigger,$/", "file": true, "language": "C", "typeref": "typename:cJSON *", "kind": "function", "signature": "(const icrule_trigger_t * trigger,const char * on_success_node,const char * on_failure_node,cJSON * nodes_object,cJSON * node_branches)"}, {"_type": "tag", "name": "sensor_trigger_build_sensortype", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^static bool sensor_trigger_build_sensortype(cJSON* json, icrule_trigger_sensor_type_t type)$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(cJSON * json,icrule_trigger_sensor_type_t type)"}, {"_type": "tag", "name": "sensor_trigger_build_state", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^static bool sensor_trigger_build_state(cJSON* json, icrule_trigger_sensor_state_t state)$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(cJSON * json,icrule_trigger_sensor_state_t state)"}, {"_type": "tag", "name": "sensor_trigger_handler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^static cJSON* sensor_trigger_handler(const icrule_trigger_t* trigger,$/", "file": true, "language": "C", "typeref": "typename:cJSON *", "kind": "function", "signature": "(const icrule_trigger_t * trigger,const char * on_success_node,const char * on_failure_node,cJSON * nodes_object,cJSON * node_branches)"}, {"_type": "tag", "name": "sheens_trigger2javascript", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^cJSON* sheens_trigger2javascript(const icrule_trigger_t* trigger,$/", "language": "C", "typeref": "typename:cJSON *", "kind": "function", "signature": "(const icrule_trigger_t * trigger,const char * on_success_node,const char * on_failure_node,cJSON * nodes_object,cJSON * node_branches)"}, {"_type": "tag", "name": "thermostat_threshold_trigger_handler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^static cJSON* thermostat_threshold_trigger_handler(const icrule_trigger_t* trigger,$/", "file": true, "language": "C", "typeref": "typename:cJSON *", "kind": "function", "signature": "(const icrule_trigger_t * trigger,const char * on_success_node,const char * on_failure_node,cJSON * nodes_object,cJSON * node_branches)"}, {"_type": "tag", "name": "thermostat_trigger_handler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^static cJSON* thermostat_trigger_handler(const icrule_trigger_t* trigger,$/", "file": true, "language": "C", "typeref": "typename:cJSON *", "kind": "function", "signature": "(const icrule_trigger_t * trigger,const char * on_success_node,const char * on_failure_node,cJSON * nodes_object,cJSON * node_branches)"}, {"_type": "tag", "name": "time_trigger_handler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^static cJSON* time_trigger_handler(const icrule_trigger_t* trigger,$/", "file": true, "language": "C", "typeref": "typename:cJSON *", "kind": "function", "signature": "(const icrule_trigger_t * trigger,const char * on_success_node,const char * on_failure_node,cJSON * nodes_object,cJSON * node_branches)"}, {"_type": "tag", "name": "trigger_handler_t", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^typedef cJSON* (*trigger_handler_t)(const icrule_trigger_t* trigger,$/", "file": true, "language": "C", "typeref": "typename:cJSON * (*)(const icrule_trigger_t * trigger,const char * on_success_node,const char * on_failure_node,cJSON * nodes_object,cJSON * node_branches)", "kind": "typedef"}, {"_type": "tag", "name": "trigger_handlers", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^static const trigger_handler_t trigger_handlers[] = {$/", "file": true, "language": "C", "typeref": "typename:const trigger_handler_t[]", "kind": "variable"}, {"_type": "tag", "name": "zigbee_comm_trigger_handler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "pattern": "/^static cJSON* zigbee_comm_trigger_handler(const icrule_trigger_t* trigger,$/", "file": true, "language": "C", "typeref": "typename:cJSON *", "kind": "function", "signature": "(const icrule_trigger_t * trigger,const char * on_success_node,const char * on_failure_node,cJSON * nodes_object,cJSON * node_branches)"}], "hash": "751155a9e02dbf237afed3cc0f108365", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "components/opensource/zilker-sdk/source/libs/cslt/src/sheens/sheens_transcoder_triggers.c", "fields": [{"name": "const char * device_update_event_key", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "const trigger_handler_t[] trigger_handlers", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"13989": ""}]}