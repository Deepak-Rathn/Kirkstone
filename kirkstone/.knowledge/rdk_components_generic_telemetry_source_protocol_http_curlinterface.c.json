{"is_source_file": true, "format": "C", "description": "This file contains C source code implementing HTTP communication functions using libcurl. It includes functions to configure and send HTTP requests, support for mTLS, and process report uploads, with synchronization and process forking for resource management.", "external_files": ["curlinterface.h", "reportprofiles.h", "t2MtlsUtils.h", "t2log_wrapper.h", "busInterface.h"], "external_methods": ["getParameterValue", "getMtlsCerts", "isMtlsEnabled"], "published": ["sendReportOverHTTP", "sendCachedReportsOverHTTP"], "classes": [], "methods": [{"name": "void sendOverHTTPInit()", "description": "Initializes the mutex for HTTP request synchronization.", "scope": "", "scopeKind": ""}, {"name": "size_t writeToFile(void * ptr,size_t size,size_t nmemb,void * stream)", "description": "Callback to write received data to a file stream.", "scope": "", "scopeKind": ""}, {"name": "T2ERROR setHeader(CURL * curl,const char * destURL,struct curl_slist ** headerList,childResponse * childCurlResponse)", "description": "Configures cURL headers and options for the HTTP request.", "scope": "", "scopeKind": ""}, {"name": "T2ERROR setMtlsHeaders(CURL * curl,const char * certFile,const char * pPasswd,childResponse * childCurlResponse)", "description": "Sets up mutual TLS headers for secure communication.", "scope": "", "scopeKind": ""}, {"name": "T2ERROR setPayload(CURL * curl,const char * payload,childResponse * childCurlResponse)", "description": "Prepares the request payload for POST requests.", "scope": "", "scopeKind": ""}, {"name": "T2ERROR sendReportOverHTTP(char * httpUrl,char * payload,pid_t * outForkedPid)", "description": "Main function to send a report via HTTP, handles threading and process management.", "scope": "", "scopeKind": ""}, {"name": "T2ERROR sendCachedReportsOverHTTP(char * httpUrl,Vector * reportList)", "description": "Sends a batch of cached reports over HTTP by iteratively calling sendReportOverHTTP.", "scope": "", "scopeKind": ""}], "calls": ["curl_easy_setopt", "curl_easy_perform", "curl_easy_cleanup", "curl_slist_append", "curl_slist_free_all", "curl_easy_getinfo", "fwrite", "fclose", "fopen", "pipe", "fork", "waitpid", "close", "read", "write"], "search-terms": ["curlinterface", "HTTP report", "mTLS", "curl configuration", "report sending", "thread safety", "forked HTTP requests", "sync mutex"], "state": 2, "file_id": 12899, "knowledge_revision": 25794, "git_revision": "", "ctags": [{"_type": "tag", "name": "ADDRESS_TYPE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^}ADDRESS_TYPE;$/", "file": true, "language": "C", "typeref": "enum:_ADDRESS_TYPE", "kind": "typedef"}, {"_type": "tag", "name": "ADDR_IPV4", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^    ADDR_IPV4,$/", "file": true, "language": "C", "kind": "enumerator", "scope": "_ADDRESS_TYPE", "scopeKind": "enum"}, {"_type": "tag", "name": "ADDR_IPV6", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^    ADDR_IPV6$/", "file": true, "language": "C", "kind": "enumerator", "scope": "_ADDRESS_TYPE", "scopeKind": "enum"}, {"_type": "tag", "name": "ADDR_UNKNOWN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^    ADDR_UNKNOWN,$/", "file": true, "language": "C", "kind": "enumerator", "scope": "_ADDRESS_TYPE", "scopeKind": "enum"}, {"_type": "tag", "name": "_ADDRESS_TYPE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^typedef enum _ADDRESS_TYPE$/", "file": true, "language": "C", "kind": "enum"}, {"_type": "tag", "name": "__anon22d554fd0108", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^{$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "childResponse", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^} childResponse ;$/", "file": true, "language": "C", "typeref": "struct:__anon22d554fd0108", "kind": "typedef"}, {"_type": "tag", "name": "curlFileMutex", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^static pthread_mutex_t curlFileMutex;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "curlFileMutexOnce", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^static pthread_once_t curlFileMutexOnce = PTHREAD_ONCE_INIT;$/", "file": true, "language": "C", "typeref": "typename:pthread_once_t", "kind": "variable"}, {"_type": "tag", "name": "curlResponse", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^    CURLcode curlResponse;$/", "file": true, "language": "C", "typeref": "typename:CURLcode", "kind": "member", "scope": "__anon22d554fd0108", "scopeKind": "struct"}, {"_type": "tag", "name": "curlSetopCode", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^    CURLcode curlSetopCode;$/", "file": true, "language": "C", "typeref": "typename:CURLcode", "kind": "member", "scope": "__anon22d554fd0108", "scopeKind": "struct"}, {"_type": "tag", "name": "curlStatus", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^    bool curlStatus;$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "member", "scope": "__anon22d554fd0108", "scopeKind": "struct"}, {"_type": "tag", "name": "http_code", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^    long http_code;$/", "file": true, "language": "C", "typeref": "typename:long", "kind": "member", "scope": "__anon22d554fd0108", "scopeKind": "struct"}, {"_type": "tag", "name": "lineNumber", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^    int lineNumber;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "member", "scope": "__anon22d554fd0108", "scopeKind": "struct"}, {"_type": "tag", "name": "sendCachedReportsOverHTTP", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^T2ERROR sendCachedReportsOverHTTP(char *httpUrl, Vector *reportList)$/", "language": "C", "typeref": "typename:T2ERROR", "kind": "function", "signature": "(char * httpUrl,Vector * reportList)"}, {"_type": "tag", "name": "sendOverHTTPInit", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^static void sendOverHTTPInit(){$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "sendReportOverHTTP", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^T2ERROR sendReportOverHTTP(char *httpUrl, char *payload, pid_t* outForkedPid) {$/", "language": "C", "typeref": "typename:T2ERROR", "kind": "function", "signature": "(char * httpUrl,char * payload,pid_t * outForkedPid)"}, {"_type": "tag", "name": "setHeader", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^static T2ERROR setHeader(CURL *curl, const char* destURL, struct curl_slist **headerList,childRe/", "file": true, "language": "C", "typeref": "typename:T2ERROR", "kind": "function", "signature": "(CURL * curl,const char * destURL,struct curl_slist ** headerList,childResponse * childCurlResponse)"}, {"_type": "tag", "name": "setMtlsHeaders", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^static T2ERROR setMtlsHeaders(CURL *curl, const char* certFile, const char* pPasswd, childRespon/", "file": true, "language": "C", "typeref": "typename:T2ERROR", "kind": "function", "signature": "(CURL * curl,const char * certFile,const char * pPasswd,childResponse * childCurlResponse)"}, {"_type": "tag", "name": "setPayload", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^static T2ERROR setPayload(CURL *curl, const char* payload, childResponse *childCurlResponse)$/", "file": true, "language": "C", "typeref": "typename:T2ERROR", "kind": "function", "signature": "(CURL * curl,const char * payload,childResponse * childCurlResponse)"}, {"_type": "tag", "name": "waninterface", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^   static char waninterface[256];$/", "file": true, "language": "C", "typeref": "typename:char[256]", "kind": "variable"}, {"_type": "tag", "name": "writeToFile", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "pattern": "/^static size_t writeToFile(void *ptr, size_t size, size_t nmemb, void *stream) {$/", "file": true, "language": "C", "typeref": "typename:size_t", "kind": "function", "signature": "(void * ptr,size_t size,size_t nmemb,void * stream)"}], "hash": "c58544fcd9049c7584a1707af2e5a911", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdk/components/generic/telemetry/source/protocol/http/curlinterface.c", "fields": [{"name": "pthread_mutex_t curlFileMutex", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_once_t curlFileMutexOnce", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "CURLcode curlResponse", "scope": "__anon22d554fd0108", "scopeKind": "struct", "description": "unavailable"}, {"name": "CURLcode curlSetopCode", "scope": "__anon22d554fd0108", "scopeKind": "struct", "description": "unavailable"}, {"name": "bool curlStatus", "scope": "__anon22d554fd0108", "scopeKind": "struct", "description": "unavailable"}, {"name": "long http_code", "scope": "__anon22d554fd0108", "scopeKind": "struct", "description": "unavailable"}, {"name": "int lineNumber", "scope": "__anon22d554fd0108", "scopeKind": "struct", "description": "unavailable"}, {"name": "char[256] waninterface", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"25794": ""}]}