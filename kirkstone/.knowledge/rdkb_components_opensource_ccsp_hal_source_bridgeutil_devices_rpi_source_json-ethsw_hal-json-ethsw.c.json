{"is_source_file": true, "format": "C", "description": "This source file appears to implement a daemon or service that monitors Ethernet link status on a Raspberry Pi device. It includes thread management for polling interface status, handles event subscriptions via RPC, and publishes Ethernet link status changes relevant to the system. The code interacts with hardware through system calls and exposes a server API for clients to subscribe to Ethernet events.", "external_files": ["json_hal_server.h", "json_rpc_common.h", "ccsp_hal_ethsw.h"], "external_methods": ["json_hal_server_publish_event", "json_hal_server_init", "json_hal_server_register_action_callback", "json_hal_server_run", "json_hal_add_result_status", "json_hal_get_subscribe_event_request", "json_hal_server_terminate"], "published": ["subscribeEvent", "ETH_LINK_EVENT"], "classes": [], "methods": [{"name": "void * ethsw_thread_main(void * context)", "description": "Thread function that monitors the Ethernet link status by polling system commands and publishes events accordingly.", "scope": "", "scopeKind": ""}, {"name": "void GWP_RegisterEthWan_Callback(appCallBack * obj)", "description": "Registers callback functions for Ethernet WAN link status changes.", "scope": "", "scopeKind": ""}, {"name": "void sig_handler(int signo)", "description": "Handles termination signals to clean up and shut down the server.", "scope": "", "scopeKind": ""}, {"name": "int GWP_EthWanLinkDown_callback()", "description": "Callback invoked when Ethernet link goes down, publishes an event.", "scope": "", "scopeKind": ""}, {"name": "int GWP_EthWanLinkUp_callback()", "description": "Callback invoked when Ethernet link comes up, publishes an event.", "scope": "", "scopeKind": ""}, {"name": "int subs_event_cb(const json_object * jmsg,int param_count,json_object * jreply)", "description": "RPC callback that handles subscription requests for Ethernet events, initializes the monitoring thread if not already started.", "scope": "", "scopeKind": ""}, {"name": "int main(int argc,char ** argv)", "description": "Main function initializing the server, registering RPC methods, and starting threads for Ethernet link monitoring.", "scope": "", "scopeKind": ""}], "calls": ["json_hal_server_publish_event", "json_hal_server_init", "json_hal_server_register_action_callback", "json_hal_server_run", "json_hal_add_result_status", "json_hal_get_subscribe_event_request", "json_hal_server_terminate"], "search-terms": ["Ethernet link status", "ethsw_thread_main", "json_rpc", "subscribeEvent", "eth agent initialized", "Link detected", "ethwan callbacks"], "state": 2, "file_id": 7022, "knowledge_revision": 20106, "git_revision": "", "ctags": [{"_type": "tag", "name": "CcspHalEthSwTrace", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/json-ethsw/hal-json-ethsw.c", "pattern": "/^#define  CcspHalEthSwTrace(/", "file": true, "language": "C", "kind": "macro", "signature": "(msg)"}, {"_type": "tag", "name": "ETH_INITIALIZE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/json-ethsw/hal-json-ethsw.c", "pattern": "/^#define  ETH_INITIALIZE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "ETH_JSON_CONF_PATH", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/json-ethsw/hal-json-ethsw.c", "pattern": "/^#define ETH_JSON_CONF_PATH /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "ETH_LINK_EVENT", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/json-ethsw/hal-json-ethsw.c", "pattern": "/^#define ETH_LINK_EVENT /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "GWP_EthWanLinkDown_callback", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/json-ethsw/hal-json-ethsw.c", "pattern": "/^static int GWP_EthWanLinkDown_callback(){$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "GWP_EthWanLinkUp_callback", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/json-ethsw/hal-json-ethsw.c", "pattern": "/^static int GWP_EthWanLinkUp_callback(){$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "GWP_RegisterEthWan_Callback", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/json-ethsw/hal-json-ethsw.c", "pattern": "/^void GWP_RegisterEthWan_Callback(appCallBack *obj)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(appCallBack * obj)"}, {"_type": "tag", "name": "LINK_DOWN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/json-ethsw/hal-json-ethsw.c", "pattern": "/^#define LINK_DOWN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "LINK_UP", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/json-ethsw/hal-json-ethsw.c", "pattern": "/^#define LINK_UP /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "LINK_VALUE_SIZE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/json-ethsw/hal-json-ethsw.c", "pattern": "/^#define  LINK_VALUE_SIZE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "ethWanCallbacks", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/json-ethsw/hal-json-ethsw.c", "pattern": "/^appCallBack ethWanCallbacks;$/", "language": "C", "typeref": "typename:appCallBack", "kind": "variable"}, {"_type": "tag", "name": "eth_event_started", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/json-ethsw/hal-json-ethsw.c", "pattern": "/^bool eth_event_started = FALSE;$/", "language": "C", "typeref": "typename:bool", "kind": "variable"}, {"_type": "tag", "name": "ethsw_thread_main", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/json-ethsw/hal-json-ethsw.c", "pattern": "/^void *ethsw_thread_main(void *context __attribute__((unused)))$/", "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "(void * context)"}, {"_type": "tag", "name": "evt_subs_index", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/json-ethsw/hal-json-ethsw.c", "pattern": "/^int evt_subs_index = -1;$/", "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "gsubs_event_list", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/json-ethsw/hal-json-ethsw.c", "pattern": "/^static hal_subscribe_event_request_t gsubs_event_list[5];$/", "file": true, "language": "C", "typeref": "typename:hal_subscribe_event_request_t[5]", "kind": "variable"}, {"_type": "tag", "name": "main", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/json-ethsw/hal-json-ethsw.c", "pattern": "/^int main(int argc, char **argv)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(int argc,char ** argv)"}, {"_type": "tag", "name": "schemaPath", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/json-ethsw/hal-json-ethsw.c", "pattern": "/^char schemaPath[256] = {'\\\\0'};$/", "language": "C", "typeref": "typename:char[256]", "kind": "variable"}, {"_type": "tag", "name": "sig_handler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/json-ethsw/hal-json-ethsw.c", "pattern": "/^static void sig_handler(int signo)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(int signo)"}, {"_type": "tag", "name": "subs_event_cb", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/json-ethsw/hal-json-ethsw.c", "pattern": "/^static int subs_event_cb(const json_object *jmsg, int param_count, json_object *jreply)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(const json_object * jmsg,int param_count,json_object * jreply)"}], "hash": "80b93cbb6729bcaeab0a828829f53b17", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/hal/source/bridgeutil/devices_rpi/source/json-ethsw/hal-json-ethsw.c", "fields": [{"name": "appCallBack ethWanCallbacks", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool eth_event_started", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int evt_subs_index", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "hal_subscribe_event_request_t[5] gsubs_event_list", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char[256] schemaPath", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"20106": ""}]}