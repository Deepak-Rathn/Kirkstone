{"is_source_file": true, "format": "Python", "description": "This is a Python source file implementing classes and functions related to RPM package management, including indexer, package listing, installation, removal, configuration, and extraction functionalities within a Yocto/OpenEmbedded build environment.", "external_files": ["oe.package_manager", "bb.utils", "oe.path", "bb.fatal", "bb.error", "bb.note", "bb.utils", "os", "subprocess", "collections", "tempfile", "os.getcwd"], "external_methods": ["get_signer", "create_index", "bb.fatal", "bb.note", "bb.utils.which", "os.environ", "bb.utils.remove", "os.path.join", "bb.utils.mkdirhier", "oe.path.join", "oe.path", "collections.OrderedDict", "subprocess.check_output", "shutil.copytree", "shutil.copy2", "os.path.exists", "os.path.isdir", "os.path.isfile", "os.chdir", "bb.utils.lockfile", "bb.utils.unlockfile", "bb.error"], "published": ["RpmIndexer", "RpmSubdirIndexer", "PkpksList", "RpmPM"], "classes": [{"name": "RpmIndexer", "description": "Indexer class for RPM repositories, capable of writing package indices and signing them if configured."}, {"name": "RpmSubdirIndexer", "description": "Subdirectory RPM indexer inheriting from RpmIndexer, generating indexes for entire directories including subdirectories."}, {"name": "PkpksList", "description": "List class for RPM packages, providing a method to list installed RPM packages."}, {"name": "RpmPM", "description": "Main class managing RPM package operations: install, remove, upgrade, index, configuration, and extraction within a Yocto build environment."}], "methods": [{"name": "write_index(self)", "description": "Writes the RPM package index, optionally signing the repository metadata.", "scope": "RpmSubdirIndexer", "scopeKind": "class"}, {"name": "do_write_index(self, deploy_dir)", "description": "Internal method to create or update the RPM repository index and sign it if required.", "scope": "RpmIndexer", "scopeKind": "class"}, {"name": "list_pkgs(self)", "description": "Returns a list of installed RPM packages.", "scope": "PMPkgsList", "scopeKind": "class"}, {"name": "__init__(self, d, target_rootfs, target_vendor, task_name='target', arch_var=None, os_var=None, rpm_repo_workdir=\"oe-rootfs-repo\", filterbydependencies=True, needfeed=True)", "description": "Constructor for RpmPM, initializes RPM package manager with configuration parameters.", "scope": "RpmPM", "scopeKind": "class"}, {"name": "_configure_dnf(self)", "description": "Configures DNF settings such as architectures and release version for the target root filesystem.", "scope": "RpmPM", "scopeKind": "class"}, {"name": "_configure_rpm(self)", "description": "Configures RPM to use the primary architecture and GPG settings, including key import if signing is enabled.", "scope": "RpmPM", "scopeKind": "class"}, {"name": "create_configs(self)", "description": "Creates and writes the configuration files for DNF and RPM.", "scope": "RpmPM", "scopeKind": "class"}, {"name": "install(self, pkgs, attempt_only = False)", "description": "Installs specified packages via DNF, with options for retries.", "scope": "RpmPM", "scopeKind": "class"}, {"name": "remove(self, pkgs, with_dependencies = True)", "description": "Removes specified packages, optionally ignoring dependencies.", "scope": "RpmPM", "scopeKind": "class"}, {"name": "upgrade(self)", "description": "Performs a package upgrade.", "scope": "RpmPM", "scopeKind": "class"}, {"name": "autoremove(self)", "description": "Removes unnecessary packages and cleans up packaging data directories.", "scope": "RpmPM", "scopeKind": "class"}, {"name": "remove_packaging_data(self)", "description": "Purges stored packaging data from the target root filesystem.", "scope": "RpmPM", "scopeKind": "class"}, {"name": "backup_packaging_data(self)", "description": "Creates backups of packaging-related directories for potential recovery.", "scope": "RpmPM", "scopeKind": "class"}, {"name": "recovery_packaging_data(self)", "description": "Restores previously backed-up packaging data into the filesystem.", "scope": "RpmPM", "scopeKind": "class"}, {"name": "list_installed(self)", "description": "Lists installed RPM packages with details of their dependencies and recommendations.", "scope": "RpmPM", "scopeKind": "class"}, {"name": "update(self)", "description": "Refreshes the repository cache.", "scope": "RpmPM", "scopeKind": "class"}, {"name": "_invoke_dnf(self, dnf_args, fatal = True, print_output = True )", "description": "Internal method to run DNF commands with proper environment and error handling.", "scope": "RpmPM", "scopeKind": "class"}, {"name": "dump_install_solution(self, pkgs)", "description": "Saves the current installation plan to a file.", "scope": "RpmPM", "scopeKind": "class"}, {"name": "load_old_install_solution(self)", "description": "Loads a saved installation plan from a file.", "scope": "RpmPM", "scopeKind": "class"}, {"name": "_script_num_prefix(self, path)", "description": "Determines the next script number prefix for storing post-install scripts.", "scope": "RpmPM", "scopeKind": "class"}, {"name": "save_rpmpostinst(self, pkg)", "description": "Stores the post-install script of a package into a file for later execution.", "scope": "RpmPM", "scopeKind": "class"}, {"name": "_handle_intercept_failure(self, registered_pkgs)", "description": "Saves post-install scripts for registered packages during intercept failure handling.", "scope": "RpmPM", "scopeKind": "class"}, {"name": "extract(self, pkg)", "description": "Extracts the RPM package contents into a temporary directory.", "scope": "RpmPM", "scopeKind": "class"}, {"name": "_prepare_pkg_transaction(self)", "scope": "RpmPM", "scopeKind": "class", "description": "unavailable"}, {"name": "insert_feeds_uris(self, feed_uris, feed_base_paths, feed_archs)", "scope": "RpmPM", "scopeKind": "class", "description": "unavailable"}], "calls": ["get_signer", "create_index", "bb.utils.which", "bb.fatal", "bb.note", "bb.utils.remove", "oe.path.join", "bb.utils.mkdirhier", "os.path.exists", "os.path.isdir", "os.path.isfile", "shutil.copytree", "shutil.copy2", "os.getcwd", "subprocess.check_output", "bb.utils.lockfile", "bb.utils.unlockfile"], "search-terms": ["RpmIndexer", "RpmSubdirIndexer", "list_pkgs", "rpm", "package_manager", "Yocto RPM"], "state": 2, "file_id": 1803, "knowledge_revision": 14956, "git_revision": "", "ctags": [{"_type": "tag", "name": "PMPkgsList", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^class PMPkgsList(PkgsList):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RpmIndexer", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^class RpmIndexer(Indexer):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RpmPM", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^class RpmPM(PackageManager):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RpmSubdirIndexer", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^class RpmSubdirIndexer(RpmIndexer):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def __init__(self,$/", "language": "Python", "kind": "member", "signature": "(self, d, target_rootfs, target_vendor, task_name='target', arch_var=None, os_var=None, rpm_repo_workdir=\"oe-rootfs-repo\", filterbydependencies=True, needfeed=True)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "_configure_dnf", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def _configure_dnf(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "_configure_rpm", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def _configure_rpm(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "_handle_intercept_failure", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def _handle_intercept_failure(self, registered_pkgs):$/", "language": "Python", "kind": "member", "signature": "(self, registered_pkgs)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "_invoke_dnf", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def _invoke_dnf(self, dnf_args, fatal = True, print_output = True ):$/", "language": "Python", "kind": "member", "signature": "(self, dnf_args, fatal = True, print_output = True )", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "_prepare_pkg_transaction", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def _prepare_pkg_transaction(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "_script_num_prefix", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def _script_num_prefix(self, path):$/", "language": "Python", "kind": "member", "signature": "(self, path)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "autoremove", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def autoremove(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "backup_packaging_data", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def backup_packaging_data(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "create_configs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def create_configs(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "do_write_index", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def do_write_index(self, deploy_dir):$/", "language": "Python", "kind": "member", "signature": "(self, deploy_dir)", "scope": "RpmIndexer", "scopeKind": "class"}, {"_type": "tag", "name": "dump_install_solution", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def dump_install_solution(self, pkgs):$/", "language": "Python", "kind": "member", "signature": "(self, pkgs)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "extract", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def extract(self, pkg):$/", "language": "Python", "kind": "member", "signature": "(self, pkg)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "insert_feeds_uris", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def insert_feeds_uris(self, feed_uris, feed_base_paths, feed_archs):$/", "language": "Python", "kind": "member", "signature": "(self, feed_uris, feed_base_paths, feed_archs)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "install", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def install(self, pkgs, attempt_only = False):$/", "language": "Python", "kind": "member", "signature": "(self, pkgs, attempt_only = False)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "list_installed", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def list_installed(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "list_pkgs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def list_pkgs(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PMPkgsList", "scopeKind": "class"}, {"_type": "tag", "name": "load_old_install_solution", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def load_old_install_solution(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "recovery_packaging_data", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def recovery_packaging_data(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "remove", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def remove(self, pkgs, with_dependencies = True):$/", "language": "Python", "kind": "member", "signature": "(self, pkgs, with_dependencies = True)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "remove_packaging_data", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def remove_packaging_data(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "save_rpmpostinst", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def save_rpmpostinst(self, pkg):$/", "language": "Python", "kind": "member", "signature": "(self, pkg)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "update", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def update(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "upgrade", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def upgrade(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "write_index", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def write_index(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "RpmIndexer", "scopeKind": "class"}, {"_type": "tag", "name": "write_index", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def write_index(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "RpmPM", "scopeKind": "class"}, {"_type": "tag", "name": "write_index", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "pattern": "/^    def write_index(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "RpmSubdirIndexer", "scopeKind": "class"}], "hash": "7c4794e33388854a789be11ab42e2227", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "openembedded-core/meta/lib/oe/package_manager/rpm/__init__.py", "revision_history": [{"14956": ""}]}