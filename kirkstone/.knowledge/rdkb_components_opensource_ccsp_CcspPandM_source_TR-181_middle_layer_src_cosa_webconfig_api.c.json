{"is_source_file": true, "format": "C", "description": "This is a C source file implementing web configuration APIs, including functions for base64 decoding, message pack unpacking, IP and port validation, blob version management, cache management for port forwarding configurations, and processing web configuration requests. It also manages port forwarding rules, cache initialization, application, and rollback mechanisms.", "external_files": ["<syscfg/syscfg.h>", "cosa_webconfig_api.h", "webconfig_framework.h", "<trower-base64/base64.h>", "safec_lib_common.h"], "external_methods": ["b64_get_decoded_buffer_size", "b64_decode", "msgpack_unpack", "msgpack_zone_init", "msgpack_zone_destroy", "getCurrentTime", "timeValDiff", "CcspTraceWarning", "CcspTraceInfo", "CcspTraceError", "syscfg_get", "syscfg_set_commit", "syscfg_unset", "syscfg_commit", "register_sub_docs", "initMultiCompMaster", "wbInitializeHotspot", "portmappingdoc_destroy"], "published": ["Process_PF_WebConfigRequest", "rollback_PortForwarding", "clear_pf_cache", "print_pf_cache", "apply_pf_cache_ToDB", "init_pf_cache", "set_portmap_conf", "webConfigFrameworkInit", "backup_pf_cache", "freeResources_PortForwarding"], "classes": [], "methods": [{"name": "int get_base64_decodedbuffer(char * pString,char ** buffer,int * size)", "description": "Decodes a base64-encoded string into a buffer and sets its size; calculates buffer size based on input string length.", "scope": "", "scopeKind": ""}, {"name": "msgpack_unpack_return get_msgpack_unpack_status(char * decodedbuf,int size)", "description": "Unpacks a msgpack buffer and returns the status of the unpack operation.", "scope": "", "scopeKind": ""}, {"name": "int CheckIfIpIsValid(char * ipAddress)", "description": "Validates an IP address string as either IPv4 or IPv6.", "scope": "", "scopeKind": ""}, {"name": "int CheckIfPortsAreValid(char * port,char * port_end_range)", "description": "Validates external port and port range strings for correct numerical values and range constraints.", "scope": "", "scopeKind": ""}, {"name": "uint32_t getBlobVersion(char * subdoc)", "description": "Retrieves the version number of a blob stored in system configuration.", "scope": "", "scopeKind": ""}, {"name": "int setBlobVersion(char * subdoc,uint32_t version)", "description": "Updates the version of a blob in system configuration and manages associated firmware files.", "scope": "", "scopeKind": ""}, {"name": "void webConfigFrameworkInit()", "description": "Registers supported subdocuments and initializes multi-component master, including Wi-Fi hotspot setup if applicable.", "scope": "", "scopeKind": ""}, {"name": "void clear_pf_cache(t_cache * tmp_pf_cache)", "description": "Clears the port forwarding cache.", "scope": "", "scopeKind": ""}, {"name": "void print_pf_cache(t_cache * tmp_pf_cache)", "description": "Prints the current port forwarding cache contents.", "scope": "", "scopeKind": ""}, {"name": "int clear_pf_cache_DB(t_cache * tmp_pf_cache)", "description": "Removes port forwarding rules from system configuration and restarts firewall.", "scope": "", "scopeKind": ""}, {"name": "void backup_pf_cache(t_cache * tmp_pf_cache,t_cache * tmp_pf_cache_bkup,int cache_size)", "description": "Backs up the current port forwarding cache into a backup buffer.", "scope": "", "scopeKind": ""}, {"name": "int apply_pf_cache_ToDB(t_cache * tmp_pf_cache,int cache_size,int pmapEnable)", "description": "Applies port forwarding rules from cache to system configuration, manages enabling/disabling port forwarding globally.", "scope": "", "scopeKind": ""}, {"name": "int set_portmap_conf(portmappingdoc_t * rpm)", "description": "Sets port mapping configuration from port mapping document, validates inputs, and fills cache.", "scope": "", "scopeKind": ""}, {"name": "void init_pf_cache(t_cache * tmp_pf_cache)", "description": "Initializes the port forwarding cache from system configuration data, supports the first boot setup.", "scope": "", "scopeKind": ""}, {"name": "pErr Process_PF_WebConfigRequest(void * Data)", "description": "Processes incoming web configuration requests for port forwarding, validating, caching, applying rules, and error handling.", "scope": "", "scopeKind": ""}, {"name": "int rollback_PortForwarding()", "description": "Restores previous port forwarding configuration from backup cache if update fails.", "scope": "", "scopeKind": ""}, {"name": "void freeResources_PortForwarding(void * arg)", "description": "Frees resources associated with port forwarding documentation.", "scope": "", "scopeKind": ""}], "calls": ["b64_get_decoded_buffer_size", "b64_decode", "msgpack_unpack", "msgpack_zone_init", "msgpack_zone_destroy", "getCurrentTime", "timeValDiff", "CcspTraceWarning", "CcspTraceInfo", "CcspTraceError", "syscfg_get", "syscfg_set_commit", "syscfg_unset", "syscfg_commit", "register_sub_docs", "initMultiCompMaster", "wbInitializeHotspot", "portmappingdoc_destroy"], "search-terms": ["port forwarding", "web config API", "blob version", "system configuration", "port mapping cache", "PortRangeForward", "SinglePortForward", "syscfg", "hotspot management", "packet decoding", "message pack"], "state": 2, "file_id": 8250, "knowledge_revision": 21307, "git_revision": "", "ctags": [{"_type": "tag", "name": "CheckIfIpIsValid", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^int CheckIfIpIsValid( char *ipAddress )$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * ipAddress)"}, {"_type": "tag", "name": "CheckIfPortsAreValid", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^int CheckIfPortsAreValid( char *port, char *port_end_range )$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * port,char * port_end_range)"}, {"_type": "tag", "name": "Process_PF_WebConfigRequest", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^pErr Process_PF_WebConfigRequest(void *Data)$/", "language": "C", "typeref": "typename:pErr", "kind": "function", "signature": "(void * Data)"}, {"_type": "tag", "name": "apply_pf_cache_ToDB", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^int apply_pf_cache_ToDB(t_cache *tmp_pf_cache, int cache_size,int pmapEnable)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(t_cache * tmp_pf_cache,int cache_size,int pmapEnable)"}, {"_type": "tag", "name": "backup_pf_cache", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^void backup_pf_cache(t_cache *tmp_pf_cache,t_cache *tmp_pf_cache_bkup,int cache_size)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(t_cache * tmp_pf_cache,t_cache * tmp_pf_cache_bkup,int cache_size)"}, {"_type": "tag", "name": "clear_pf_cache", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^void clear_pf_cache(t_cache *tmp_pf_cache)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(t_cache * tmp_pf_cache)"}, {"_type": "tag", "name": "clear_pf_cache_DB", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^int clear_pf_cache_DB(t_cache *tmp_pf_cache)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(t_cache * tmp_pf_cache)"}, {"_type": "tag", "name": "dmz_cache", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^t_cache dmz_cache[DMZ_CACHE_SIZE];$/", "language": "C", "typeref": "typename:t_cache[]", "kind": "variable"}, {"_type": "tag", "name": "dmz_cache_bkup", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^t_cache dmz_cache_bkup[DMZ_CACHE_SIZE];$/", "language": "C", "typeref": "typename:t_cache[]", "kind": "variable"}, {"_type": "tag", "name": "freeResources_PortForwarding", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^void freeResources_PortForwarding(void *arg)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void * arg)"}, {"_type": "tag", "name": "getBlobVersion", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^uint32_t getBlobVersion (char *subdoc)$/", "language": "C", "typeref": "typename:uint32_t", "kind": "function", "signature": "(char * subdoc)"}, {"_type": "tag", "name": "get_base64_decodedbuffer", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^int  get_base64_decodedbuffer(char *pString, char **buffer, int *size)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * pString,char ** buffer,int * size)"}, {"_type": "tag", "name": "get_msgpack_unpack_status", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^msgpack_unpack_return get_msgpack_unpack_status(char *decodedbuf, int size)$/", "language": "C", "typeref": "typename:msgpack_unpack_return", "kind": "function", "signature": "(char * decodedbuf,int size)"}, {"_type": "tag", "name": "gpfEnable", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^static int gpfEnable = 0;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "init_pf_cache", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^void init_pf_cache(t_cache *tmp_pf_cache)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(t_cache * tmp_pf_cache)"}, {"_type": "tag", "name": "pf_cache", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^t_cache pf_cache[PORTMAP_CACHE_SIZE];$/", "language": "C", "typeref": "typename:t_cache[]", "kind": "variable"}, {"_type": "tag", "name": "pf_cache_bkup", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^t_cache pf_cache_bkup[PORTMAP_CACHE_SIZE];$/", "language": "C", "typeref": "typename:t_cache[]", "kind": "variable"}, {"_type": "tag", "name": "pf_cache_size", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^static int pf_cache_size = 0;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "pf_cache_size_bkup", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^static int pf_cache_size_bkup = 0;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "print_pf_cache", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^void print_pf_cache(t_cache *tmp_pf_cache)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(t_cache * tmp_pf_cache)"}, {"_type": "tag", "name": "rollback_PortForwarding", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^int rollback_PortForwarding()$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "setBlobVersion", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^int setBlobVersion (char *subdoc, uint32_t version)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * subdoc,uint32_t version)"}, {"_type": "tag", "name": "set_portmap_conf", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^int set_portmap_conf(portmappingdoc_t *rpm)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(portmappingdoc_t * rpm)"}, {"_type": "tag", "name": "webConfigFrameworkInit", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "pattern": "/^void webConfigFrameworkInit()$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}], "hash": "72addde6c2c44063ea65bc6e76228f6f", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/cosa_webconfig_api.c", "fields": [{"name": "t_cache[] dmz_cache", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "t_cache[] dmz_cache_bkup", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int gpfEnable", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "t_cache[] pf_cache", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "t_cache[] pf_cache_bkup", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int pf_cache_size", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int pf_cache_size_bkup", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"21307": ""}]}