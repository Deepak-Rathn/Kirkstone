{"is_source_file": true, "format": "sh (Shell script)", "description": "This script manages backup and upload of logs, handles reboot notifications, manages process concurrency, and interacts with system services for a device running embedded Linux, particularly within a router or Gateway environment. It includes logic for log archiving, trigger notifications before reboot, and coordination with system components.", "external_files": ["/rdklogger/logfiles.sh", "/lib/rdk/utils.sh", "/rdklogger/logUpload_default_params.sh", "/lib/rdk/dca_utility.sh", "/lib/systemd/system/parodus.service", "/syscfg"], "external_methods": ["syscfg get IHC_Mode", "syscfg get logbackup_enable", "syscfg get log_backup_enable", "getMacAddressOnly", "createSysDescr", "syncLogs_nvram2", "syncLogs", "backupAllLogs", "preserveThisLog", "flush_atom_logs", "ping_peer", "rebootFunc", "echo_t", "dmcli eRT setv", "ls", "killall", "systemctl stop", "ps"], "published": [], "classes": [], "methods": [{"name": "backup_log_pidCleanup", "description": "Removes the log upload PID file if it exists to avoid stale process locking."}, {"name": "getTFTPServer", "description": "Reads the TFTP server address from a configuration file based on the provided server type."}, {"name": "Trigger_RebootPendingNotify", "description": "Sends a system command to trigger the Reboot Pending Notification prior to reboot."}, {"name": "getBuildType", "description": "Parses /version.txt to identify build type (DEV, VBN, PROD, CQA) based on image name."}, {"name": "backupLogsonReboot", "description": "Handles backup of logs during reboot, copying logs to a backup directory, and optionally syncing with external systems."}, {"name": "backupLogsonReboot_nvram2", "description": "Performs similar log backup tasks with additional handling for NVRAM2 support and telemetry coordination."}], "calls": ["syscfg get IHC_Mode", "syscfg get logbackup_enable", "syscfg get log_backup_enable", "getMacAddressOnly", "createSysDescr", "syncLogs_nvram2", "syncLogs", "backupAllLogs", "preserveThisLog", "flush_atom_logs", "ping_peer", "rebootFunc", "dmcli eRT setv", "ls", "killall", "systemctl stop", "ps"], "search-terms": ["backupLogs.sh", "log upload", "reboot notification", "log backup", "log archive", "process concurrency", "systemd parodus", "telemetry", "NVRAM2", "store-health", "atom log", "reboot pending"], "state": 2, "file_id": 7100, "knowledge_revision": 20189, "git_revision": "", "hash": "b12f3d816b71c7be65938db0eb042ca9", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/sysint/backupLogs.sh", "revision_history": [{"20189": ""}]}