{"is_source_file": true, "format": "Python", "description": "This file contains a series of self-test cases for the oeqa testing framework used in the Yocto Project. It tests various build options, disk monitoring behaviors, toolchain configurations, source mirroring, and build history functionalities. The tests are implemented as Python classes inheriting from OESelftestTestCase, with methods executing BitBake commands and verifying their outputs.", "external_files": ["oeqa/selftest/cases/buildhistory.py", "oeqa/selftest/case.py", "oeqa/utils/commands.py", "oeqa/utils/ftools.py"], "external_methods": ["get_bb_var", "get_bb_vars", "bitbake", "write_file", "write_bblayers_config", "write_recipeinc", "delete_recipeinc", "add_command_to_tearDown", "run_buildhistory_operation"], "published": ["ImageOptionsTests", "DiskMonTest", "SanityOptionsTest", "BuildhistoryTests", "ArchiverTest", "ToolchainOptions", "SourceMirroring", "Poisoning"], "classes": [{"name": "ImageOptionsTests", "description": "Contains tests for image generation options, ccache usage, and read-only image features."}, {"name": "DiskMonTest", "description": "Tests disk space monitor behavior related to stopping, halting, and warning states."}, {"name": "SanityOptionsTest", "description": "Contains tests for QA switch options and layer git repository handling."}, {"name": "BuildhistoryTests", "description": "Test cases for verifying build history recording and retrieval functionalities."}, {"name": "ArchiverTest", "description": "Tests archiving of build work directories and source file export functionality."}, {"name": "ToolchainOptions", "description": "Tests configuration of toolchain options, such as Fortran support."}, {"name": "SourceMirroring", "description": "Verifies source code mirroring setup and downloads over HTTP."}, {"name": "Poisoning", "description": "Tests for detecting unsafe or problematic package configurations."}], "methods": [{"name": "test_incremental_image_generation(self)", "description": "Tests incremental image generation and verification of log output.", "scope": "ImageOptionsTests", "scopeKind": "class"}, {"name": "test_ccache_tool(self)", "description": "Checks for ccache existence and its integration during build.", "scope": "ImageOptionsTests", "scopeKind": "class"}, {"name": "test_read_only_image(self)", "description": "Verifies the successful build of read-only root filesystem images.", "scope": "ImageOptionsTests", "scopeKind": "class"}, {"name": "test_stoptask_behavior(self)", "description": "Validates behavior of disk space monitor with different actions.", "scope": "DiskMonTest", "scopeKind": "class"}, {"name": "test_options_warnqa_errorqa_switch(self)", "description": "Tests QA switch options for package issues and error/warning reporting.", "scope": "SanityOptionsTest", "scopeKind": "class"}, {"name": "test_layer_without_git_dir(self)", "description": "Ensures build succeeds even when a layer is not a git repository.", "scope": "SanityOptionsTest", "scopeKind": "class"}, {"name": "test_buildhistory_basic(self)", "description": "Checks basic build history collection.", "scope": "BuildhistoryTests", "scopeKind": "class"}, {"name": "test_buildhistory_buildtime_pr_backwards(self)", "description": "Verifies build history handling of package version regressions.", "scope": "BuildhistoryTests", "scopeKind": "class"}, {"name": "test_fileinfo(self)", "description": "Tests buildhistory file info collection, including file listing and package size.", "scope": "BuildhistoryTests", "scopeKind": "class"}, {"name": "test_arch_work_dir_and_export_source(self)", "description": "Ensures archiving mode captures source files correctly.", "scope": "ArchiverTest", "scopeKind": "class"}, {"name": "test_toolchain_fortran(self)", "description": "Builds a Fortran 'Hello, World' binary to verify support.", "scope": "ToolchainOptions", "scopeKind": "class"}, {"name": "test_yocto_source_mirror(self)", "description": "Tests source mirroring over HTTP with custom mirror configuration.", "scope": "SourceMirroring", "scopeKind": "class"}, {"name": "test_poisoning(self)", "description": "Checks for proper detection of unsafe or problematic package configurations.", "scope": "Poisoning", "scopeKind": "class"}, {"name": "getline(self, res, line)", "scope": "SanityOptionsTest", "scopeKind": "class", "description": "unavailable"}, {"name": "load_bh(f)", "scope": "BuildhistoryTests.test_fileinfo", "scopeKind": "member", "description": "unavailable"}], "calls": ["get_bb_var", "get_bb_vars", "bitbake", "os.path.join", "ftools.read_file", "re.search", "self.write_config", "self.append_config", "self.remove_config", "self.assertTrue", "self.assertIn", "self.assertEqual", "self.assertNotIn", "self.write_recipeinc", "self.delete_recipeinc", "self.add_command_to_tearDown", "self.run_buildhistory_operation"], "search-terms": ["selftest", "buildoptions", "buildhistory", "diskmon", "sanity", "archiver", "toolchain", "sources mirror", "poison"], "state": 2, "file_id": 1928, "knowledge_revision": 15079, "git_revision": "", "ctags": [{"_type": "tag", "name": "ArchiverTest", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^class ArchiverTest(OESelftestTestCase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BuildhistoryTests", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^class BuildhistoryTests(BuildhistoryBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DiskMonTest", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^class DiskMonTest(OESelftestTestCase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ImageOptionsTests", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^class ImageOptionsTests(OESelftestTestCase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Poisoning", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^class Poisoning(OESelftestTestCase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SanityOptionsTest", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^class SanityOptionsTest(OESelftestTestCase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SourceMirroring", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^class SourceMirroring(OESelftestTestCase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ToolchainOptions", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^class ToolchainOptions(OESelftestTestCase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ftools", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^import oeqa.utils.ftools as ftools$/", "language": "Python", "kind": "namespace", "nameref": "module:oeqa.utils.ftools"}, {"_type": "tag", "name": "g", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^import glob as g$/", "language": "Python", "kind": "namespace", "nameref": "module:glob"}, {"_type": "tag", "name": "getline", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^    def getline(self, res, line):$/", "language": "Python", "kind": "member", "signature": "(self, res, line)", "scope": "SanityOptionsTest", "scopeKind": "class"}, {"_type": "tag", "name": "load_bh", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^        def load_bh(f):$/", "file": true, "language": "Python", "kind": "function", "signature": "(f)", "scope": "BuildhistoryTests.test_fileinfo", "scopeKind": "member"}, {"_type": "tag", "name": "test_arch_work_dir_and_export_source", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^    def test_arch_work_dir_and_export_source(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ArchiverTest", "scopeKind": "class"}, {"_type": "tag", "name": "test_buildhistory_basic", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^    def test_buildhistory_basic(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "BuildhistoryTests", "scopeKind": "class"}, {"_type": "tag", "name": "test_buildhistory_buildtime_pr_backwards", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^    def test_buildhistory_buildtime_pr_backwards(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "BuildhistoryTests", "scopeKind": "class"}, {"_type": "tag", "name": "test_ccache_tool", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^    def test_ccache_tool(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ImageOptionsTests", "scopeKind": "class"}, {"_type": "tag", "name": "test_fileinfo", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^    def test_fileinfo(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "BuildhistoryTests", "scopeKind": "class"}, {"_type": "tag", "name": "test_incremental_image_generation", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^    def test_incremental_image_generation(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ImageOptionsTests", "scopeKind": "class"}, {"_type": "tag", "name": "test_layer_without_git_dir", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^    def test_layer_without_git_dir(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "SanityOptionsTest", "scopeKind": "class"}, {"_type": "tag", "name": "test_options_warnqa_errorqa_switch", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^    def test_options_warnqa_errorqa_switch(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "SanityOptionsTest", "scopeKind": "class"}, {"_type": "tag", "name": "test_poisoning", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^    def test_poisoning(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Poisoning", "scopeKind": "class"}, {"_type": "tag", "name": "test_read_only_image", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^    def test_read_only_image(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ImageOptionsTests", "scopeKind": "class"}, {"_type": "tag", "name": "test_stoptask_behavior", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^    def test_stoptask_behavior(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DiskMonTest", "scopeKind": "class"}, {"_type": "tag", "name": "test_toolchain_fortran", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^    def test_toolchain_fortran(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ToolchainOptions", "scopeKind": "class"}, {"_type": "tag", "name": "test_yocto_source_mirror", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "pattern": "/^    def test_yocto_source_mirror(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "SourceMirroring", "scopeKind": "class"}], "hash": "cc0f6436139e56e686033c51a9186e1d", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "openembedded-core/meta/lib/oeqa/selftest/cases/buildoptions.py", "revision_history": [{"15079": ""}]}