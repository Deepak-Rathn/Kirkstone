{"is_source_file": true, "format": "Shell script / Bash", "description": "This file is a shell script used to initialize and manage various services and configurations on a device, including starting processes, setting environment variables, loading modules, and performing device-specific setup tasks.", "external_files": ["/etc/utopia/service.d/log_env_var.sh", "/etc/utopia/service.d/log_capture_path.sh", "/etc/device.properties", "/etc/mount-utils/getConfigFile.sh", "/lib/rdk/dcm.service", "/lib/rdk/ocsp-support.sh", "/lib/rdk/dibbler-server-init.sh", "/usr/bin/check-ca-update.sh", "/usr/sbin/tdkb_launcher.sh"], "external_methods": [], "published": ["BINPATH", "BBHM_CUR_CFG", "CRONPATH", "CRONFILE", "CRONFILE_BK", "Subsys"], "classes": [], "methods": [], "calls": ["killall telemetry2_0", "killall CcspPandMSsp", "killall CcspCMAgentSsp", "killall PsmSsp", "killall CcspCrSsp", "killall ccspRecoveryManager", "killall CcspTandDSsp", "killall CcspDnsSsp", "killall CcspPandMSsp", "killall CcspTr069PaSsp", "killall PsmSsp", "killall CcspCrSsp", "killall CcspMtaAgentSsp", "killall CcspCMAgentSsp", "killall CcspLMLite", "killall CcspXdnsSsp", "killall webpa", "cd notify-comp", "$BINPATH/notify_comp", "$BINPATH/notify_comp -subsys $Subsys", "cd ..", "cd cm", "$BINPATH/CcspCMAgentSsp", "$BINPATH/CcspCMAgentSsp -subsys $Subsys", "cd ..", "cd pam", "$BINPATH/CcspPandMSsp", "$BINPATH/CcspPandMSsp -subsys $Subsys", "cd ..", "$BINPATH/PsmSsp", "$BINPATH/PsmSsp -subsys $Subsys", "wait", "grep -irn 'X_COMCAST-COM_CID\\|X_COMCAST-COM_CMC' $BBHM_CUR_CFG", "$BINPATH/CcspCrSsp", "$BINPATH/CcspCrSsp -subsys $Subsys", "sleep 1", "echo 'Elected subsystem is $Subsys'", "/usr/ccsp/psm/bbhm_patch.sh -f /tmp/bbhm_cur_cfg.xml", "/usr/ccsp/psm/bbhm_flip.sh -f /tmp/bbhm_cur_cfg.xml", "[ -f $PWD/core_compr ]", "mkdir -p /var/core", "echo '|$PWD/core_compr /var/core %p %e' >/proc/sys/kernel/core_pattern", "ulimit -c unlimited", "./core_report.sh &", "[ \"$BUILD_TYPE\" = \"prod\" ]", "echo '|/bin/false' >/proc/sys/kernel/core_pattern", "ulimit -c 0", "echo /tmp/%t_core.prog_%e.signal_%s >/proc/sys/kernel/core_pattern", "cp ccsp_msg.cfg /tmp", "$BINPATH/dbus-daemon --config-file=./basic.conf --fork", "touch /tmp/cp_subsys_ert", "rm -rf /nvram/disable*", "$BINPATH/CcspCrSsp -subsys $Subsys", "wait_count=\"0\"", "while [ \"$wait_count\" -lt \"60\" ]", "sleep 1", "if [ -e \"/tmp/cr_initialized\" ]", "echo \"cosa_start: CR initialized ...\"", "break", "echo \"cosa_start: checking CR is up ... $wait_count\"", "done", "grep -irn \"X_COMCAST-COM_CID\\|X_COMCAST-COM_CMC\" $BBHM_CUR_CFG", "$BINPATH/PsmSsp -subsys $Subsys", "wait_count=\"0\"", "while [ \"$wait_count\" -lt \"60\" ]", "sleep 1", "if [ -e \"/tmp/psm_initialized\" ]", "echo \"cosa_start: PSM initialized ...\"", "break", "echo \"cosa_start: checking PSM is up ... $wait_count\"", "done", "sleep 5", "if [ -e ./notify-comp ]", "cd notify-comp", "$BINPATH/notify_comp", "$BINPATH/notify_comp -subsys $Subsys", "cd ..", "if [ -e ./cm ]", "cd cm", "$BINPATH/CcspCMAgentSsp", "$BINPATH/CcspCMAgentSsp -subsys $Subsys", "cd ..", "if [ -e ./pam ]", "cd pam", "$BINPATH/CcspPandMSsp", "$BINPATH/CcspPandMSsp -subsys $Subsys", "cd ..", "wait", "if [ -f  /lib/rdk/dcm.service ]", "/bin/sh /lib/rdk/dcm.service &", "if [ -f /usr/bin/check-ca-update.sh ] && [ \"$BOX_TYPE\" != \"XB3\" ]", "sh /usr/bin/check-ca-update.sh &", "if [ -f /lib/rdk/ocsp-support.sh ] && [ \"$BOX_TYPE\" != \"XB3\" ]", "sh /lib/rdk/ocsp-support.sh &", "mkdir -p /tmp/.dropbear", "dropbear -r $DROPBEAR_PARAMS_1 -r $DROPBEAR_PARAMS_2 -E -s -p $ARM_INTERFACE_IP:22 -P /var/run/dropbear_ipc.pid > /dev/null 2>&1 &", "if [ -f \"/usr/sbin/tdkb_launcher.sh\" ]", "sh /usr/sbin/tdkb_launcher.sh &", "sh /lib/rdk/dibbler-server-init.sh", "pidof crond", "crond -c $CRONPATH -l 9", "crontab -l -c $CRONPATH", "crontab $CRONFILE_BK -c $CRONPATH"], "search-terms": ["shell script", "service initialization", "CRON setup", "device configuration", "platform-specific setup", "process management", "configuration files"], "state": 2, "file_id": 12440, "knowledge_revision": 25342, "git_revision": "", "hash": "08ba7c636d860f55012a41e32e21b132", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/CcspCommonLibrary/scripts/cosa_start_arm.sh", "revision_history": [{"25342": ""}]}