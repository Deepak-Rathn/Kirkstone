{"is_source_file": true, "format": "C", "description": "This file 'dca.c' is a C source file implementing data collection and analysis functionalities for the DCA component, including log processing, pattern matching, JSON output, and integration with TR181 message bus.", "external_files": ["glib.h", "cJSON.h", "dcautils.h", "dcalist.h", "safec_lib.h", "dcatr181.h"], "external_methods": ["getLoadAvg()", "getProcUsage()", "ccsp_handler_init()", "get_tr181param_value()", "ccsp_handler_exit()", "writesRotatedLog()", "addToSearchResult()", "searchPCNode()", "insertPCNode()", "clearPCNodes()", "writeLogSeek()", "updateConfVal()", "updateExecCounter()", "initSearchResultJson()", "printJson()", "clearSearchResultJson()", "clearConfVal()", "printf_s()"], "published": ["main", "parseFile", "processPattern", "addToJson", "getDType", "strSplit", "handleRDKErrCodes", "processCountPattern", "processTopPattern", "processTr181Objects"], "classes": [], "methods": [{"name": "int main(int argc,char * argv[])", "description": "Main program entry point; executes pattern file parsing and data processing.", "scope": "", "scopeKind": ""}, {"name": "int parseFile(char * fname)", "description": "Parses a configuration file to set up pattern matching and log processing.", "scope": "", "scopeKind": ""}, {"name": "int processPattern(char ** prev_file,char * logfile,GList ** rdkec_head,GList * pchead,int pcIndex)", "description": "Processes logs based on pattern types, manages previous log tracking, and calls specific pattern processors.", "scope": "", "scopeKind": ""}, {"name": "int addToJson(GList * pchead)", "description": "Aggregates matched data into a JSON object for output.", "scope": "", "scopeKind": ""}, {"name": "void getDType(char * filename,char * header,DType_t * dtype)", "description": "Determines the data type of pattern based on filename and header.", "scope": "", "scopeKind": ""}, {"name": "char * strSplit(char * str,char * delim)", "description": "Splits a string based on a delimiter, mimicking strstr but with re-entrant state.", "scope": "", "scopeKind": ""}, {"name": "int handleRDKErrCodes(GList ** rdkec_head,char * line)", "description": "Extracts error codes from log lines and updates error-related nodes.", "scope": "", "scopeKind": ""}, {"name": "int processCountPattern(char * logfile,GList * pchead,int pcIndex,GList ** rdkec_head)", "description": "Processes log files to count pattern matches and handle RDK error codes.", "scope": "", "scopeKind": ""}, {"name": "int processTopPattern(char * logfile,GList * pchead,int pcIndex)", "description": "Processes top command log files to extract load average and process usage.", "scope": "", "scopeKind": ""}, {"name": "int processTr181Objects(char * logfile,GList * pchead,int pcIndex)", "description": "Uses CCSP message bus to retrieve TR181 object data for telemetry.", "scope": "", "scopeKind": ""}, {"name": "void appendData(pcdata_t * dst,const char * src)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int getErrorCode(char * str,char * ec,int ec_length)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int getIPVideo(char * line,pcdata_t * pcnode)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int get_log_type_from_name(char * name,enum logType_e * type_ptr)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getLoadAvg()", "getProcUsage()", "ccsp_handler_init()", "get_tr181param_value()", "ccsp_handler_exit()", "writesRotatedLog()", "addToSearchResult()", "searchPCNode()", "insertPCNode()", "clearPCNodes()", "writeLogSeek()", "updateConfVal()", "updateExecCounter()", "initSearchResultJson()", "printJson()", "clearSearchResultJson()", "clearConfVal()"], "search-terms": ["dca.c", "parseFile", "TR181", "message bus", "log processing", "pattern matching", "JSON output", "RDK error codes", "telemetry"], "state": 2, "file_id": 13081, "knowledge_revision": 25983, "git_revision": "", "ctags": [{"_type": "tag", "name": "CUR_EXEC_COUNT", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^int CUR_EXEC_COUNT = 0;$/", "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "DELIMITER_SIZE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^#define DELIMITER_SIZE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "DEVICE_TYPE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^char *DEVICE_TYPE = NULL;$/", "language": "C", "typeref": "typename:char *", "kind": "variable"}, {"_type": "tag", "name": "INVALID_COUNT", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^#define INVALID_COUNT /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "LAST_SEEK_VALUE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^long LAST_SEEK_VALUE = 0;$/", "language": "C", "typeref": "typename:long", "kind": "variable"}, {"_type": "tag", "name": "LOGTYPE_PAIR", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^} LOGTYPE_PAIR;$/", "file": true, "language": "C", "typeref": "struct:logtype_pair", "kind": "typedef"}, {"_type": "tag", "name": "LOG_FILE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^#define LOG_FILE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "LOG_PATH", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^char *LOG_PATH = NULL;$/", "language": "C", "typeref": "typename:char *", "kind": "variable"}, {"_type": "tag", "name": "MESSAGE_BUS", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^    MESSAGE_BUS,$/", "file": true, "language": "C", "kind": "enumerator", "scope": "logType_e", "scopeKind": "enum"}, {"_type": "tag", "name": "NOE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^#define NOE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "NUM_OF_LOG_TYPES", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^#define NUM_OF_LOG_TYPES /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "OBJ_DELIMITER", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^#define OBJ_DELIMITER /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "PERSISTENT_PATH", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^char *PERSISTENT_PATH = NULL;$/", "language": "C", "typeref": "typename:char *", "kind": "variable"}, {"_type": "tag", "name": "ROOT_JSON", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^cJSON *SEARCH_RESULT_JSON = NULL, *ROOT_JSON = NULL;$/", "language": "C", "typeref": "typename:cJSON *", "kind": "variable"}, {"_type": "tag", "name": "SEARCH_RESULT_JSON", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^cJSON *SEARCH_RESULT_JSON = NULL, *ROOT_JSON = NULL;$/", "language": "C", "typeref": "typename:cJSON *", "kind": "variable"}, {"_type": "tag", "name": "TOPLOG", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^    TOPLOG,$/", "file": true, "language": "C", "kind": "enumerator", "scope": "logType_e", "scopeKind": "enum"}, {"_type": "tag", "name": "TR181BUF_LENGTH", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^#define TR181BUF_LENGTH /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "addToJson", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^int addToJson(GList *pchead)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(GList * pchead)"}, {"_type": "tag", "name": "appendData", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^static void appendData( pcdata_t* dst, const char* src)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(pcdata_t * dst,const char * src)"}, {"_type": "tag", "name": "getDType", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^void getDType(char *filename, char *header, DType_t *dtype)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(char * filename,char * header,DType_t * dtype)"}, {"_type": "tag", "name": "getErrorCode", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^int getErrorCode(char *str, char *ec, int ec_length)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * str,char * ec,int ec_length)"}, {"_type": "tag", "name": "getIPVideo", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^int getIPVideo(char *line, pcdata_t *pcnode)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * line,pcdata_t * pcnode)"}, {"_type": "tag", "name": "get_log_type_from_name", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^int get_log_type_from_name(char *name, enum logType_e *type_ptr)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * name,enum logType_e * type_ptr)"}, {"_type": "tag", "name": "handleRDKErrCodes", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^int handleRDKErrCodes(GList **rdkec_head, char *line)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(GList ** rdkec_head,char * line)"}, {"_type": "tag", "name": "logType_e", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^enum logType_e {$/", "file": true, "language": "C", "kind": "enum"}, {"_type": "tag", "name": "log_type_table", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^LOGTYPE_PAIR log_type_table[] = {$/", "language": "C", "typeref": "typename:LOGTYPE_PAIR[]", "kind": "variable"}, {"_type": "tag", "name": "logtype_pair", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^typedef struct logtype_pair{$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "main", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^int main(int argc, char *argv[]) {$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(int argc,char * argv[])"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^  char                 *name;$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "logtype_pair", "scopeKind": "struct"}, {"_type": "tag", "name": "parseFile", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^int parseFile(char *fname)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * fname)"}, {"_type": "tag", "name": "processCountPattern", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^int processCountPattern(char *logfile, GList *pchead, int pcIndex, GList **rdkec_head)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * logfile,GList * pchead,int pcIndex,GList ** rdkec_head)"}, {"_type": "tag", "name": "processPattern", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^int processPattern(char **prev_file, char *logfile, GList **rdkec_head, GList *pchead, int pcInd/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char ** prev_file,char * logfile,GList ** rdkec_head,GList * pchead,int pcIndex)"}, {"_type": "tag", "name": "processTopPattern", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^int processTopPattern(char *logfile, GList *pchead, int pcIndex)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * logfile,GList * pchead,int pcIndex)"}, {"_type": "tag", "name": "processTr181Objects", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^static int processTr181Objects(char *logfile, GList *pchead, int pcIndex)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * logfile,GList * pchead,int pcIndex)"}, {"_type": "tag", "name": "strSplit", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^char *strSplit(char *str, char *delim) {$/", "language": "C", "typeref": "typename:char *", "kind": "function", "signature": "(char * str,char * delim)"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/dca/src/dca.c", "pattern": "/^  enum logType_e   type;$/", "file": true, "language": "C", "typeref": "enum:logType_e", "kind": "member", "scope": "logtype_pair", "scopeKind": "struct"}], "hash": "f6b0039238c80768980f725562c2f019", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdk/components/generic/dca/src/dca.c", "fields": [{"name": "int CUR_EXEC_COUNT", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char * DEVICE_TYPE", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "long LAST_SEEK_VALUE", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char * LOG_PATH", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char * PERSISTENT_PATH", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "cJSON * ROOT_JSON", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "cJSON * SEARCH_RESULT_JSON", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "LOGTYPE_PAIR[] log_type_table", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char * name", "scope": "logtype_pair", "scopeKind": "struct", "description": "unavailable"}, {"name": "enum:logType_e type", "scope": "logtype_pair", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"25983": ""}]}