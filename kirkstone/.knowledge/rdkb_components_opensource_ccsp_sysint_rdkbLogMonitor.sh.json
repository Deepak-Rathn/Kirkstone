{"is_source_file": true, "format": "shell script / Bash script", "description": "This file is a shell script used for log monitoring, uploading logs, handling system reboots, and managing logs on an embedded device, likely in a network device or set-top box. It includes variable initialization, function definitions, and main execution logic for monitoring logs, syncing with NVRAM and remote servers, handling reboot scenarios, and managing log backups.", "external_files": ["/lib/rdk/utils.sh", "/lib/rdk/t2Shared_api.sh", "/lib/rdk/logfiles.sh", "/nvram/logupload.properties"], "external_methods": ["sed", "grep", "awk", "sysevent", "timedatectl", "sysevent get", "syscfg get", "cp", "mv", "rm", "mkdir", "ls", "touch", "cat", "echo", "sleep", "scp"], "published": [], "classes": [], "methods": [{"name": "getFWVersion", "description": "Extracts the firmware version from /version.txt using sed."}, {"name": "getBuildType", "description": "Determines build type (DEV, VBN, PROD, CQA) based on version.txt content."}, {"name": "random_sleep", "description": "Introduces a random sleep interval up to 30 minutes to stagger operations."}, {"name": "processJsonResponse", "description": "Processes JSON response saved in a file, reformats it into a key-value configuration."}, {"name": "getLogfileSize", "description": "Calculates total size of log files or directories."}, {"name": "getTFTPServer", "description": "Retrieves TFTP server address based on build type."}, {"name": "getLineSizeandRotate", "description": "Checks log files for line count and rotates logs if they exceed a maximum size."}, {"name": "reset_offset", "description": "Resets log file offsets to start from the beginning."}, {"name": "get_logbackup_cfg", "description": "Reads log backup configuration from syscfg or other sources."}, {"name": "upload_nvram2_logs", "description": "Uploads logs stored in nvram2 backup directory to a remote server."}, {"name": "bootup_remove_old_backupfiles", "description": "Removes old log backup files during system boot."}, {"name": "bootup_tarlogs", "description": "Creates tarball backups of logs during system boot for later upload."}, {"name": "bootup_upload", "description": "Uploads logs and backups during system boot, manages backup files."}], "calls": ["sed", "grep", "awk", "sysevent get", "syscfg get", "cp", "mv", "rm", "mkdir", "ls", "touch", "cat", "echo", "sleep", "scp", "timedatectl status", "createSysDescr", "preserveThisLog", "syncLogs_nvram2", "syncLogs", "backupnvram2logs_on_reboot", "backupnvram2logs", "processDCMResponse", "uploadRDKBLogs.sh", "getMacAddressOnly", "sysevent get wan-status", "sysevent get ntp_time_sync", "sysevent get webserver", "sysevent get wan-event-log-upload", "sysevent get wan-status", "timedatectl status", "createSysDescr", "ls", "preserveThisLog", "syncLogs_nvram2", "backupnvram2logs", "processDCMResponse", "getLogfileSize", "remove_hidden_files"], "search-terms": ["rdkbLogMonitor", "log_upload", "system reboot", "log backup", "log upload retry", "nvram2", "logfile size management", "log rotation", "logupload.properties", "log monitor script"], "state": 2, "file_id": 7085, "knowledge_revision": 20179, "git_revision": "", "hash": "b84d479a263ba541e49eaa8c20844db1", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/sysint/rdkbLogMonitor.sh", "revision_history": [{"20179": ""}]}