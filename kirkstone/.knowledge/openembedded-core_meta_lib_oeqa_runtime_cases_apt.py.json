{"is_source_file": true, "format": "Python", "description": "This file contains test cases for verifying apt package management operations in a build or runtime environment, including setup and cleanup of package repositories and keys, and executing apt commands as part of unit tests.", "external_files": ["oeqa.utils.httpserver", "oeqa.runtime.case", "oeqa.core.decorator.data", "oeqa.runtime.decorator.package"], "external_methods": ["HTTPService()", "OERuntimeTestCase", "skipIfNotDataVar", "skipIfNotFeature", "OEHasPackage"], "published": [], "classes": [{"name": "AptTest", "description": "Base class containing methods to run apt commands and verify their outcomes."}, {"name": "AptRepoTest", "description": "Derived test class that sets up a local HTTP repository server and performs package installation tests from it."}], "methods": [{"name": "pkg(self, command, expected = 0)", "description": "Runs 'apt-get' commands and checks the expected exit status.", "scope": "AptTest", "scopeKind": "class"}, {"name": "setUpClass(cls)", "description": "Class method to start a local HTTP service for the repository.", "scope": "AptRepoTest", "scopeKind": "class"}, {"name": "tearDownClass(cls)", "description": "Class method to stop the HTTP service.", "scope": "AptRepoTest", "scopeKind": "class"}, {"name": "setup_source_config_for_package_install(self)", "description": "Configures the APT sources list to point to the local repository.", "scope": "AptRepoTest", "scopeKind": "class"}, {"name": "setup_source_config_for_package_install_signed(self)", "description": "Configures the sources list with a signed repository URL.", "scope": "AptRepoTest", "scopeKind": "class"}, {"name": "cleanup_source_config_for_package_install(self)", "description": "Removes the sources list configuration.", "scope": "AptRepoTest", "scopeKind": "class"}, {"name": "cleanup_source_config_for_package_install_signed(self)", "description": "Restores the original sources list.", "scope": "AptRepoTest", "scopeKind": "class"}, {"name": "setup_key(self)", "description": "Adds GPG key for the repository to the target system.", "scope": "AptRepoTest", "scopeKind": "class"}, {"name": "test_apt_install_from_repo(self)", "description": "Test method that performs apt operations including update, install, and remove, depending on the presence of a package feed GPG key.", "scope": "AptRepoTest", "scopeKind": "class"}], "calls": ["self.target.run()", "self.assertEqual()", "os.path.join()", "HTTPService()"], "search-terms": ["AptTest", "setUpClass", "apt-key add", "sources.list", "HTTPService", "apt-get"], "state": 2, "file_id": 1992, "knowledge_revision": 15139, "git_revision": "", "ctags": [{"_type": "tag", "name": "AptRepoTest", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/runtime/cases/apt.py", "pattern": "/^class AptRepoTest(AptTest):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "AptTest", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/runtime/cases/apt.py", "pattern": "/^class AptTest(OERuntimeTestCase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "cleanup_source_config_for_package_install", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/runtime/cases/apt.py", "pattern": "/^    def cleanup_source_config_for_package_install(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "AptRepoTest", "scopeKind": "class"}, {"_type": "tag", "name": "cleanup_source_config_for_package_install_signed", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/runtime/cases/apt.py", "pattern": "/^    def cleanup_source_config_for_package_install_signed(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "AptRepoTest", "scopeKind": "class"}, {"_type": "tag", "name": "pkg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/runtime/cases/apt.py", "pattern": "/^    def pkg(self, command, expected = 0):$/", "language": "Python", "kind": "member", "signature": "(self, command, expected = 0)", "scope": "AptTest", "scopeKind": "class"}, {"_type": "tag", "name": "setUpClass", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/runtime/cases/apt.py", "pattern": "/^    def setUpClass(cls):$/", "language": "Python", "kind": "member", "signature": "(cls)", "scope": "AptRepoTest", "scopeKind": "class"}, {"_type": "tag", "name": "setup_key", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/runtime/cases/apt.py", "pattern": "/^    def setup_key(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "AptRepoTest", "scopeKind": "class"}, {"_type": "tag", "name": "setup_source_config_for_package_install", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/runtime/cases/apt.py", "pattern": "/^    def setup_source_config_for_package_install(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "AptRepoTest", "scopeKind": "class"}, {"_type": "tag", "name": "setup_source_config_for_package_install_signed", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/runtime/cases/apt.py", "pattern": "/^    def setup_source_config_for_package_install_signed(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "AptRepoTest", "scopeKind": "class"}, {"_type": "tag", "name": "tearDownClass", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/runtime/cases/apt.py", "pattern": "/^    def tearDownClass(cls):$/", "language": "Python", "kind": "member", "signature": "(cls)", "scope": "AptRepoTest", "scopeKind": "class"}, {"_type": "tag", "name": "test_apt_install_from_repo", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/runtime/cases/apt.py", "pattern": "/^    def test_apt_install_from_repo(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "AptRepoTest", "scopeKind": "class"}], "hash": "d41926c5ea29ee56e67dffd37b825956", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "openembedded-core/meta/lib/oeqa/runtime/cases/apt.py", "revision_history": [{"15139": ""}]}