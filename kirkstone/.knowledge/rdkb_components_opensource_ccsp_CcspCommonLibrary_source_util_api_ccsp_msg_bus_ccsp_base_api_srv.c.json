{"is_source_file": true, "format": "C", "description": "This source file defines the implementation of a D-Bus based API for managing CCSP components, including functions for setting callbacks, handling incoming method calls, signals, and event callbacks. It interacts with a message bus (likely D-Bus or rBus) to facilitate communication between components, and provides mechanisms for parameter management, component lifecycle, and diagnostics within the CCSP framework.", "external_files": ["ccsp_message_bus.h", "ccsp_base_api.h", "syslog.h", "pthread.h", "string.h", "time.h", "signal.h", "dslh_definitions_database.h", "ccsp_trace.h", "rbus_message_bus.h"], "external_methods": ["COSAGetMessageBusHandle", "CcspBaseIf_timeout_seconds", "CcspBaseIf_timeout_getval_seconds"], "published": ["CcspBaseIf_SetCallback", "CcspBaseIf_SetCallback2", "CcspBaseIf_base_path_message_func", "CcspBaseIf_evt_callback"], "classes": [], "methods": [{"name": "void CcspBaseIf_SetCallback(void * bus_handle,CCSP_Base_Func_CB * func)", "description": "Sets the callback functions for handling CCSP message bus events.", "scope": "", "scopeKind": ""}, {"name": "void CcspBaseIf_SetCallback2(void * bus_handle,char * name,void * func,void * user_data)", "description": "Binds specific callback functions to named API methods for the message bus.", "scope": "", "scopeKind": ""}, {"name": "DBusHandlerResult CcspBaseIf_base_path_message_func(DBusConnection * conn,DBusMessage * message,DBusMessage * reply,const char * interface,const char * method,CCSP_MESSAGE_BUS_INFO * bus_info)", "description": "Handles incoming D-Bus messages, dispatching to appropriate function callbacks based on interface and method names.", "scope": "", "scopeKind": ""}, {"name": "DBusHandlerResult CcspBaseIf_evt_callback(DBusConnection * conn,DBusMessage * message,void * user_data)", "description": "Handles bus signals and events such as component lifecycle, parameter changes, and custom signals, invoking registered callback functions.", "scope": "", "scopeKind": ""}, {"name": "handleMethod", "description": "Processes incoming method calls based on interface and method name, executing corresponding callback functions, handling signals, and managing D-Bus messages."}, {"name": "int handleValueChangeEvent_rbus(const char * object_name,const char * event_name,rbusMessage message,void * user_data)", "description": "Handles systemReady and parameter change signals received via rbus messages, invoking appropriate callbacks.", "scope": "", "scopeKind": ""}, {"name": "int CcspBaseIf_evt_callback_rbus(const char * object_name,const char * event_name,rbusMessage message,void * user_data)", "description": "Processes rbus events such as parameter value changes, device profile and session ID updates, system readiness, and system reboot signals.", "scope": "", "scopeKind": ""}, {"name": "void CcspBaseIf_Set_Default_Event_Callback(void * bus_handle,DBusObjectPathMessageFunction callback)", "description": "Sets a default callback function for unhandled D-Bus signals.", "scope": "", "scopeKind": ""}, {"name": "void CcspBaseIf_deadlock_detection_log_save(void)", "description": "Logs D-Bus calls for deadlock detection purposes, capturing various message types and parameters.", "scope": "", "scopeKind": ""}, {"name": "void CcspBaseIf_deadlock_detection_log_print(int sig)", "description": "Prints the deadlock detection log buffer to a file and stdout, triggered by signals or system events.", "scope": "", "scopeKind": ""}, {"name": "void sig_empty_handler(int sig)", "description": "Empty signal handler to safely ignore specific signals.", "scope": "", "scopeKind": ""}, {"name": "void * CcspBaseIf_Deadlock_Detection_Thread(void * user_data)", "description": "Monitors bus activity and detects deadlocks by checking the duration since last activity, printing logs and terminating process if deadlock is suspected.", "scope": "", "scopeKind": ""}, {"name": "time_t GetCurrentTime(void)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["dbus_message_get_args", "dbus_message_unref", "dbus_message_append_string", "dbus_message_init", "dbus_connection_send", "dbus_message_new_error", "clock_gettime", "time", "syslog", "pthread_mutex_lock", "pthread_mutex_unlock", "strcmp", "strstr", "snprintf", "fputs", "malloc", "free", "memset", "dbus_connection_has_messages_to_send", "dbus_connection_flush", "rbusMessage_GetString", "rbusMessage_GetInt32", "rbusMessage_GetBytes"], "search-terms": ["ccsp_base_api", "message bus", "d-bus callback", "parameter management", "component lifecycle", "signal handling", "busCheck", "parameterValueChangeSignal", "componentDie", "syslog", "ccsp_message_bus", "rbus event handling", "DBus method dispatch", "deadlock detection", "bus signal callback", "parameter change event", "system ready signal", "system reboot signal", "deadlock logging", "message bus API"], "state": 2, "file_id": 10218, "knowledge_revision": 23219, "git_revision": "", "ctags": [{"_type": "tag", "name": "Base_Introspect_msg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^static const char* Base_Introspect_msg =$/", "file": true, "language": "C", "typeref": "typename:const char *", "kind": "variable"}, {"_type": "tag", "name": "CCSP_DBUS_LARGE_REPLY_SIZE_MIN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^#define CCSP_DBUS_LARGE_REPLY_SIZE_MIN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "CCSP_DEADLOCK_DETECTION_ENTER", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^#define CCSP_DEADLOCK_DETECTION_ENTER(/", "file": true, "language": "C", "kind": "macro", "signature": "(messageType1,parameterArray,size1)"}, {"_type": "tag", "name": "CCSP_DEADLOCK_DETECTION_EXIT", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^#define CCSP_DEADLOCK_DETECTION_EXIT(/", "file": true, "language": "C", "kind": "macro", "signature": "(messageType1)"}, {"_type": "tag", "name": "CCSP_DEADLOCK_INFO_PRINT", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^#define CCSP_DEADLOCK_INFO_PRINT(/", "file": true, "language": "C", "kind": "macro", "signature": "(args...)"}, {"_type": "tag", "name": "CCSP_DEADLOCK_PRINT", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^#define CCSP_DEADLOCK_PRINT(/", "file": true, "language": "C", "kind": "macro", "signature": "(aaa)"}, {"_type": "tag", "name": "CCSP_DEADLOCK_PRINT_INTERNAL", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^#define  CCSP_DEADLOCK_PRINT_INTERNAL(/", "file": true, "language": "C", "kind": "macro", "signature": "(args...)"}, {"_type": "tag", "name": "CcspBaseIf_Deadlock_Detection_Thread", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^CcspBaseIf_Deadlock_Detection_Thread$/", "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "(void * user_data)"}, {"_type": "tag", "name": "CcspBaseIf_SetCallback", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^void CcspBaseIf_SetCallback$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void * bus_handle,CCSP_Base_Func_CB * func)"}, {"_type": "tag", "name": "CcspBaseIf_SetCallback2", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^void CcspBaseIf_SetCallback2$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void * bus_handle,char * name,void * func,void * user_data)"}, {"_type": "tag", "name": "CcspBaseIf_Set_Default_Event_Callback", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^void  CcspBaseIf_Set_Default_Event_Callback$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void * bus_handle,DBusObjectPathMessageFunction callback)"}, {"_type": "tag", "name": "CcspBaseIf_base_path_message_func", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^CcspBaseIf_base_path_message_func (DBusConnection  *conn,$/", "language": "C", "typeref": "typename:DBusHandlerResult", "kind": "function", "signature": "(DBusConnection * conn,DBusMessage * message,DBusMessage * reply,const char * interface,const char * method,CCSP_MESSAGE_BUS_INFO * bus_info)"}, {"_type": "tag", "name": "CcspBaseIf_deadlock_detection_log_print", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^CcspBaseIf_deadlock_detection_log_print$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(int sig)"}, {"_type": "tag", "name": "CcspBaseIf_deadlock_detection_log_save", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^void CcspBaseIf_deadlock_detection_log_save $/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "CcspBaseIf_deadlock_detection_time_getval_seconds", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^int   CcspBaseIf_deadlock_detection_time_getval_seconds = -1; \\/\\/will be reassigned by dbus ini/", "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "CcspBaseIf_deadlock_detection_time_normal_seconds", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^int   CcspBaseIf_deadlock_detection_time_normal_seconds = -1; \\/\\/will be reassigned by dbus ini/", "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "CcspBaseIf_evt_callback", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^CcspBaseIf_evt_callback (DBusConnection  *conn,$/", "language": "C", "typeref": "typename:DBusHandlerResult", "kind": "function", "signature": "(DBusConnection * conn,DBusMessage * message,void * user_data)"}, {"_type": "tag", "name": "CcspBaseIf_evt_callback_rbus", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^int CcspBaseIf_evt_callback_rbus(const char * object_name, const char * event_name, rbusMessage /", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(const char * object_name,const char * event_name,rbusMessage message,void * user_data)"}, {"_type": "tag", "name": "CcspBaseIf_timeout_protect_plus_seconds", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^int   CcspBaseIf_timeout_protect_plus_seconds    = 5;$/", "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "GetCurrentTime", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^static inline time_t GetCurrentTime(void)$/", "file": true, "language": "C", "typeref": "typename:time_t", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "MAX_DBUS_PARAM_SIZE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^#define MAX_DBUS_PARAM_SIZE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "MAX_EVENT_NAME_LEN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^#define MAX_EVENT_NAME_LEN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "deadlock_detection_enable", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^int deadlock_detection_enable                           = 0;$/", "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "deadlock_detection_info", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^CCSP_DEADLOCK_DETECTION_INFO    deadlock_detection_info = {{{0}}, NULL, NULL, 0, 0, 0, 0};;$/", "language": "C", "typeref": "typename:CCSP_DEADLOCK_DETECTION_INFO", "kind": "variable"}, {"_type": "tag", "name": "deadlock_detection_log", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^DEADLOCK_ARRAY*  deadlock_detection_log                 = NULL; \\/\\/this variable is protected b/", "language": "C", "typeref": "typename:DEADLOCK_ARRAY *", "kind": "variable"}, {"_type": "tag", "name": "deadlock_detection_log_index", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^unsigned int deadlock_detection_log_index               = 0;$/", "language": "C", "typeref": "typename:unsigned int", "kind": "variable"}, {"_type": "tag", "name": "handleValueChangeEvent_rbus", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^int handleValueChangeEvent_rbus(const char * object_name, const char * event_name, rbusMessage m/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(const char * object_name,const char * event_name,rbusMessage message,void * user_data)"}, {"_type": "tag", "name": "sig_empty_handler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "pattern": "/^void sig_empty_handler(int sig)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(int sig)"}], "hash": "a049f52c6e514239925381128879886b", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ccsp_msg_bus/ccsp_base_api_srv.c", "fields": [{"name": "const char * Base_Introspect_msg", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int CcspBaseIf_deadlock_detection_time_getval_seconds", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int CcspBaseIf_deadlock_detection_time_normal_seconds", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int CcspBaseIf_timeout_protect_plus_seconds", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int deadlock_detection_enable", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "CCSP_DEADLOCK_DETECTION_INFO deadlock_detection_info", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DEADLOCK_ARRAY * deadlock_detection_log", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "unsigned int deadlock_detection_log_index", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"23219": ""}]}