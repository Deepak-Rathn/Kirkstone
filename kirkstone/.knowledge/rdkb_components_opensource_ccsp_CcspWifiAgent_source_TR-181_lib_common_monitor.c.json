{"is_source_file": true, "format": "C", "description": "This file implements a process and thread monitoring mechanism, including process supervision, signal handling, counter checking for stuck processes/threads, and crash handling. It contains functions for starting the monitor, managing child processes, signal forwarding, and crash reporting.", "external_files": ["log.h", "os.h", "os_time.h", "osa_assert.h", "monitor.h"], "external_methods": ["task_name_get", "task_name_set", "ticks", "ticks_t", "SIG_IGN", "sigemptyset", "sigaction", "raise", "backtrace_dump"], "published": ["mon_checkin"], "classes": [], "methods": [{"name": "void mon_start(int argc,char * argv[])", "description": "Starts the monitoring process, forks a child process, installs signal handlers, and restarts the child if it terminates unexpectedly.", "scope": "", "scopeKind": ""}, {"name": "bool mon_process_wait(pid_t child,ticks_t timeout)", "description": "Waits for a process or process group to terminate within a specified timeout.", "scope": "", "scopeKind": ""}, {"name": "void mon_process_terminate(pid_t child)", "description": "Attempts to terminate a process group gracefully with SIGTERM, then forcefully with SIGKILL if necessary.", "scope": "", "scopeKind": ""}, {"name": "bool mon_check_process(pid_t child,int * exit_status)", "description": "Checks if a monitored child process is still running or has exited, and determines whether it should be restarted based on exit status or signals.", "scope": "", "scopeKind": ""}, {"name": "bool mon_check_counter(pid_t child,int * exit_status)", "description": "Checks heartbeat counters for monitored threads/processes, and aborts unresponsive ones by sending SIGABRT.", "scope": "", "scopeKind": ""}, {"name": "void mon_counter_reset(void)", "description": "Initializes or resets the shared memory counters used for monitoring activity.", "scope": "", "scopeKind": ""}, {"name": "void mon_install_parent_signals(void)", "description": "Installs signal handlers in the parent process to forward signals appropriately.", "scope": "", "scopeKind": ""}, {"name": "void mon_reset_parent_signals(void)", "description": "Resets signal handlers in the parent process to default.", "scope": "", "scopeKind": ""}, {"name": "void mon_install_child_signals(void)", "description": "Installs crash and fault signal handlers in the child process for crash reporting.", "scope": "", "scopeKind": ""}, {"name": "void mon_sig_crash(int signum)", "description": "Handles crash signals, logs signal info, dumps stack trace, and re-raises the signal to crash.", "scope": "", "scopeKind": ""}, {"name": "void mon_sig_forward(int signum)", "description": "Forwards received signals from parent to child process.", "scope": "", "scopeKind": ""}, {"name": "void mon_sig_str(int signum,char * sigstr,size_t sigstr_sz)", "description": "Converts a signal number into a descriptive string with signal name and description.", "scope": "", "scopeKind": ""}, {"name": "void mon_checkin(enum mon_cnt_id id,char * file,int line)", "description": "Increments a monitoring counter, recording the source file, line, and thread ID.", "scope": "", "scopeKind": ""}], "calls": ["mon_checkin", "task_name_get", "task_name_set", "ticks", "kill", "waitpid", "SIGTERM", "SIGKILL", "strsignal", "raise", "backtrace_dump", "log", "assert"], "search-terms": ["monitor", "process supervision", "signal handling", "process restart", "counter heartbeat", "crash reporting", "thread monitoring", "shared memory counters"], "state": 2, "file_id": 9238, "knowledge_revision": 22254, "git_revision": "", "ctags": [{"_type": "tag", "name": "MON_CHECKIN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^#define MON_CHECKIN(/", "file": true, "language": "C", "kind": "macro", "signature": "(id)"}, {"_type": "tag", "name": "MON_COUNTER_MAX", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^#define MON_COUNTER_MAX /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "MON_LOOP_DELAY", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^#define MON_LOOP_DELAY /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "MON_RESTART_DELAY", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^#define MON_RESTART_DELAY /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "MON_SIGSTR_SZ", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^#define MON_SIGSTR_SZ /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "MON_USE_TID_TO_KILL", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^#define MON_USE_TID_TO_KILL$/", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "amc_counter", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^    uint32_t        amc_counter;        \\/**< Counter                                 *\\/$/", "file": true, "language": "C", "typeref": "typename:uint32_t", "kind": "member", "scope": "mon_counter", "scopeKind": "struct"}, {"_type": "tag", "name": "amc_file", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^    char            amc_file[64];       \\/**< Filename:line of last check-in          *\\/$/", "file": true, "language": "C", "typeref": "typename:char[64]", "kind": "member", "scope": "mon_counter", "scopeKind": "struct"}, {"_type": "tag", "name": "amc_thread_id", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^    pid_t           amc_thread_id;      \\/**< Linux specific, thread ID               *\\/$/", "file": true, "language": "C", "typeref": "typename:pid_t", "kind": "member", "scope": "mon_counter", "scopeKind": "struct"}, {"_type": "tag", "name": "mon_check_counter", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^bool mon_check_counter(pid_t child, int *exit_status)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(pid_t child,int * exit_status)"}, {"_type": "tag", "name": "mon_check_process", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^bool mon_check_process(pid_t child, int *exit_status)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(pid_t child,int * exit_status)"}, {"_type": "tag", "name": "mon_checkin", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^void mon_checkin(enum mon_cnt_id id, char *file, int line)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(enum mon_cnt_id id,char * file,int line)"}, {"_type": "tag", "name": "mon_counter", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^struct mon_counter$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "mon_counter_list", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^static struct mon_counter *mon_counter_list       = NULL;$/", "file": true, "language": "C", "typeref": "struct:mon_counter *", "kind": "variable"}, {"_type": "tag", "name": "mon_counter_reset", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^void mon_counter_reset(void)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "mon_install_child_signals", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^void mon_install_child_signals(void)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "mon_install_parent_signals", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^void mon_install_parent_signals(void)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "mon_process_terminate", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^void mon_process_terminate(pid_t child)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(pid_t child)"}, {"_type": "tag", "name": "mon_process_wait", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^bool mon_process_wait(pid_t child, ticks_t timeout)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(pid_t child,ticks_t timeout)"}, {"_type": "tag", "name": "mon_reset_parent_signals", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^void mon_reset_parent_signals(void)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "mon_sig_crash", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^void mon_sig_crash(int signum)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(int signum)"}, {"_type": "tag", "name": "mon_sig_forward", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^void mon_sig_forward(int signum)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(int signum)"}, {"_type": "tag", "name": "mon_sig_forward_pid", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^static pid_t                    mon_sig_forward_pid    = 0;$/", "file": true, "language": "C", "typeref": "typename:pid_t", "kind": "variable"}, {"_type": "tag", "name": "mon_sig_str", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^void mon_sig_str(int signum, char *sigstr, size_t sigstr_sz)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(int signum,char * sigstr,size_t sigstr_sz)"}, {"_type": "tag", "name": "mon_start", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "pattern": "/^void mon_start(int argc, char *argv[])$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(int argc,char * argv[])"}], "hash": "65d38f4cbda7059d8dae6f4da9a93e0f", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/CcspWifiAgent/source/TR-181/lib/common/monitor.c", "fields": [{"name": "uint32_t amc_counter", "scope": "mon_counter", "scopeKind": "struct", "description": "unavailable"}, {"name": "char[64] amc_file", "scope": "mon_counter", "scopeKind": "struct", "description": "unavailable"}, {"name": "pid_t amc_thread_id", "scope": "mon_counter", "scopeKind": "struct", "description": "unavailable"}, {"name": "struct:mon_counter * mon_counter_list", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pid_t mon_sig_forward_pid", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"22254": ""}]}