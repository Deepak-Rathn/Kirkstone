{"is_source_file": true, "format": "C", "description": "This file implements HTTP download functionality for device firmware updates, including setting URLs, handling download retries, rebooting, LED flashing, checking device states, and parsing command-line arguments to perform respective actions in an embedded or network device environment.", "external_files": ["telemetry_busmessage_sender.h", "syscfg/syscfg.h", "cm_hal.h", "safec_lib_common.h", "sys/stat.h", "secure_wrapper.h", "dpoe_hal.h", "sysevent/sysevent.h"], "external_methods": ["fwupgrade_hal_set_download_url", "cm_hal_Set_HTTP_Download_Url", "fwupgrade_hal_get_download_url", "cm_hal_Get_HTTP_Download_Url", "stat", "fwupgrade_hal_reboot_ready", "cm_hal_Reboot_Ready", "fwupgrade_hal_download", "cm_hal_HTTP_Download", "fwupgrade_hal_get_download_status", "cm_hal_Get_HTTP_Download_Status", "fwupgrade_hal_download_reboot_now", "cm_hal_HTTP_Download_Reboot_Now", "fwupgrade_hal_led_flash", "cm_hal_HTTP_LED_Flash", "fwupgrade_hal_set_download_interface", "cm_hal_Set_HTTP_Download_Interface", "sysevent_open", "sysevent_set", "sysevent_close", "v_secure_system", "cm_hal_FWupdateAndFactoryReset", "cm_hal_Get_HTTP_Download_Status"], "published": ["Set_HTTP_Download_Url", "filePresentCheck", "isStateRedSupported", "isInStateRed", "checkAndEnterStateRed", "HTTP_Download", "Reboot_Ready", "HTTP_Download_Reboot_Now", "HTTP_LED_Flash"], "classes": [], "methods": [{"name": "INT Set_HTTP_Download_Url(char * pHttpUrl,char * pfilename)", "description": "Sets the HTTP download URL and retrieves the set URL to verify the change.", "scope": "", "scopeKind": ""}, {"name": "int filePresentCheck(const char * file_name)", "description": "Checks if a specified file exists on the filesystem.", "scope": "", "scopeKind": ""}, {"name": "int isStateRedSupported()", "description": "Checks whether the device supports state red recovery by verifying the presence of a specific script.", "scope": "", "scopeKind": ""}, {"name": "int isInStateRed()", "description": "Checks if the device is currently in a state red condition based on the presence of a specific file.", "scope": "", "scopeKind": ""}, {"name": "void checkAndEnterStateRed()", "description": "Checks device state and sets the red recovery flag if applicable, based on current conditions and curl status.", "scope": "", "scopeKind": ""}, {"name": "INT HTTP_Download()", "description": "Performs HTTP download with retries, checks download status, and handles success or failure scenarios including LED and device state updates.", "scope": "", "scopeKind": ""}, {"name": "INT Reboot_Ready(LONG * pValue)", "description": "Checks if the device is ready to reboot, delegating to hardware or firmware-specific implementations.", "scope": "", "scopeKind": ""}, {"name": "INT HTTP_Download_Reboot_Now()", "description": "Commands the device to reboot immediately after download.", "scope": "", "scopeKind": ""}, {"name": "INT HTTP_LED_Flash(int LEDFlashState)", "description": "Controls device LED flashing state for visual indication.", "scope": "", "scopeKind": ""}, {"name": "int get_argument_type_from_argv(char * name,enum ArgumentType_Xconf_e * type_ptr)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int main(int argc,char * argv[])", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fwupgrade_hal_set_download_url", "cm_hal_Set_HTTP_Download_Url", "fwupgrade_hal_get_download_url", "cm_hal_Get_HTTP_Download_Url", "stat", "fwupgrade_hal_reboot_ready", "cm_hal_Reboot_Ready", "fwupgrade_hal_download", "cm_hal_HTTP_Download", "fwupgrade_hal_get_download_status", "cm_hal_Get_HTTP_Download_Status", "fwupgrade_hal_download_reboot_now", "cm_hal_HTTP_Download_Reboot_Now", "fwupgrade_hal_led_flash", "cm_hal_HTTP_LED_Flash", "sysevent_open", "sysevent_set", "sysevent_close", "v_secure_system", "cm_hal_FWupdateAndFactoryReset"], "search-terms": ["XCONF", "HTTP", "Download", "FactoryReset", "stateRed", "LED", "reboot", "Firmware", "HTTP URL", "Retry"], "state": 2, "file_id": 8159, "knowledge_revision": 21236, "git_revision": "", "ctags": [{"_type": "tag", "name": "ARGUMENT_TYPE_PAIR_FOR_XCONF", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^} ARGUMENT_TYPE_PAIR_FOR_XCONF;$/", "file": true, "language": "C", "typeref": "struct:ArgumentType_Pair_For_Xconf", "kind": "typedef"}, {"_type": "tag", "name": "ArgumentType_Pair_For_Xconf", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^typedef struct ArgumentType_Pair_For_Xconf{$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "ArgumentType_Xconf_e", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^enum ArgumentType_Xconf_e {$/", "file": true, "language": "C", "kind": "enum"}, {"_type": "tag", "name": "CM_FILENAME_LEN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^#define CM_FILENAME_LEN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "CM_HTTPURL_LEN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^#define CM_HTTPURL_LEN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "FW_DOWNLOAD_START_EVENT", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^#define FW_DOWNLOAD_START_EVENT /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "FW_UPDATE_COMPLETE_EVENT", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^#define FW_UPDATE_COMPLETE_EVENT /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "FW_UPDATE_STOP_EVENT", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^#define FW_UPDATE_STOP_EVENT /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "HTTP_DOWNLOAD", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^    HTTP_DOWNLOAD,$/", "file": true, "language": "C", "kind": "enumerator", "scope": "ArgumentType_Xconf_e", "scopeKind": "enum"}, {"_type": "tag", "name": "HTTP_Download", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^INT HTTP_Download ()$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "HTTP_Download_Reboot_Now", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^INT HTTP_Download_Reboot_Now ()$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "HTTP_FLASH_LED", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^    HTTP_FLASH_LED,$/", "file": true, "language": "C", "kind": "enumerator", "scope": "ArgumentType_Xconf_e", "scopeKind": "enum"}, {"_type": "tag", "name": "HTTP_LED_Flash", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^INT HTTP_LED_Flash ( int LEDFlashState )$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "(int LEDFlashState)"}, {"_type": "tag", "name": "HTTP_REBOOT", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^    HTTP_REBOOT,$/", "file": true, "language": "C", "kind": "enumerator", "scope": "ArgumentType_Xconf_e", "scopeKind": "enum"}, {"_type": "tag", "name": "HTTP_REBOOT_STATUS", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^    HTTP_REBOOT_STATUS,$/", "file": true, "language": "C", "kind": "enumerator", "scope": "ArgumentType_Xconf_e", "scopeKind": "enum"}, {"_type": "tag", "name": "LONG", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^#define LONG /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "NUM_OF_ARGUMENT_TYPES", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^#define NUM_OF_ARGUMENT_TYPES /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "RETRY_HTTP_DOWNLOAD_LIMIT", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^#define RETRY_HTTP_DOWNLOAD_LIMIT /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "RETURN_OK", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^#define RETURN_OK /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "Reboot_Ready", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^INT Reboot_Ready(LONG *pValue)$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "(LONG * pValue)"}, {"_type": "tag", "name": "SET_HTTP_URL", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^    SET_HTTP_URL,$/", "file": true, "language": "C", "kind": "enumerator", "scope": "ArgumentType_Xconf_e", "scopeKind": "enum"}, {"_type": "tag", "name": "SYSEVENT_LED_STATE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^#define SYSEVENT_LED_STATE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SYS_IP_ADDR", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^#define SYS_IP_ADDR /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "Set_HTTP_Download_Url", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^INT Set_HTTP_Download_Url(char *pHttpUrl, char *pfilename) {$/", "language": "C", "typeref": "typename:INT", "kind": "function", "signature": "(char * pHttpUrl,char * pfilename)"}, {"_type": "tag", "name": "UPGRADE_FACTORYRESET", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^    UPGRADE_FACTORYRESET$/", "file": true, "language": "C", "kind": "enumerator", "scope": "ArgumentType_Xconf_e", "scopeKind": "enum"}, {"_type": "tag", "name": "argument_type_xconf_table", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^ARGUMENT_TYPE_PAIR_FOR_XCONF argument_type_xconf_table[] = {$/", "language": "C", "typeref": "typename:ARGUMENT_TYPE_PAIR_FOR_XCONF[]", "kind": "variable"}, {"_type": "tag", "name": "checkAndEnterStateRed", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^void checkAndEnterStateRed()$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "filePresentCheck", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^int filePresentCheck(const char *file_name)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(const char * file_name)"}, {"_type": "tag", "name": "get_argument_type_from_argv", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^static int get_argument_type_from_argv(char *name, enum ArgumentType_Xconf_e *type_ptr)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * name,enum ArgumentType_Xconf_e * type_ptr)"}, {"_type": "tag", "name": "isInStateRed", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^int isInStateRed()$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "isStateRedSupported", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^int isStateRedSupported()$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "main", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^int main(int argc,char *argv[])$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(int argc,char * argv[])"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^  char                 *name;$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "ArgumentType_Pair_For_Xconf", "scopeKind": "struct"}, {"_type": "tag", "name": "retry_limit", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^int retry_limit = 0;$/", "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "sysevent_led_fd", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^int sysevent_led_fd = -1;$/", "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "sysevent_led_token", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^token_t sysevent_led_token;$/", "language": "C", "typeref": "typename:token_t", "kind": "variable"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "pattern": "/^  enum ArgumentType_Xconf_e  type;$/", "file": true, "language": "C", "typeref": "enum:ArgumentType_Xconf_e", "kind": "member", "scope": "ArgumentType_Pair_For_Xconf", "scopeKind": "struct"}], "hash": "cb5bef85cdcc85b52a74ecce73a44f8d", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/Xconf/source/cm_http_dl.c", "fields": [{"name": "ARGUMENT_TYPE_PAIR_FOR_XCONF[] argument_type_xconf_table", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char * name", "scope": "ArgumentType_Pair_For_Xconf", "scopeKind": "struct", "description": "unavailable"}, {"name": "int retry_limit", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int sysevent_led_fd", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "token_t sysevent_led_token", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "enum:ArgumentType_Xconf_e type", "scope": "ArgumentType_Pair_For_Xconf", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"21236": ""}]}