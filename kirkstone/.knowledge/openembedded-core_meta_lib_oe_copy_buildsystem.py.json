{"is_source_file": true, "format": "Python", "description": "This source file provides utility functions and a class for managing build systems in the context of Yocto/BitBake recipes. It includes functions for copying build layers, generating locked signatures, pruning locked signatures, creating sstate cache, and checking sstate task lists. The main class, BuildSystem, manages copying layers and related operations.", "external_files": ["os", "shutil", "subprocess", "re", "bb.utils", "bb.note", "bb.process"], "external_methods": ["bb.utils.mkdirhier", "bb.note", "bb.parse.siggen.dump_lockedsigs", "bb.process.run"], "published": ["generate_locked_sigs", "prune_lockedsigs", "merge_lockedsigs", "create_locked_sstate_cache", "check_sstate_task_list"], "classes": [{"name": "BuildSystem", "description": "A class that manages the copying of build layers, configuration, and setup for Yocto build environment, including handling exclusions and workspace layers."}], "methods": [{"name": "_smart_copy(src, dest)", "description": "Copies a file or directory from src to dest intelligently, handling directories with tar and files with shutil.copyfile.", "scope": "", "scopeKind": ""}, {"name": "copy_bitbake_and_layers(self, destdir, workspace_name=None)", "description": "Copies BitBake and layer directories into a specified destination directory, supporting filtering by exclusion patterns and handling workspace layers.", "scope": "BuildSystem", "scopeKind": "class"}, {"name": "generate_locked_sigs(sigfile, d)", "description": "Generates a locked signature file based on task dependencies in the build system.", "scope": "", "scopeKind": ""}, {"name": "prune_lockedsigs(excluded_tasks, excluded_targets, lockedsigs, onlynative, pruned_output)", "description": "Filters a locked signatures file to exclude specific tasks and targets.", "scope": "", "scopeKind": ""}, {"name": "merge_lockedsigs(copy_tasks, lockedsigs_main, lockedsigs_extra, merged_output, copy_output=None)", "description": "Merges main and extra locked signatures files, optionally copying specific tasks.", "scope": "", "scopeKind": ""}, {"name": "create_locked_sstate_cache(lockedsigs, input_sstate_cache, output_sstate_cache, d, fixedlsbstring=\"\", filterfile=None)", "description": "Creates a sstate cache based on locked signatures, possibly fixing LSB string mismatches.", "scope": "", "scopeKind": ""}, {"name": "check_sstate_task_list(d, targets, filteroutfile, cmdprefix='', cwd=None, logfile=None)", "description": "Runs a process to generate an sstate task list for specified targets, logging output.", "scope": "", "scopeKind": ""}, {"name": "__init__(self, context, d)", "scope": "BuildSystem", "scopeKind": "class", "description": "unavailable"}, {"name": "write_sigs_file(fn, types, sigs)", "scope": "merge_lockedsigs", "scopeKind": "function", "description": "unavailable"}], "calls": ["os.stat", "subprocess.check_output", "shutil.copyfile", "shutil.copymode", "os.path.abspath", "d.getVar", "re.match", "bb.note", "bb.parse.siggen.dump_lockedsigs", "bb.process.run", "bb.utils.mkdirhier"], "search-terms": ["BuildSystem", "layers", "copy layers", "locked signatures", "sstate cache", "Yocto", "BitBake", "layer.conf", "workspace layers"], "state": 2, "file_id": 1810, "knowledge_revision": 14954, "git_revision": "", "ctags": [{"_type": "tag", "name": "BuildSystem", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/copy_buildsystem.py", "pattern": "/^class BuildSystem(object):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/copy_buildsystem.py", "pattern": "/^    def __init__(self, context, d):$/", "language": "Python", "kind": "member", "signature": "(self, context, d)", "scope": "BuildSystem", "scopeKind": "class"}, {"_type": "tag", "name": "_smart_copy", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/copy_buildsystem.py", "pattern": "/^def _smart_copy(src, dest):$/", "language": "Python", "kind": "function", "signature": "(src, dest)"}, {"_type": "tag", "name": "check_sstate_task_list", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/copy_buildsystem.py", "pattern": "/^def check_sstate_task_list(d, targets, filteroutfile, cmdprefix='', cwd=None, logfile=None):$/", "language": "Python", "kind": "function", "signature": "(d, targets, filteroutfile, cmdprefix='', cwd=None, logfile=None)"}, {"_type": "tag", "name": "copy_bitbake_and_layers", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/copy_buildsystem.py", "pattern": "/^    def copy_bitbake_and_layers(self, destdir, workspace_name=None):$/", "language": "Python", "kind": "member", "signature": "(self, destdir, workspace_name=None)", "scope": "BuildSystem", "scopeKind": "class"}, {"_type": "tag", "name": "create_locked_sstate_cache", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/copy_buildsystem.py", "pattern": "/^def create_locked_sstate_cache(lockedsigs, input_sstate_cache, output_sstate_cache, d, fixedlsbs/", "language": "Python", "kind": "function", "signature": "(lockedsigs, input_sstate_cache, output_sstate_cache, d, fixedlsbstring=\"\", filterfile=None)"}, {"_type": "tag", "name": "generate_locked_sigs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/copy_buildsystem.py", "pattern": "/^def generate_locked_sigs(sigfile, d):$/", "language": "Python", "kind": "function", "signature": "(sigfile, d)"}, {"_type": "tag", "name": "merge_lockedsigs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/copy_buildsystem.py", "pattern": "/^def merge_lockedsigs(copy_tasks, lockedsigs_main, lockedsigs_extra, merged_output, copy_output=N/", "language": "Python", "kind": "function", "signature": "(copy_tasks, lockedsigs_main, lockedsigs_extra, merged_output, copy_output=None)"}, {"_type": "tag", "name": "prune_lockedsigs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/copy_buildsystem.py", "pattern": "/^def prune_lockedsigs(excluded_tasks, excluded_targets, lockedsigs, onlynative, pruned_output):$/", "language": "Python", "kind": "function", "signature": "(excluded_tasks, excluded_targets, lockedsigs, onlynative, pruned_output)"}, {"_type": "tag", "name": "write_sigs_file", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/copy_buildsystem.py", "pattern": "/^    def write_sigs_file(fn, types, sigs):$/", "file": true, "language": "Python", "kind": "function", "signature": "(fn, types, sigs)", "scope": "merge_lockedsigs", "scopeKind": "function"}], "hash": "277f94e6014541d9f06f501a602a8190", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "openembedded-core/meta/lib/oe/copy_buildsystem.py", "revision_history": [{"14954": ""}]}