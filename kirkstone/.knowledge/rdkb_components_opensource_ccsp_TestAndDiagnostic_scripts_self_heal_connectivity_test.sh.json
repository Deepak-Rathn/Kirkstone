{"is_source_file": true, "format": "Shell script", "description": "This file is a shell script designed to perform self-healing connectivity tests on a network device. It includes functions for ping tests, DNS resolution, and corrective actions, and runs in a loop while self-healing is enabled.", "external_files": ["/usr/ccsp/tad/corrective_action.sh", "/etc/waninfo.sh"], "external_methods": ["getWanInterfaceName", "syscfg get ConnTest_CorrectiveAction", "syscfg get selfheal_dns_pingtest_enable", "syscfg get selfheal_dns_pingtest_url", "syscfg get selfheal_ping_DataBlockSize", "syscfg get ConnTest_NumPingsPerServer", "syscfg get ConnTest_PingRespWaitTime", "sysevent get default_router", "sysevent get ipoe_health_check_ipv4_status", "sysevent get ipoe_health_check_ipv6_status", "sysevent get mapt_config_flag", "sysevent get wan-status", "sysevent get last_erouter_mode"], "published": ["SELFHEAL_ENABLE"], "classes": [], "methods": [{"name": "getCorrectiveActionState", "description": "Retrieves the current state of corrective action setting from syscfg."}, {"name": "calcRandTimetoStartPing", "description": "Calculates a random delay time and puts the script into sleep for that duration before starting tests."}, {"name": "removehttp", "description": "Removes the http/https protocol prefix from a URL to extract the domain."}, {"name": "runDNSPingTest", "description": "Performs a DNS resolution test and initiates corrective action if DNS resolution fails."}, {"name": "runPingTest", "description": "Performs network connectivity tests including pinging the default gateway and configured servers for both IPv4 and IPv6, and triggers corrective actions if tests fail."}], "calls": ["getWanInterfaceName", "syscfg get ConnTest_CorrectiveAction", "syscfg get selfheal_dns_pingtest_enable", "syscfg get selfheal_dns_pingtest_url", "syscfg get selfheal_ping_DataBlockSize", "syscfg get ConnTest_NumPingsPerServer", "syscfg get ConnTest_PingRespWaitTime", "syscfg get Ipv4PingServer_Count", "syscfg get Ipv6PingServer_Count", "syscfg get Ipv4_PingServer_", "syscfg get Ipv6_PingServer_", "sysevent get default_router", "sysevent get ipoe_health_check_ipv4_status", "sysevent get ipoe_health_check_ipv6_status", "sysevent get mapt_config_flag", "sysevent get wan-status", "sysevent get last_erouter_mode", "resetNeeded", "echo_t", "t2CountNotify"], "search-terms": ["self_heal_connectivity_test", "DNS_PING_TEST_URL", "runDNSPingTest", "runPingTest", "corrective_action.sh", "ICMP", "selfheal", "network connectivity", "gateway ping", "IPv6 ping", "IPv4 ping", "self-healing script"], "state": 2, "file_id": 9107, "knowledge_revision": 22129, "git_revision": "", "hash": "77bc6329e11ab44260126182ba092bb0", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/TestAndDiagnostic/scripts/self_heal_connectivity_test.sh", "revision_history": [{"22129": ""}]}