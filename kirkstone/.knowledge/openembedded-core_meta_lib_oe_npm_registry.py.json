{"is_source_file": true, "format": "Python", "description": "This Python script manages npm package metadata, including URI encoding, manifest creation and handling, caching, and registry interactions for npm packages, specifically in the context of the openembedded build system.", "external_files": ["bb.utils"], "external_methods": ["bb.utils.lockfile", "bb.utils.unlockfile", "bb.utils.mkdirhier"], "published": ["PackageJson", "Manifest", "ManifestImpl", "NpmCache", "NpmRegistry", "uri_quote"], "classes": [{"name": "PackageJson", "description": "Represents an npm package's JSON specification and provides methods to generate manifest entries and filenames."}, {"name": "ManifestImpl", "description": "Handles loading and saving of package manifest data to a file."}, {"name": "Manifest", "description": "Context manager that provides access to a ManifestImpl instance with automatic locking."}, {"name": "NpmCache", "description": "Manages npm cache directory and runs cache-related subprocess commands."}, {"name": "NpmRegistry", "description": "Handles interactions with the npm registry including generating URLs and adding packages."}], "methods": [{"name": "uri_quote(s, safe = '/')", "description": "Encodes a string into a URI component, encoding unsafe characters as percent-encoded sequences.", "scope": "", "scopeKind": ""}, {"name": "PackageJson.__init__", "description": "Initializes a PackageJson instance with a given specification."}, {"name": "PackageJson.name", "description": "Returns the name of the package."}, {"name": "PackageJson.version", "description": "Returns the version of the package."}, {"name": "PackageJson.empty_manifest", "description": "Returns an empty manifest dictionary with default values, using current package info."}, {"name": "PackageJson.base_filename", "description": "Returns a URI-encoded filename for the package, safe for filesystem paths."}, {"name": "PackageJson.as_manifest_entry", "description": "Creates and returns a package manifest entry dictionary including distribution information."}, {"name": "ManifestImpl.load", "description": "Loads manifest data from the associated file, with fallback to empty if file read fails."}, {"name": "ManifestImpl.save", "description": "Saves the provided metadata dictionary to the manifest file."}, {"name": "Manifest.__enter__", "description": "Locks the manifest for safe concurrent access and returns the ManifestImpl instance."}, {"name": "Manifest.__exit__", "description": "Releases the lock when exiting the context."}, {"name": "NpmCache.run", "description": "Runs a cache-related subprocess command with given parameters."}, {"name": "NpmRegistry._meta_uri", "description": "Generates the URL for the registry metadata of a given package specification."}, {"name": "NpmRegistry._tarball_uri", "description": "Generates the tarball URL for a package's version in the registry."}, {"name": "NpmRegistry.add_pkg", "description": "Adds a package tarball and JSON data to the registry, updating manifests and cache entries."}, {"name": "__enter__(self)", "scope": "Manifest", "scopeKind": "class", "description": "unavailable"}, {"name": "__exit__(self, exc_type, exc_val, exc_tb)", "scope": "Manifest", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, base_fname, spec)", "scope": "ManifestImpl", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, cache)", "scope": "NpmCache", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, path, cache)", "scope": "NpmRegistry", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, spec)", "scope": "PackageJson", "scopeKind": "class", "description": "unavailable"}, {"name": "_meta_uri(spec)", "scope": "NpmRegistry", "scopeKind": "class", "description": "unavailable"}, {"name": "_tarball_uri(spec)", "scope": "NpmRegistry", "scopeKind": "class", "description": "unavailable"}, {"name": "add_pkg(self, tarball, pkg_json)", "scope": "NpmRegistry", "scopeKind": "class", "description": "unavailable"}, {"name": "as_manifest_entry(self, tarball_uri)", "scope": "PackageJson", "scopeKind": "class", "description": "unavailable"}, {"name": "base_filename(self)", "scope": "PackageJson", "scopeKind": "class", "description": "unavailable"}, {"name": "empty_manifest(self)", "scope": "PackageJson", "scopeKind": "class", "description": "unavailable"}, {"name": "filename(self)", "scope": "ManifestImpl", "scopeKind": "class", "description": "unavailable"}, {"name": "load(self)", "scope": "ManifestImpl", "scopeKind": "class", "description": "unavailable"}, {"name": "name(self)", "scope": "PackageJson", "scopeKind": "class", "description": "unavailable"}, {"name": "path(self)", "scope": "NpmCache", "scopeKind": "class", "description": "unavailable"}, {"name": "run(self, type, key, fname)", "scope": "NpmCache", "scopeKind": "class", "description": "unavailable"}, {"name": "save(self, meta)", "scope": "ManifestImpl", "scopeKind": "class", "description": "unavailable"}, {"name": "version(self)", "scope": "PackageJson", "scopeKind": "class", "description": "unavailable"}], "calls": ["json.load", "json.dump", "subprocess.run", "bb.utils.lockfile", "bb.utils.unlockfile", "bb.utils.mkdirhier"], "search-terms": ["npm_registry", "PackageJson", "Manifest", "meta", "tarball_uri", "add_pkg", "registry"], "state": 2, "file_id": 1827, "knowledge_revision": 14984, "git_revision": "", "ctags": [{"_type": "tag", "name": "MISSING_OK", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^MISSING_OK = object()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Manifest", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^class Manifest:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ManifestImpl", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^class ManifestImpl:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NpmCache", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^class NpmCache:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NpmRegistry", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^class NpmRegistry:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PackageJson", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^class PackageJson:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "REGISTRY", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^REGISTRY = \"https:\\/\\/registry.npmjs.org\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_ALWAYS_SAFE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^_ALWAYS_SAFE = frozenset('ABCDEFGHIJKLMNOPQRSTUVWXYZ'$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "__enter__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^    def __enter__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Manifest", "scopeKind": "class"}, {"_type": "tag", "name": "__exit__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^    def __exit__(self, exc_type, exc_val, exc_tb):$/", "language": "Python", "kind": "member", "signature": "(self, exc_type, exc_val, exc_tb)", "scope": "Manifest", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^    def __init__(self, base_fname, spec):$/", "language": "Python", "kind": "member", "signature": "(self, base_fname, spec)", "scope": "Manifest", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^    def __init__(self, base_fname, spec):$/", "language": "Python", "kind": "member", "signature": "(self, base_fname, spec)", "scope": "ManifestImpl", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^    def __init__(self, cache):$/", "language": "Python", "kind": "member", "signature": "(self, cache)", "scope": "NpmCache", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^    def __init__(self, path, cache):$/", "language": "Python", "kind": "member", "signature": "(self, path, cache)", "scope": "NpmRegistry", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^    def __init__(self, spec):$/", "language": "Python", "kind": "member", "signature": "(self, spec)", "scope": "PackageJson", "scopeKind": "class"}, {"_type": "tag", "name": "_meta_uri", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^    def _meta_uri(spec):$/", "language": "Python", "kind": "member", "signature": "(spec)", "scope": "NpmRegistry", "scopeKind": "class"}, {"_type": "tag", "name": "_tarball_uri", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^    def _tarball_uri(spec):$/", "language": "Python", "kind": "member", "signature": "(spec)", "scope": "NpmRegistry", "scopeKind": "class"}, {"_type": "tag", "name": "add_pkg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^    def add_pkg(self, tarball, pkg_json):$/", "language": "Python", "kind": "member", "signature": "(self, tarball, pkg_json)", "scope": "NpmRegistry", "scopeKind": "class"}, {"_type": "tag", "name": "as_manifest_entry", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^    def as_manifest_entry(self, tarball_uri):$/", "language": "Python", "kind": "member", "signature": "(self, tarball_uri)", "scope": "PackageJson", "scopeKind": "class"}, {"_type": "tag", "name": "base_filename", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^    def base_filename(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PackageJson", "scopeKind": "class"}, {"_type": "tag", "name": "empty_manifest", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^    def empty_manifest(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PackageJson", "scopeKind": "class"}, {"_type": "tag", "name": "filename", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^    def filename(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ManifestImpl", "scopeKind": "class"}, {"_type": "tag", "name": "load", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^    def load(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ManifestImpl", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^    def name(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PackageJson", "scopeKind": "class"}, {"_type": "tag", "name": "path", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^    def path(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "NpmCache", "scopeKind": "class"}, {"_type": "tag", "name": "run", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^    def run(self, type, key, fname):$/", "language": "Python", "kind": "member", "signature": "(self, type, key, fname)", "scope": "NpmCache", "scopeKind": "class"}, {"_type": "tag", "name": "save", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^    def save(self, meta):$/", "language": "Python", "kind": "member", "signature": "(self, meta)", "scope": "ManifestImpl", "scopeKind": "class"}, {"_type": "tag", "name": "uri_quote", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^def uri_quote(s, safe = '\\/'):$/", "language": "Python", "kind": "function", "signature": "(s, safe = '/')"}, {"_type": "tag", "name": "version", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/npm_registry.py", "pattern": "/^    def version(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PackageJson", "scopeKind": "class"}], "hash": "0d1dbb6c09091881785737906f0316da", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "openembedded-core/meta/lib/oe/npm_registry.py", "fields": [{"name": "MISSING_OK = object()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "REGISTRY = \"https:\\/\\/registry.npmjs.org\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_ALWAYS_SAFE = frozenset('ABCDEFGHIJKLMNOPQRSTUVWXYZ'", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"14984": ""}]}