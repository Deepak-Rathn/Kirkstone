{"is_source_file": true, "format": "Python", "description": "This is a source code file for a package management module in a build system, containing utility functions, abstract base classes, and logic for package querying, index creation, and package installation workflows.", "external_files": ["bb", "oe.utils", "oe.path", "oe.gpg_sign", "oe.package_manager.rpm", "oe.package_manager.ipk", "oe.package_manager.deb"], "external_methods": ["bb.note", "bb.fatal", "bb.debug", "bb.utils.remove", "bb.utils.mkdirhier", "bb.utils.lockfile", "bb.utils.unlockfile", "bb.utils.copyfile", "oe.sstatesig.find_sstate_manifest", "oe.utils.format_pkg_list", "oe.path.join", "oe.path.which_wild", "oe.path.symlink"], "published": ["create_index", "opkg_query", "failed_postinsts_abort", "generate_locale_archive", "create_packages_dir", "generate_index_files"], "classes": [{"name": "Indexer", "description": "Abstract base class for generating package index files, using metaclass ABCMeta."}, {"name": "PkgsList", "description": "Abstract base class for listing installed packages, using metaclass ABCMeta."}, {"name": "PackageManager", "description": "Abstract class defining core package manager operations like update, install, remove, and intercept handling, with a complex initialization and lock management."}], "methods": [{"name": "create_index(arg)", "description": "Executes an index creation command in a subprocess and logs its output.", "scope": "", "scopeKind": ""}, {"name": "opkg_query(cmd_output)", "description": "Parses package manager output in deb/ipk format into a dictionary of package info.", "scope": "", "scopeKind": ""}, {"name": "failed_postinsts_abort(pkgs, log_path)", "description": "Terminates build with an error message when post-install scripts fail.", "scope": "", "scopeKind": ""}, {"name": "generate_locale_archive(d, rootfs, target_arch, localedir)", "description": "Creates locale archives for the specified architecture and localedir.", "scope": "", "scopeKind": ""}, {"name": "create_packages_dir(d, subrepo_dir, deploydir, taskname, filterbydependencies)", "description": "Collects and links package files into a repository directory based on dependencies.", "scope": "", "scopeKind": ""}, {"name": "generate_index_files(d)", "description": "Creates package index files for RPM, IPK, and DEB packages by invoking corresponding indexer classes.", "scope": "", "scopeKind": ""}, {"name": "__init__(self, d, deploy_dir)", "scope": "Indexer", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, d, rootfs_dir)", "scope": "PkgsList", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, d, target_rootfs)", "scope": "PackageManager", "scopeKind": "class", "description": "unavailable"}, {"name": "_append(arr1, arr2, sep='/')", "scope": "PackageManager.construct_uris", "scopeKind": "member", "description": "unavailable"}, {"name": "_handle_intercept_failure(self, failed_script)", "scope": "PackageManager", "scopeKind": "class", "description": "unavailable"}, {"name": "_initialize_intercepts(self)", "scope": "PackageManager", "scopeKind": "class", "description": "unavailable"}, {"name": "_postpone_to_first_boot(self, postinst_intercept_hook)", "scope": "PackageManager", "scopeKind": "class", "description": "unavailable"}, {"name": "construct_uris(self, uris, base_paths)", "scope": "PackageManager", "scopeKind": "class", "description": "unavailable"}, {"name": "deploy_dir_lock(self)", "scope": "PackageManager", "scopeKind": "class", "description": "unavailable"}, {"name": "deploy_dir_unlock(self)", "scope": "PackageManager", "scopeKind": "class", "description": "unavailable"}, {"name": "extract(self, pkg)", "scope": "PackageManager", "scopeKind": "class", "description": "unavailable"}, {"name": "insert_feeds_uris(self, feed_uris, feed_base_paths, feed_archs)", "scope": "PackageManager", "scopeKind": "class", "description": "unavailable"}, {"name": "install(self, pkgs, attempt_only=False)", "scope": "PackageManager", "scopeKind": "class", "description": "unavailable"}, {"name": "install_complementary(self, globs=None)", "scope": "PackageManager", "scopeKind": "class", "description": "unavailable"}, {"name": "install_glob(self, globs, sdk=False)", "scope": "PackageManager", "scopeKind": "class", "description": "unavailable"}, {"name": "list_installed(self)", "scope": "PackageManager", "scopeKind": "class", "description": "unavailable"}, {"name": "list_pkgs(self)", "scope": "PkgsList", "scopeKind": "class", "description": "unavailable"}, {"name": "remove(self, pkgs, with_dependencies=True)", "scope": "PackageManager", "scopeKind": "class", "description": "unavailable"}, {"name": "remove_packaging_data(self)", "scope": "PackageManager", "scopeKind": "class", "description": "unavailable"}, {"name": "run_intercepts(self, populate_sdk=None)", "scope": "PackageManager", "scopeKind": "class", "description": "unavailable"}, {"name": "update(self)", "scope": "PackageManager", "scopeKind": "class", "description": "unavailable"}, {"name": "write_index(self)", "scope": "PackageManager", "scopeKind": "class", "description": "unavailable"}], "calls": ["subprocess.check_output", "shutil.copy", "shutil.copyfile", "os.path.basename", "os.listdir", "os.path.exists", "os.path.isdir", "os.environ", "os.path.join", "oe.sstatesig.find_sstate_manifest", "oe.utils.format_pkg_list", "oe.path.which_wild", "bb.utils.lockfile", "bb.utils.unlockfile", "bb.utils.remove", "bb.utils.mkdirhier", "bb.note", "bb.fatal", "bb.debug", "collections.defaultdict", "hashlib.sha256", "fnmatch.filter", "os.link", "os.path.dirname", "oe.path.join"], "search-terms": ["PackageManager", "create_index", "opkg_query", "generate_locale_archive", "generate_index_files", "PKGDATA_DIR", "PACKAGE_CLASSES", "IPK", "RPM", "DEB", "intercepts", "write_index"], "state": 2, "file_id": 1801, "knowledge_revision": 14944, "git_revision": "", "ctags": [{"_type": "tag", "name": "Indexer", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^class Indexer(object, metaclass=ABCMeta):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PackageManager", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^class PackageManager(object, metaclass=ABCMeta):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PkgsList", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^class PkgsList(object, metaclass=ABCMeta):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def __init__(self, d, deploy_dir):$/", "language": "Python", "kind": "member", "signature": "(self, d, deploy_dir)", "scope": "Indexer", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def __init__(self, d, rootfs_dir):$/", "language": "Python", "kind": "member", "signature": "(self, d, rootfs_dir)", "scope": "PkgsList", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def __init__(self, d, target_rootfs):$/", "language": "Python", "kind": "member", "signature": "(self, d, target_rootfs)", "scope": "PackageManager", "scopeKind": "class"}, {"_type": "tag", "name": "_append", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^        def _append(arr1, arr2, sep='\\/'):$/", "file": true, "language": "Python", "kind": "function", "signature": "(arr1, arr2, sep='/')", "scope": "PackageManager.construct_uris", "scopeKind": "member"}, {"_type": "tag", "name": "_handle_intercept_failure", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def _handle_intercept_failure(self, failed_script):$/", "language": "Python", "kind": "member", "signature": "(self, failed_script)", "scope": "PackageManager", "scopeKind": "class"}, {"_type": "tag", "name": "_initialize_intercepts", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def _initialize_intercepts(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PackageManager", "scopeKind": "class"}, {"_type": "tag", "name": "_postpone_to_first_boot", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def _postpone_to_first_boot(self, postinst_intercept_hook):$/", "language": "Python", "kind": "member", "signature": "(self, postinst_intercept_hook)", "scope": "PackageManager", "scopeKind": "class"}, {"_type": "tag", "name": "construct_uris", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def construct_uris(self, uris, base_paths):$/", "language": "Python", "kind": "member", "signature": "(self, uris, base_paths)", "scope": "PackageManager", "scopeKind": "class"}, {"_type": "tag", "name": "create_index", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^def create_index(arg):$/", "language": "Python", "kind": "function", "signature": "(arg)"}, {"_type": "tag", "name": "create_packages_dir", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^def create_packages_dir(d, subrepo_dir, deploydir, taskname, filterbydependencies):$/", "language": "Python", "kind": "function", "signature": "(d, subrepo_dir, deploydir, taskname, filterbydependencies)"}, {"_type": "tag", "name": "deploy_dir_lock", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def deploy_dir_lock(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PackageManager", "scopeKind": "class"}, {"_type": "tag", "name": "deploy_dir_unlock", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def deploy_dir_unlock(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PackageManager", "scopeKind": "class"}, {"_type": "tag", "name": "extract", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def extract(self, pkg):$/", "language": "Python", "kind": "member", "signature": "(self, pkg)", "scope": "PackageManager", "scopeKind": "class"}, {"_type": "tag", "name": "failed_postinsts_abort", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^def failed_postinsts_abort(pkgs, log_path):$/", "language": "Python", "kind": "function", "signature": "(pkgs, log_path)"}, {"_type": "tag", "name": "generate_index_files", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^def generate_index_files(d):$/", "language": "Python", "kind": "function", "signature": "(d)"}, {"_type": "tag", "name": "generate_locale_archive", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^def generate_locale_archive(d, rootfs, target_arch, localedir):$/", "language": "Python", "kind": "function", "signature": "(d, rootfs, target_arch, localedir)"}, {"_type": "tag", "name": "insert_feeds_uris", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def insert_feeds_uris(self, feed_uris, feed_base_paths, feed_archs):$/", "language": "Python", "kind": "member", "signature": "(self, feed_uris, feed_base_paths, feed_archs)", "scope": "PackageManager", "scopeKind": "class"}, {"_type": "tag", "name": "install", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def install(self, pkgs, attempt_only=False):$/", "language": "Python", "kind": "member", "signature": "(self, pkgs, attempt_only=False)", "scope": "PackageManager", "scopeKind": "class"}, {"_type": "tag", "name": "install_complementary", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def install_complementary(self, globs=None):$/", "language": "Python", "kind": "member", "signature": "(self, globs=None)", "scope": "PackageManager", "scopeKind": "class"}, {"_type": "tag", "name": "install_glob", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def install_glob(self, globs, sdk=False):$/", "language": "Python", "kind": "member", "signature": "(self, globs, sdk=False)", "scope": "PackageManager", "scopeKind": "class"}, {"_type": "tag", "name": "list_installed", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def list_installed(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PackageManager", "scopeKind": "class"}, {"_type": "tag", "name": "list_pkgs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def list_pkgs(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PkgsList", "scopeKind": "class"}, {"_type": "tag", "name": "opkg_query", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^def opkg_query(cmd_output):$/", "language": "Python", "kind": "function", "signature": "(cmd_output)"}, {"_type": "tag", "name": "remove", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def remove(self, pkgs, with_dependencies=True):$/", "language": "Python", "kind": "member", "signature": "(self, pkgs, with_dependencies=True)", "scope": "PackageManager", "scopeKind": "class"}, {"_type": "tag", "name": "remove_packaging_data", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def remove_packaging_data(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PackageManager", "scopeKind": "class"}, {"_type": "tag", "name": "run_intercepts", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def run_intercepts(self, populate_sdk=None):$/", "language": "Python", "kind": "member", "signature": "(self, populate_sdk=None)", "scope": "PackageManager", "scopeKind": "class"}, {"_type": "tag", "name": "update", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def update(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PackageManager", "scopeKind": "class"}, {"_type": "tag", "name": "write_index", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def write_index(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Indexer", "scopeKind": "class"}, {"_type": "tag", "name": "write_index", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/__init__.py", "pattern": "/^    def write_index(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PackageManager", "scopeKind": "class"}], "hash": "3b73e1d079c20ce561a7771ac755793a", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "openembedded-core/meta/lib/oe/package_manager/__init__.py", "revision_history": [{"14944": ""}]}