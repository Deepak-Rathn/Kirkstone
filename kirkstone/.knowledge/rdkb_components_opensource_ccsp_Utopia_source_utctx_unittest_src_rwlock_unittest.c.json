{"is_source_file": true, "format": "C", "description": "This is a C source file implementing a unit test for a read-write lock (UtopiaRWLock). It performs concurrent testing of read and write locks, including process spawning, lock contention, and verifying that read and write times do not overlap improperly. The code uses shared memory and semaphores for inter-process synchronization and tracking lock acquisition/release timings.", "external_files": ["utctx_rwlock.h"], "external_methods": ["UtopiaRWLock_Init", "UtopiaRWLock_ReadLock", "UtopiaRWLock_WriteLock", "UtopiaRWLock_Free"], "published": ["main"], "classes": [], "methods": [{"name": "void s_reader(int iProcId,sem_t * pSem)", "description": "Simulates a reader process that acquires read locks, records lock times, and sleeps for random intervals.", "scope": "", "scopeKind": ""}, {"name": "void s_reader_crash(void)", "description": "Simulates a process that acquires multiple read locks and then crashes intentionally to test lock handling.", "scope": "", "scopeKind": ""}, {"name": "void s_writer(int iProcId,sem_t * pSem)", "description": "Simulates a writer process that acquires write locks, records lock times, and sleeps for random intervals.", "scope": "", "scopeKind": ""}, {"name": "void s_writer_exit(void)", "description": "Acquires a write lock and then exits without releasing it to test handling of abrupt lock termination.", "scope": "", "scopeKind": ""}, {"name": "void s_init_shmem(int * pfdShMem,sem_t ** ppSem)", "description": "Initializes shared memory and semaphore resources for inter-process communication and tracking.", "scope": "", "scopeKind": ""}, {"name": "void s_free_shmem(int fdShMem,sem_t * pSem)", "description": "Cleans up shared memory and semaphore resources.", "scope": "", "scopeKind": ""}, {"name": "int main(void)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["UtopiaRWLock_Init", "UtopiaRWLock_ReadLock", "UtopiaRWLock_WriteLock", "UtopiaRWLock_Free", "sem_open", "shm_open", "ftruncate", "mmap", "sem_wait", "sem_post", "sem_close", "sem_unlink", "shm_unlink", "close", "fork", "exit", "usleep", "gettimeofday"], "search-terms": ["utctx_rwlock", "rwlock_unittest", "UtopiaRWLock", "shared memory", "inter-process locking", "semaphore synchronization", "read-write lock", "concurrent testing"], "state": 2, "file_id": 7780, "knowledge_revision": 20849, "git_revision": "", "ctags": [{"_type": "tag", "name": "MICROSECS_TODAY", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^#define MICROSECS_TODAY(/", "file": true, "language": "C", "kind": "macro", "signature": "(x)"}, {"_type": "tag", "name": "READS_PERFORMED", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^#define READS_PERFORMED /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "READ_SLEEP_MAX", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^#define READ_SLEEP_MAX /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "READ_SLEEP_MIN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^#define READ_SLEEP_MIN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "READ_TIME_MAX", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^#define READ_TIME_MAX /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "READ_TIME_MIN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^#define READ_TIME_MIN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "RWLOCK_UNITTEST_MUTEX", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^#define RWLOCK_UNITTEST_MUTEX /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "RWLOCK_UNITTEST_SHMEM", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^#define RWLOCK_UNITTEST_SHMEM /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SIM_PROCESSES", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^#define SIM_PROCESSES /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SLEEP_RANDOM_RANGE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^#define SLEEP_RANDOM_RANGE(/", "file": true, "language": "C", "kind": "macro", "signature": "(y,z)"}, {"_type": "tag", "name": "ShMemStruct", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^} ShMemStruct;$/", "file": true, "language": "C", "typeref": "struct:_ShMemStruct", "kind": "typedef"}, {"_type": "tag", "name": "UNITTEST_TIMEOUT", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^#define UNITTEST_TIMEOUT /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "UTCTX_SEM_RESOURCE_MAX", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^#define UTCTX_SEM_RESOURCE_MAX /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "WRITES_PERFORMED", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^#define WRITES_PERFORMED /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "WRITE_SLEEP_MAX", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^#define WRITE_SLEEP_MAX /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "WRITE_SLEEP_MIN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^#define WRITE_SLEEP_MIN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "WRITE_TIME_MAX", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^#define WRITE_TIME_MAX /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "WRITE_TIME_MIN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^#define WRITE_TIME_MIN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "_ShMemStruct", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^typedef struct _ShMemStruct$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "g_pShMemStruct", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^static ShMemStruct* g_pShMemStruct;$/", "file": true, "language": "C", "typeref": "typename:ShMemStruct *", "kind": "variable"}, {"_type": "tag", "name": "iProcsDone", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^    int iProcsDone;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "member", "scope": "_ShMemStruct", "scopeKind": "struct"}, {"_type": "tag", "name": "main", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^int main(void)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "pppReadTimes", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^    long long int pppReadTimes[SIM_PROCESSES \\/ 2][READS_PERFORMED][2];$/", "file": true, "language": "C", "typeref": "typename:long long int[][][2]", "kind": "member", "scope": "_ShMemStruct", "scopeKind": "struct"}, {"_type": "tag", "name": "pppWriteTimes", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^    long long int pppWriteTimes[SIM_PROCESSES \\/ 2][WRITES_PERFORMED][2];$/", "file": true, "language": "C", "typeref": "typename:long long int[][][2]", "kind": "member", "scope": "_ShMemStruct", "scopeKind": "struct"}, {"_type": "tag", "name": "s_free_shmem", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^static void s_free_shmem(int fdShMem, sem_t* pSem)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(int fdShMem,sem_t * pSem)"}, {"_type": "tag", "name": "s_init_shmem", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^static void s_init_shmem(int* pfdShMem, sem_t** ppSem)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(int * pfdShMem,sem_t ** ppSem)"}, {"_type": "tag", "name": "s_reader", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^static void s_reader(int iProcId, sem_t* pSem)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(int iProcId,sem_t * pSem)"}, {"_type": "tag", "name": "s_reader_crash", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^static void s_reader_crash(void)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "s_writer", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^static void s_writer(int iProcId, sem_t* pSem)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(int iProcId,sem_t * pSem)"}, {"_type": "tag", "name": "s_writer_exit", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "pattern": "/^static void s_writer_exit(void)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void)"}], "hash": "de091b5fe3949304775be65d2c1e3ea5", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/Utopia/source/utctx/unittest/src/rwlock_unittest.c", "fields": [{"name": "ShMemStruct * g_pShMemStruct", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int iProcsDone", "scope": "_ShMemStruct", "scopeKind": "struct", "description": "unavailable"}, {"name": "long long int[][][2] pppReadTimes", "scope": "_ShMemStruct", "scopeKind": "struct", "description": "unavailable"}, {"name": "long long int[][][2] pppWriteTimes", "scope": "_ShMemStruct", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"20849": ""}]}