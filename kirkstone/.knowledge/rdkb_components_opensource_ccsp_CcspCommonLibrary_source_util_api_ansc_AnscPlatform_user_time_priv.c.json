{"is_source_file": true, "format": "C", "description": "This file contains utility functions for handling time, including getting system time, setting system time, computing time delta, and getting uptime, with platform-dependent implementations utilizing shared memory and semaphores.", "external_files": ["user_base.h", "user_time.h"], "external_methods": ["gettimeofday", "settimeofday", "open", "read", "close", "system", "timegm", "mktime", "localtime_r"], "published": ["UserGetNtpTime", "UserGetTickInSeconds", "UserGetTickInMilliSeconds", "UserSetSystemTime", "UserGetTimeNow", "UserSetLocalTime"], "classes": [], "methods": [{"name": "void UserGetNtpTime(time_t * ltime)", "description": "Retrieves the current network time (NTP time) and stores it in the provided time_t pointer.", "scope": "", "scopeKind": ""}, {"name": "ULONG UserGetTickInSeconds()", "description": "Returns the number of seconds since system start, calculated using shared memory and semaphore synchronization.", "scope": "", "scopeKind": ""}, {"name": "void UserSetDelta()", "description": "Initializes the delta time offset by reading /proc/uptime and current system uptime.", "scope": "", "scopeKind": ""}, {"name": "ULONG UserGetTickInMilliSeconds()", "description": "Returns the number of milliseconds since system start, using the delta time offset.", "scope": "", "scopeKind": ""}, {"name": "void UserSetSystemTime(USER_SYSTEM_TIME * pSystemTime)", "description": "Sets the system time based on provided USER_SYSTEM_TIME, adjusts shared memory delta, and updates hardware clock.", "scope": "", "scopeKind": ""}, {"name": "struct:tm * UserGetTimeNow(time_t * timeNow,struct tm * Tm)", "description": "Retrieves the current time using NTP and converts it to local time.", "scope": "", "scopeKind": ""}, {"name": "void UserSetLocalTime(USER_SYSTEM_TIME * pSystemTime)", "description": "Sets the system's local time based on the provided USER_SYSTEM_TIME and updates hardware clock.", "scope": "", "scopeKind": ""}], "calls": ["time", "semget", "semctl", "semop", "gettimeofday", "read", "close", "mktime", "settimeofday", "system", "localtime_r", "timegm", "open"], "search-terms": ["time synchronization", "shared memory delta", "semaphore synchronization", "system uptime", "platform-dependent time", "user system time"], "state": 2, "file_id": 10755, "knowledge_revision": 23726, "git_revision": "", "ctags": [{"_type": "tag", "name": "SEGSIZE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "pattern": "/^#define SEGSIZE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SEM_RESOURCE_MAX", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "pattern": "/^#define SEM_RESOURCE_MAX /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "UserGetNtpTime", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "pattern": "/^UserGetNtpTime(time_t*  ltime)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(time_t * ltime)"}, {"_type": "tag", "name": "UserGetTickInMilliSeconds", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "pattern": "/^UserGetTickInMilliSeconds()$/", "language": "C", "typeref": "typename:ULONG", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "UserGetTickInSeconds", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "pattern": "/^UserGetTickInSeconds()$/", "language": "C", "typeref": "typename:ULONG", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "UserGetTimeNow", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "pattern": "/^UserGetTimeNow(time_t *timeNow, struct tm *Tm)$/", "language": "C", "typeref": "struct:tm *", "kind": "function", "signature": "(time_t * timeNow,struct tm * Tm)"}, {"_type": "tag", "name": "UserSetDelta", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "pattern": "/^UserSetDelta()$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "UserSetLocalTime", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "pattern": "/^UserSetLocalTime(USER_SYSTEM_TIME*  pSystemTime)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(USER_SYSTEM_TIME * pSystemTime)"}, {"_type": "tag", "name": "UserSetSystemTime", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "pattern": "/^UserSetSystemTime(USER_SYSTEM_TIME*  pSystemTime)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(USER_SYSTEM_TIME * pSystemTime)"}, {"_type": "tag", "name": "count", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "pattern": "/^    int             count;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "member", "scope": "seg", "scopeKind": "struct"}, {"_type": "tag", "name": "delta", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "pattern": "/^    struct delta_t  delta;$/", "file": true, "language": "C", "typeref": "struct:delta_t", "kind": "member", "scope": "seg", "scopeKind": "struct"}, {"_type": "tag", "name": "delta_t", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "pattern": "/^struct delta_t {$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "millisec", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "pattern": "/^    unsigned long  millisec;$/", "file": true, "language": "C", "typeref": "typename:unsigned long", "kind": "member", "scope": "delta_t", "scopeKind": "struct"}, {"_type": "tag", "name": "sec", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "pattern": "/^    unsigned long  sec;$/", "file": true, "language": "C", "typeref": "typename:unsigned long", "kind": "member", "scope": "delta_t", "scopeKind": "struct"}, {"_type": "tag", "name": "seg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "pattern": "/^struct seg {$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "segptr", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "pattern": "/^struct seg * segptr = NULL;$/", "language": "C", "typeref": "struct:seg *", "kind": "variable"}, {"_type": "tag", "name": "semKey", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "pattern": "/^key_t semKey = 2000;$/", "language": "C", "typeref": "typename:key_t", "kind": "variable"}, {"_type": "tag", "name": "shemkey", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "pattern": "/^key_t shemkey= 100;$/", "language": "C", "typeref": "typename:key_t", "kind": "variable"}, {"_type": "tag", "name": "shmid", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "pattern": "/^int shmid = -1,sid = -1;$/", "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "sid", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "pattern": "/^int shmid = -1,sid = -1;$/", "language": "C", "typeref": "typename:int", "kind": "variable"}], "hash": "41f9285a0ffe08d1f9bc2fcf2f3874ea", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/CcspCommonLibrary/source/util_api/ansc/AnscPlatform/user_time_priv.c", "fields": [{"name": "int count", "scope": "seg", "scopeKind": "struct", "description": "unavailable"}, {"name": "struct:delta_t delta", "scope": "seg", "scopeKind": "struct", "description": "unavailable"}, {"name": "unsigned long millisec", "scope": "delta_t", "scopeKind": "struct", "description": "unavailable"}, {"name": "unsigned long sec", "scope": "delta_t", "scopeKind": "struct", "description": "unavailable"}, {"name": "struct:seg * segptr", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "key_t semKey", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "key_t shemkey", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int shmid", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int sid", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"23726": ""}]}