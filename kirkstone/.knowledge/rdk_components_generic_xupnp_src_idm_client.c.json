{"is_source_file": true, "format": "C", "description": "This source file contains functions for UPnP control point management, device discovery, device list maintenance, and communication with devices using GUPnP and related libraries. It handles device availability callbacks, manages threads for device verification and stopping discovery, and initializes the UPnP context in both secure and non-secure modes.", "external_files": ["<libgupnp/gupnp-control-point.h>", "<libgssdp/gssdp.h>", "<sysevent/sysevent.h>", "<glib/gprintf.h>", "<glib/gstdio.h>", "<platform_hal.h>", "<syscfg/syscfg.h>", "<libsoup/soup.h>", "<idm_client.h>", "rfcapi.h", "xdiscovery.h", "secure_wrapper.h", "<sys/ioctl.h>", "<net/if.h>"], "external_methods": ["sysevent_open", "sysevent_set_options", "sysevent_setnotification", "sysevent_get", "sysevent_rmnotification", "sysevent_close", "gupnp_resource_browser_rescan", "gupnp_control_point_new", "gupnp_device_info_get_serial_number", "gupnp_device_info_get_udn", "gupnp_device_info_get_service", "gupnp_service_proxy_call_action", "gupnp_service_proxy_action_get_result", "gupnp_context_new_s", "gupnp_context_new", "gupnp_context_set_subscription_timeout", "gssdp_resource_browser_set_active", "g_signal_connect", "g_main_loop_new", "g_main_loop_run", "g_main_loop_unref", "g_object_unref", "g_clear_object", "g_mutex_lock", "g_mutex_unlock", "g_mutex_free", "g_thread_create", "g_list_find_custom", "g_list_remove_link", "g_list_free", "g_list_find_custom", "g_list_remove_link", "g_list_free", "g_strdup", "g_string_new", "g_string_free", "g_string_assign", "g_clear_pointer", "g_message", "g_critical", "g_printerr", "g_error_free", "g_error_free", "g_printf", "g_malloc", "access"], "published": ["stop_discovery", "start_discovery"], "classes": [{"name": "XupnpTlsInteraction", "description": "A class for managing TLS certificate interactions during secure UPnP communication."}], "methods": [{"name": "void * verify_devices()", "description": "Thread function that periodically rescans devices and checks for upnp thread hang.", "scope": "", "scopeKind": ""}, {"name": "void * stop_discovery_process()", "description": "Thread function that checks for a stop signal to terminate discovery.", "scope": "", "scopeKind": ""}, {"name": "gboolean delete_gwyitem(const char * serial_num)", "description": "Removes a device from the list based on its serial number.", "scope": "", "scopeKind": ""}, {"name": "gboolean processStringRequest(const GUPnPServiceProxy * sproxy,const char * requestFn,const char * responseFn,gchar ** result,gboolean isInCriticalPath)", "description": "Invokes a UPnP action to retrieve a string value from a device.", "scope": "", "scopeKind": ""}, {"name": "void remove_entries_in_list()", "description": "Removes all devices from the internal list and frees associated resources.", "scope": "", "scopeKind": ""}, {"name": "void start_discovery(discovery_config_t * dc_obj,int (* func_callback)(device_info_t *,uint,uint))", "description": "Initializes UPnP contexts, sets up control points, and starts device discovery loop.", "scope": "", "scopeKind": ""}, {"name": "int stop_discovery()", "description": "Sets a flag to stop ongoing device discovery processes.", "scope": "", "scopeKind": ""}, {"name": "void * EventHandler(void * args)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int EventListen(void)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void device_proxy_available_cb(GUPnPControlPoint * cp,GUPnPDeviceProxy * dproxy)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void device_proxy_available_cb_bgw(GUPnPControlPoint * cp,GUPnPDeviceProxy * dproxy)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void device_proxy_unavailable_cb_bgw(GUPnPControlPoint * cp,GUPnPDeviceProxy * dproxy)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "gint g_list_compare_sno(GwyDeviceData * gwData1,GwyDeviceData * gwData2,gpointer user_data)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "gint g_list_find_sno(GwyDeviceData * gwData,gconstpointer * sno)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "gboolean init_gwydata(GwyDeviceData * gwydata)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int s_sysevent_connect(token_t * out_se_token)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void xupnp_tls_interaction_class_init(XupnpTlsInteractionClass * xupnpClass)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void xupnp_tls_interaction_init(XupnpTlsInteraction * interaction)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "GTlsInteractionResult xupnp_tls_interaction_request_certificate(GTlsInteraction * interaction,GTlsConnection * connection,GTlsCertificateRequestFlags flags,GCancellable * cancellable,GError ** error)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["sysevent_open", "sysevent_set_options", "sysevent_setnotification", "sysevent_get", "sysevent_rmnotification", "sysevent_close", "gupnp_resource_browser_rescan", "gupnp_control_point_new", "gupnp_device_info_get_serial_number", "gupnp_device_info_get_udn", "gupnp_device_info_get_service", "gupnp_service_proxy_call_action", "gupnp_service_proxy_action_get_result", "gupnp_context_new_s", "gupnp_context_new", "gupnp_context_set_subscription_timeout", "gssdp_resource_browser_set_active", "g_signal_connect", "g_thread_create", "g_list_find_custom", "g_list_remove_link", "g_list_free", "g_string_new", "g_string_free", "g_string_assign", "g_mutex_lock", "g_mutex_unlock", "g_mutex_free", "g_main_loop_new", "g_main_loop_run", "g_main_loop_unref", "g_object_unref", "g_clear_object", "g_message", "getserialnum", "getAccountId", "gupnp_control_point_new", "gupnp_device_info_get_serial_number", "gupnp_device_info_get_udn", "gupnp_device_info_get_service", "gupnp_service_proxy_send_action", "gupnp_service_proxy_send_action", "gupnp_context_new", "gupnp_context_new_s", "gupnp_context_set_tls_params", "gupnp_resource_browser_set_active"], "search-terms": ["idm_client.c", "UPnP control point", "device discovery", "GUPnP", "GSSDP", "device list maintenance", "secure UPnP context", "device proxy callbacks", "thread management", "stop discovery mechanism"], "state": 2, "file_id": 13015, "knowledge_revision": 25912, "git_revision": "", "ctags": [{"_type": "tag", "name": "CLIENT_CONTEXT_PORT", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^#define CLIENT_CONTEXT_PORT /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "EventHandler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^void* EventHandler(void* args)$/", "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "(void * args)"}, {"_type": "tag", "name": "EventListen", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^int EventListen(void)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "IDM_CA_FILE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^#define IDM_CA_FILE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "IDM_CERT_FILE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^#define IDM_CERT_FILE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "IDM_CLIENT_DEVICE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^#define IDM_CLIENT_DEVICE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "IDM_DP_CLIENT_DEVICE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^#define IDM_DP_CLIENT_DEVICE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "IDM_DP_SERVICE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^#define IDM_DP_SERVICE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "IDM_KEY_FILE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^#define IDM_KEY_FILE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "IDM_SERVICE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^#define IDM_SERVICE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "XupnpTlsInteraction", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^typedef GTlsInteraction XupnpTlsInteraction;$/", "file": true, "language": "C", "typeref": "typename:GTlsInteraction", "kind": "typedef"}, {"_type": "tag", "name": "XupnpTlsInteractionClass", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^typedef GTlsInteractionClass XupnpTlsInteractionClass;$/", "file": true, "language": "C", "typeref": "typename:GTlsInteractionClass", "kind": "typedef"}, {"_type": "tag", "name": "_GNU_SOURCE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^ #define _GNU_SOURCE$/", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "delete_gwyitem", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^gboolean delete_gwyitem(const char* serial_num)$/", "language": "C", "typeref": "typename:gboolean", "kind": "function", "signature": "(const char * serial_num)"}, {"_type": "tag", "name": "deviceAddNo", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^guint deviceAddNo=0;$/", "language": "C", "typeref": "typename:guint", "kind": "variable"}, {"_type": "tag", "name": "device_proxy_available_cb", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^static void device_proxy_available_cb (GUPnPControlPoint *cp, GUPnPDeviceProxy *dproxy)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(GUPnPControlPoint * cp,GUPnPDeviceProxy * dproxy)"}, {"_type": "tag", "name": "device_proxy_available_cb_bgw", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^device_proxy_available_cb_bgw (GUPnPControlPoint *cp, GUPnPDeviceProxy *dproxy)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(GUPnPControlPoint * cp,GUPnPDeviceProxy * dproxy)"}, {"_type": "tag", "name": "device_proxy_unavailable_cb_bgw", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^device_proxy_unavailable_cb_bgw (GUPnPControlPoint *cp, GUPnPDeviceProxy *dproxy)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(GUPnPControlPoint * cp,GUPnPDeviceProxy * dproxy)"}, {"_type": "tag", "name": "fd", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^static int fd = -1;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "g_list_compare_sno", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^g_list_compare_sno(GwyDeviceData* gwData1, GwyDeviceData* gwData2, gpointer user_data )$/", "file": true, "language": "C", "typeref": "typename:gint", "kind": "function", "signature": "(GwyDeviceData * gwData1,GwyDeviceData * gwData2,gpointer user_data)"}, {"_type": "tag", "name": "g_list_find_sno", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^g_list_find_sno(GwyDeviceData* gwData, gconstpointer* sno )$/", "file": true, "language": "C", "typeref": "typename:gint", "kind": "function", "signature": "(GwyDeviceData * gwData,gconstpointer * sno)"}, {"_type": "tag", "name": "idm_stop_discovery_triggered", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^static guint idm_stop_discovery_triggered = 0;$/", "file": true, "language": "C", "typeref": "typename:guint", "kind": "variable"}, {"_type": "tag", "name": "idm_upnp_init_status", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^static gboolean idm_upnp_init_status = FALSE;$/", "file": true, "language": "C", "typeref": "typename:gboolean", "kind": "variable"}, {"_type": "tag", "name": "init_gwydata", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^gboolean init_gwydata(GwyDeviceData* gwydata)$/", "language": "C", "typeref": "typename:gboolean", "kind": "function", "signature": "(GwyDeviceData * gwydata)"}, {"_type": "tag", "name": "processStringRequest", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^gboolean processStringRequest(const GUPnPServiceProxy *sproxy ,const char * requestFn,$/", "language": "C", "typeref": "typename:gboolean", "kind": "function", "signature": "(const GUPnPServiceProxy * sproxy,const char * requestFn,const char * responseFn,gchar ** result,gboolean isInCriticalPath)"}, {"_type": "tag", "name": "remove_entries_in_list", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^void remove_entries_in_list()$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "s_sysevent_connect", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^int s_sysevent_connect (token_t *out_se_token)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(token_t * out_se_token)"}, {"_type": "tag", "name": "start_discovery", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^void start_discovery(discovery_config_t* dc_obj,int (*func_callback)(device_info_t*,uint,uint))$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(discovery_config_t * dc_obj,int (* func_callback)(device_info_t *,uint,uint))"}, {"_type": "tag", "name": "stop_discovery", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^int stop_discovery()$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "stop_discovery_mutex", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^static GMutex stop_discovery_mutex;$/", "file": true, "language": "C", "typeref": "typename:GMutex", "kind": "variable"}, {"_type": "tag", "name": "stop_discovery_process", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^void* stop_discovery_process()$/", "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "verify_devices", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^void* verify_devices()$/", "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "xupnp_tls_interaction_class_init", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^xupnp_tls_interaction_class_init (XupnpTlsInteractionClass *xupnpClass)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(XupnpTlsInteractionClass * xupnpClass)"}, {"_type": "tag", "name": "xupnp_tls_interaction_init", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^xupnp_tls_interaction_init (XupnpTlsInteraction *interaction)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(XupnpTlsInteraction * interaction)"}, {"_type": "tag", "name": "xupnp_tls_interaction_request_certificate", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/xupnp/src/idm_client.c", "pattern": "/^xupnp_tls_interaction_request_certificate (GTlsInteraction              *interaction,$/", "file": true, "language": "C", "typeref": "typename:GTlsInteractionResult", "kind": "function", "signature": "(GTlsInteraction * interaction,GTlsConnection * connection,GTlsCertificateRequestFlags flags,GCancellable * cancellable,GError ** error)"}], "hash": "c91aa2e74532d0b72d82553dad542a5c", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdk/components/generic/xupnp/src/idm_client.c", "fields": [{"name": "guint deviceAddNo", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int fd", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "guint idm_stop_discovery_triggered", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "gboolean idm_upnp_init_status", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "GMutex stop_discovery_mutex", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"25912": ""}]}