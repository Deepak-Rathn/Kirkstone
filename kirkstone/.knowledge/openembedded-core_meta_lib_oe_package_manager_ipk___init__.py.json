{"is_source_file": true, "format": "Python", "description": "This file contains Python classes and functions related to managing IPK packages in a Yocto-based build system. It includes classes for indexing packages, listing installed packages, package management operations like install, remove, backup, recover, and extracting package contents. The code interacts with external tools like 'opkg', 'ar', 'tar', and integrates with Yocto's build environment functions.", "external_files": ["oe.package_manager", "bb.utils", "bb", "oe.path"], "external_methods": ["bb.utils.which", "bb.utils.remove", "bb.utils.mkdirhier", "bb.note", "bb.warn", "bb.fatal", "bb.utils.rename", "oe.path.join", "tempfile.mkdtemp", "os.getcwd", "os.chdir", "re.match", "re.sub", "subprocess.Popen", "subprocess.check_output", "subprocess.run", "shutil.copytree"], "published": ["OpkgIndexer", "PMPkgsList", "OpkgDpkgPM", "OpkgPM"], "classes": [{"name": "OpkgIndexer", "description": "Handles the creation and signing of package indexes for the IPK repository."}, {"name": "PMPkgsList", "description": "Provides functionality to list installed packages via 'opkg'."}, {"name": "OpkgDpkgPM", "description": "Abstract class for managing OPKG packages, providing methods for querying, extracting, and package info."}, {"name": "OpkgPM", "description": "Concrete class extending OpkgDpkgPM, implementing actual package management operations like install, remove, update, index creation, and handling feeds."}], "methods": [{"name": "write_index(self)", "description": "Creates the package index and signs it if needed.", "scope": "OpkgPM", "scopeKind": "class"}, {"name": "list_pkgs(self, format=None)", "description": "Lists installed packages using 'opkg status'.", "scope": "PMPkgsList", "scopeKind": "class"}, {"name": "package_info(self, pkg)", "description": "Retrieves package information by running specific commands.", "scope": "OpkgPM", "scopeKind": "class"}, {"name": "extract(self, pkg)", "description": "Extracts the contents of a package into a temporary directory.", "scope": "OpkgPM", "scopeKind": "class"}, {"name": "mark_packages(self, status_tag, packages=None)", "description": "Updates the status of packages in the status file.", "scope": "OpkgPM", "scopeKind": "class"}, {"name": "_create_custom_config(self)", "description": "Creates a custom opkg configuration based on feeds.", "scope": "OpkgPM", "scopeKind": "class"}, {"name": "_create_config(self)", "description": "Creates an opkg configuration based on local files and directories.", "scope": "OpkgPM", "scopeKind": "class"}, {"name": "insert_feeds_uris(self, feed_uris, feed_base_paths, feed_archs)", "description": "Adds additional feed URIs into the configuration.", "scope": "OpkgPM", "scopeKind": "class"}, {"name": "update(self)", "description": "Updates the package index.", "scope": "OpkgPM", "scopeKind": "class"}, {"name": "install(self, pkgs, attempt_only=False)", "description": "Installs specified packages.", "scope": "OpkgPM", "scopeKind": "class"}, {"name": "remove(self, pkgs, with_dependencies=True)", "description": "Removes specified packages.", "scope": "OpkgPM", "scopeKind": "class"}, {"name": "write_index", "description": "Generates the package index files."}, {"name": "remove_packaging_data(self)", "description": "Removes cached package data from the target root filesystem.", "scope": "OpkgPM", "scopeKind": "class"}, {"name": "remove_lists(self)", "description": "Removes package list files.", "scope": "OpkgPM", "scopeKind": "class"}, {"name": "list_installed(self)", "description": "Returns a list of installed packages.", "scope": "OpkgPM", "scopeKind": "class"}, {"name": "dummy_install(self, pkgs)", "description": "Performs a dry-run installation for testing purposes.", "scope": "OpkgPM", "scopeKind": "class"}, {"name": "backup_packaging_data(self)", "description": "Saves current packaging data for later restoration.", "scope": "OpkgPM", "scopeKind": "class"}, {"name": "recover_packaging_data(self)", "description": "Restores previously saved packaging data.", "scope": "OpkgPM", "scopeKind": "class"}, {"name": "package_info(self, pkg, cmd)", "description": "Returns package metadata as a dictionary.", "scope": "OpkgDpkgPM", "scopeKind": "class"}, {"name": "extract(self, pkg, pkg_info)", "description": "Extracts package contents to a temporary directory.", "scope": "OpkgDpkgPM", "scopeKind": "class"}, {"name": "__init__(self, d, rootfs_dir)", "scope": "PMPkgsList", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, d, target_rootfs)", "scope": "OpkgDpkgPM", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, d, target_rootfs, config_file, archs, task_name='target', ipk_repo_workdir=\"oe-rootfs-repo\", filterbydependencies=True, prepare_index=True)", "scope": "OpkgPM", "scopeKind": "class", "description": "unavailable"}, {"name": "_handle_intercept_failure(self, registered_pkgs)", "scope": "OpkgDpkgPM", "scopeKind": "class", "description": "unavailable"}], "calls": ["bb.utils.which", "os.path.exists", "open", "set", "re.match", "re.sub", "subprocess.Popen", "subprocess.check_output", "subprocess.run", "bb.note", "bb.fatal", "bb.warn", "bb.utils.remove", "shutil.copytree", "tempfile.mkdtemp", "os.getcwd", "os.chdir", "oe.path.join", "os.path.isdir", "os.path.isfile", "bb.utils.mkdirhier", "bb.utils.rename"], "search-terms": ["OpkgIndexer", "PMPkgsList", "OpkgDpkgPM", "OpkgPM", "package_manager", "opkg", "yocto", "ipk", "package index", "package feed", "signing", "index creation", "package installation", "package removal", "package extraction"], "state": 2, "file_id": 1798, "knowledge_revision": 14948, "git_revision": "", "ctags": [{"_type": "tag", "name": "OpkgDpkgPM", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^class OpkgDpkgPM(PackageManager):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OpkgIndexer", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^class OpkgIndexer(Indexer):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OpkgPM", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^class OpkgPM(OpkgDpkgPM):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PMPkgsList", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^class PMPkgsList(PkgsList):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def __init__(self, d, rootfs_dir):$/", "language": "Python", "kind": "member", "signature": "(self, d, rootfs_dir)", "scope": "PMPkgsList", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def __init__(self, d, target_rootfs):$/", "language": "Python", "kind": "member", "signature": "(self, d, target_rootfs)", "scope": "OpkgDpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def __init__(self, d, target_rootfs, config_file, archs, task_name='target', ipk_repo_workdi/", "language": "Python", "kind": "member", "signature": "(self, d, target_rootfs, config_file, archs, task_name='target', ipk_repo_workdir=\"oe-rootfs-repo\", filterbydependencies=True, prepare_index=True)", "scope": "OpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "_create_config", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def _create_config(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "OpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "_create_custom_config", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def _create_custom_config(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "OpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "_handle_intercept_failure", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def _handle_intercept_failure(self, registered_pkgs):$/", "language": "Python", "kind": "member", "signature": "(self, registered_pkgs)", "scope": "OpkgDpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "backup_packaging_data", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def backup_packaging_data(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "OpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "dummy_install", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def dummy_install(self, pkgs):$/", "language": "Python", "kind": "member", "signature": "(self, pkgs)", "scope": "OpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "extract", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def extract(self, pkg):$/", "language": "Python", "kind": "member", "signature": "(self, pkg)", "scope": "OpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "extract", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def extract(self, pkg, pkg_info):$/", "language": "Python", "kind": "member", "signature": "(self, pkg, pkg_info)", "scope": "OpkgDpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "insert_feeds_uris", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def insert_feeds_uris(self, feed_uris, feed_base_paths, feed_archs):$/", "language": "Python", "kind": "member", "signature": "(self, feed_uris, feed_base_paths, feed_archs)", "scope": "OpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "install", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def install(self, pkgs, attempt_only=False):$/", "language": "Python", "kind": "member", "signature": "(self, pkgs, attempt_only=False)", "scope": "OpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "list_installed", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def list_installed(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "OpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "list_pkgs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def list_pkgs(self, format=None):$/", "language": "Python", "kind": "member", "signature": "(self, format=None)", "scope": "PMPkgsList", "scopeKind": "class"}, {"_type": "tag", "name": "mark_packages", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def mark_packages(self, status_tag, packages=None):$/", "language": "Python", "kind": "member", "signature": "(self, status_tag, packages=None)", "scope": "OpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "package_info", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def package_info(self, pkg):$/", "language": "Python", "kind": "member", "signature": "(self, pkg)", "scope": "OpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "package_info", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def package_info(self, pkg, cmd):$/", "language": "Python", "kind": "member", "signature": "(self, pkg, cmd)", "scope": "OpkgDpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "recover_packaging_data", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def recover_packaging_data(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "OpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "remove", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def remove(self, pkgs, with_dependencies=True):$/", "language": "Python", "kind": "member", "signature": "(self, pkgs, with_dependencies=True)", "scope": "OpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "remove_lists", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def remove_lists(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "OpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "remove_packaging_data", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def remove_packaging_data(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "OpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "update", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def update(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "OpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "write_index", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def write_index(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "OpkgIndexer", "scopeKind": "class"}, {"_type": "tag", "name": "write_index", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "pattern": "/^    def write_index(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "OpkgPM", "scopeKind": "class"}], "hash": "74a22e7e4b67aef6a86973a4deedb108", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "openembedded-core/meta/lib/oe/package_manager/ipk/__init__.py", "revision_history": [{"14948": ""}]}