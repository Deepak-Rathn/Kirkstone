{"is_source_file": true, "format": "Python", "description": "This file defines an abstract class 'Rootfs' for managing root filesystem creation and related operations in a Yocto/OE build environment. It includes methods for setup, cleanup, package handling, debug filesystem setup, and kernel module management, along with utility functions for creating root filesystems and managing installed packages.", "external_files": ["oe.utils", "oe.package_manager", "oe.manifest", "oe.path", "shutil", "os", "subprocess", "re"], "external_methods": ["execute_pre_post_process", "bb.utils.contains", "bb.utils.rename", "bb.utils.mkdirhier", "bb.utils.which", "bb.utils.inherits_class", "bb.note", "bb.warn", "bb.fatal", "bb.utils.copytree", "bb.utils.mkdirhier", "bb.utils.contains"], "published": ["create_rootfs", "variable_depends", "image_list_installed_packages"], "classes": [{"name": "Rootfs", "description": "An abstract class managing root filesystem creation and maintenance in Yocto/OE build system."}], "methods": [{"name": "_create(self)", "description": "Abstract method intended to implement the creation of the root filesystem.", "scope": "Rootfs", "scopeKind": "class"}, {"name": "_get_delayed_postinsts(self)", "description": "Abstract method to obtain packages with delayed post-install scripts.", "scope": "Rootfs", "scopeKind": "class"}, {"name": "_save_postinsts(self)", "description": "Abstract method to save post-install scripts.", "scope": "Rootfs", "scopeKind": "class"}, {"name": "_log_check(self)", "description": "Abstract method to perform log checks after rootfs creation.", "scope": "Rootfs", "scopeKind": "class"}, {"name": "_cleanup(self)", "description": "Abstract method for cleanup operations post rootfs creation.", "scope": "Rootfs", "scopeKind": "class"}, {"name": "_exec_shell_cmd(self, cmd)", "description": "Executes a shell command, handling fakeroot if specified.", "scope": "Rootfs", "scopeKind": "class"}, {"name": "create(self)", "description": "Main method coordinating root filesystem creation steps, including pre/post-process commands, package installation, debugging setup, ldconfig, kernel modules, cleanup, and log checks.", "scope": "Rootfs", "scopeKind": "class"}, {"name": "_uninstall_unneeded(self)", "description": "Removes unneeded packages and post-install scripts if applicable based on build configuration.", "scope": "Rootfs", "scopeKind": "class"}, {"name": "_run_ldconfig(self)", "description": "Runs ldconfig in the new rootfs if configured.", "scope": "Rootfs", "scopeKind": "class"}, {"name": "_check_for_kernel_modules(self, modules_dir)", "description": "Checks if kernel modules (.ko files) are present in the given directory.", "scope": "Rootfs", "scopeKind": "class"}, {"name": "_generate_kernel_module_deps(self)", "description": "Generates dependencies for kernel modules found in the rootfs.", "scope": "Rootfs", "scopeKind": "class"}, {"name": "_create_devfs(self)", "description": "Creates device files in the rootfs based on device tables.", "scope": "Rootfs", "scopeKind": "class"}, {"name": "__init__(self, d, progress_reporter=None, logcatcher=None)", "scope": "Rootfs", "scopeKind": "class", "description": "unavailable"}, {"name": "_insert_feed_uris(self)", "scope": "Rootfs", "scopeKind": "class", "description": "unavailable"}, {"name": "_log_check_common(self, type, match)", "scope": "Rootfs", "scopeKind": "class", "description": "unavailable"}, {"name": "_log_check_error(self)", "scope": "Rootfs", "scopeKind": "class", "description": "unavailable"}, {"name": "_log_check_warn(self)", "scope": "Rootfs", "scopeKind": "class", "description": "unavailable"}, {"name": "_setup_dbg_rootfs(self, dirs)", "scope": "Rootfs", "scopeKind": "class", "description": "unavailable"}, {"name": "create_rootfs(d, manifest_dir=None, progress_reporter=None, logcatcher=None)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_class_for_type(imgtype)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "image_list_installed_packages(d, rootfs_dir=None)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "variable_depends(d, manifest_dir=None)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["execute_pre_post_process", "bb.utils.mkdirhier", "shutil.rmtree", "bb.utils.rename", "bb.utils.copytree", "shutil.copy", "subprocess.check_output", "bb.fatal", "bb.warn", "bb.utils.which", "oe.path.join"], "search-terms": ["Rootfs class", "abstract root filesystem handler", "create rootfs Yocto", "kernel modules", "debug filesystem", "package management"], "state": 2, "file_id": 1789, "knowledge_revision": 14939, "git_revision": "", "ctags": [{"_type": "tag", "name": "Rootfs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^class Rootfs(object, metaclass=ABCMeta):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^    def __init__(self, d, progress_reporter=None, logcatcher=None):$/", "language": "Python", "kind": "member", "signature": "(self, d, progress_reporter=None, logcatcher=None)", "scope": "Rootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_check_for_kernel_modules", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^    def _check_for_kernel_modules(self, modules_dir):$/", "language": "Python", "kind": "member", "signature": "(self, modules_dir)", "scope": "Rootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_cleanup", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^    def _cleanup(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Rootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_create", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^    def _create(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Rootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_create_devfs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^    def _create_devfs(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Rootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_exec_shell_cmd", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^    def _exec_shell_cmd(self, cmd):$/", "language": "Python", "kind": "member", "signature": "(self, cmd)", "scope": "Rootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_generate_kernel_module_deps", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^    def _generate_kernel_module_deps(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Rootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_get_delayed_postinsts", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^    def _get_delayed_postinsts(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Rootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_insert_feed_uris", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^    def _insert_feed_uris(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Rootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_log_check", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^    def _log_check(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Rootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_log_check_common", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^    def _log_check_common(self, type, match):$/", "language": "Python", "kind": "member", "signature": "(self, type, match)", "scope": "Rootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_log_check_error", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^    def _log_check_error(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Rootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_log_check_warn", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^    def _log_check_warn(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Rootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_run_ldconfig", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^    def _run_ldconfig(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Rootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_save_postinsts", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^    def _save_postinsts(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Rootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_setup_dbg_rootfs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^    def _setup_dbg_rootfs(self, dirs):$/", "language": "Python", "kind": "member", "signature": "(self, dirs)", "scope": "Rootfs", "scopeKind": "class"}, {"_type": "tag", "name": "_uninstall_unneeded", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^    def _uninstall_unneeded(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Rootfs", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^    def create(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Rootfs", "scopeKind": "class"}, {"_type": "tag", "name": "create_rootfs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^def create_rootfs(d, manifest_dir=None, progress_reporter=None, logcatcher=None):$/", "language": "Python", "kind": "function", "signature": "(d, manifest_dir=None, progress_reporter=None, logcatcher=None)"}, {"_type": "tag", "name": "get_class_for_type", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^def get_class_for_type(imgtype):$/", "language": "Python", "kind": "function", "signature": "(imgtype)"}, {"_type": "tag", "name": "image_list_installed_packages", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^def image_list_installed_packages(d, rootfs_dir=None):$/", "language": "Python", "kind": "function", "signature": "(d, rootfs_dir=None)"}, {"_type": "tag", "name": "variable_depends", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/rootfs.py", "pattern": "/^def variable_depends(d, manifest_dir=None):$/", "language": "Python", "kind": "function", "signature": "(d, manifest_dir=None)"}], "hash": "02c446f1e836b0fc623aefa7f29bcc39", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "openembedded-core/meta/lib/oe/rootfs.py", "revision_history": [{"14939": ""}]}