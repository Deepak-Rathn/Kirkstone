{"is_source_file": true, "format": "Python", "description": "This file contains self-test cases related to reproducibility, including classes and functions for comparing build artifacts, running diffoscope, and testing reproducible builds within the OpenEmbedded build system. It defines test cases for verifying that builds are consistent across different environments, utilizing external utilities, and managing test assets.", "external_files": ["oeqa/selftest/case", "oeqa/utils/commands", "bb/utils"], "external_methods": ["runCmd", "bitbake", "get_bb_var", "get_bb_vars", "bb.utils.mkdirhier", "bb.utils.remove"], "published": ["ReproducibleTests", "compare_file", "run_diffoscope"], "classes": [{"name": "CompareResult", "description": "Represents the comparison result of two files, including their status (MISSING, DIFFERENT, SAME)."}, {"name": "PackageCompareResults", "description": "Aggregates multiple comparison results for packages, categorizing them into missing, different, same, and handling exclusions."}, {"name": "DiffoscopeTests", "description": "A test case class for validating the functionality of the diffoscope utility within self-test scenarios."}, {"name": "ReproducibleTests", "description": "A self-test case class for verifying reproducibility of build artifacts in the OpenEmbedded build system, including multiple internal methods for setup, comparison, and reporting."}], "methods": [{"name": "compare_file(reference, test, diffutils_sysroot)", "description": "Compares two files and returns a CompareResult indicating if they are same, different, or missing.", "scope": "", "scopeKind": ""}, {"name": "run_diffoscope(a_dir, b_dir, html_dir, max_report_size=0, **kwargs)", "description": "Executes the diffoscope utility to generate a report comparing two directories, with HTML output.", "scope": "", "scopeKind": ""}, {"name": "__eq__(self, other)", "scope": "CompareResult", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self)", "scope": "PackageCompareResults", "scopeKind": "class", "description": "unavailable"}, {"name": "__lt__(self, other)", "scope": "CompareResult", "scopeKind": "class", "description": "unavailable"}, {"name": "__str__(self)", "scope": "PackageCompareResults", "scopeKind": "class", "description": "unavailable"}, {"name": "add_result(self, r)", "scope": "PackageCompareResults", "scopeKind": "class", "description": "unavailable"}, {"name": "append_to_log(self, msg)", "scope": "ReproducibleTests", "scopeKind": "class", "description": "unavailable"}, {"name": "compare_packages(self, reference_dir, test_dir, diffutils_sysroot)", "scope": "ReproducibleTests", "scopeKind": "class", "description": "unavailable"}, {"name": "copy_file(self, source, dest)", "scope": "ReproducibleTests", "scopeKind": "class", "description": "unavailable"}, {"name": "do_test_build(self, name, use_sstate)", "scope": "ReproducibleTests", "scopeKind": "class", "description": "unavailable"}, {"name": "is_excluded(package)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "setUpLocal(self)", "scope": "ReproducibleTests", "scopeKind": "class", "description": "unavailable"}, {"name": "sort(self)", "scope": "PackageCompareResults", "scopeKind": "class", "description": "unavailable"}, {"name": "strip_topdir(s)", "scope": "ReproducibleTests.test_reproducible_builds", "scopeKind": "member", "description": "unavailable"}, {"name": "test_diffoscope(self)", "scope": "DiffoscopeTests", "scopeKind": "class", "description": "unavailable"}, {"name": "test_reproducible_builds(self)", "scope": "ReproducibleTests", "scopeKind": "class", "description": "unavailable"}, {"name": "unused_exclusions(self)", "scope": "PackageCompareResults", "scopeKind": "class", "description": "unavailable"}, {"name": "write_package_list(self, package_class, name, packages)", "scope": "ReproducibleTests", "scopeKind": "class", "description": "unavailable"}], "calls": ["runCmd", "bitbake", "get_bb_var", "get_bb_vars", "bb.utils.mkdirhier", "bb.utils.remove"], "search-terms": ["ReproducibleTests", "compare_file", "run_diffoscope", "selftest", "diffoscope", "reproducibility", "package_compare", "diffutils"], "state": 2, "file_id": 1933, "knowledge_revision": 15077, "git_revision": "", "ctags": [{"_type": "tag", "name": "CompareResult", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^class CompareResult(object):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DIFFERENT", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^DIFFERENT = 'DIFFERENT'$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DiffoscopeTests", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^class DiffoscopeTests(OESelftestTestCase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "MISSING", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^MISSING = 'MISSING'$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "PackageCompareResults", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^class PackageCompareResults(object):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ReproducibleTests", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^class ReproducibleTests(OESelftestTestCase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SAME", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^SAME = 'SAME'$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "__eq__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    def __eq__(self, other):$/", "language": "Python", "kind": "member", "signature": "(self, other)", "scope": "CompareResult", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "CompareResult", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PackageCompareResults", "scopeKind": "class"}, {"_type": "tag", "name": "__lt__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    def __lt__(self, other):$/", "language": "Python", "kind": "member", "signature": "(self, other)", "scope": "CompareResult", "scopeKind": "class"}, {"_type": "tag", "name": "__str__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    def __str__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PackageCompareResults", "scopeKind": "class"}, {"_type": "tag", "name": "add_result", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    def add_result(self, r):$/", "language": "Python", "kind": "member", "signature": "(self, r)", "scope": "PackageCompareResults", "scopeKind": "class"}, {"_type": "tag", "name": "append_to_log", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    def append_to_log(self, msg):$/", "language": "Python", "kind": "member", "signature": "(self, msg)", "scope": "ReproducibleTests", "scopeKind": "class"}, {"_type": "tag", "name": "build_from_sstate", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    build_from_sstate = True$/", "language": "Python", "kind": "variable", "scope": "ReproducibleTests", "scopeKind": "class"}, {"_type": "tag", "name": "compare_file", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^def compare_file(reference, test, diffutils_sysroot):$/", "language": "Python", "kind": "function", "signature": "(reference, test, diffutils_sysroot)"}, {"_type": "tag", "name": "compare_packages", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    def compare_packages(self, reference_dir, test_dir, diffutils_sysroot):$/", "language": "Python", "kind": "member", "signature": "(self, reference_dir, test_dir, diffutils_sysroot)", "scope": "ReproducibleTests", "scopeKind": "class"}, {"_type": "tag", "name": "copy_file", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    def copy_file(self, source, dest):$/", "language": "Python", "kind": "member", "signature": "(self, source, dest)", "scope": "ReproducibleTests", "scopeKind": "class"}, {"_type": "tag", "name": "diffoscope_test_files", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    diffoscope_test_files = os.path.join(os.path.dirname(os.path.abspath(__file__)), \"diffoscope/", "language": "Python", "kind": "variable", "scope": "DiffoscopeTests", "scopeKind": "class"}, {"_type": "tag", "name": "do_test_build", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    def do_test_build(self, name, use_sstate):$/", "language": "Python", "kind": "member", "signature": "(self, name, use_sstate)", "scope": "ReproducibleTests", "scopeKind": "class"}, {"_type": "tag", "name": "exclude_packages", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^exclude_packages = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "is_excluded", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^def is_excluded(package):$/", "language": "Python", "kind": "function", "signature": "(package)"}, {"_type": "tag", "name": "max_report_size", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    max_report_size = 250 * 1024 * 1024$/", "language": "Python", "kind": "variable", "scope": "ReproducibleTests", "scopeKind": "class"}, {"_type": "tag", "name": "package_classes", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    package_classes = ['deb', 'ipk', 'rpm']$/", "language": "Python", "kind": "variable", "scope": "ReproducibleTests", "scopeKind": "class"}, {"_type": "tag", "name": "run_diffoscope", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^def run_diffoscope(a_dir, b_dir, html_dir, max_report_size=0, **kwargs):$/", "language": "Python", "kind": "function", "signature": "(a_dir, b_dir, html_dir, max_report_size=0, **kwargs)"}, {"_type": "tag", "name": "save_results", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^        save_results = os.environ['OEQA_DEBUGGING_SAVED_OUTPUT']$/", "language": "Python", "kind": "variable", "scope": "ReproducibleTests", "scopeKind": "class"}, {"_type": "tag", "name": "save_results", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    save_results = False$/", "language": "Python", "kind": "variable", "scope": "ReproducibleTests", "scopeKind": "class"}, {"_type": "tag", "name": "setUpLocal", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    def setUpLocal(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ReproducibleTests", "scopeKind": "class"}, {"_type": "tag", "name": "sort", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    def sort(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PackageCompareResults", "scopeKind": "class"}, {"_type": "tag", "name": "sstate_targets", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    sstate_targets = []$/", "language": "Python", "kind": "variable", "scope": "ReproducibleTests", "scopeKind": "class"}, {"_type": "tag", "name": "strip_topdir", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^        def strip_topdir(s):$/", "file": true, "language": "Python", "kind": "function", "signature": "(s)", "scope": "ReproducibleTests.test_reproducible_builds", "scopeKind": "member"}, {"_type": "tag", "name": "targets", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    targets = ['core-image-minimal', 'core-image-sato', 'core-image-full-cmdline', 'core-image-w/", "language": "Python", "kind": "variable", "scope": "ReproducibleTests", "scopeKind": "class"}, {"_type": "tag", "name": "test_diffoscope", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    def test_diffoscope(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DiffoscopeTests", "scopeKind": "class"}, {"_type": "tag", "name": "test_reproducible_builds", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    def test_reproducible_builds(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ReproducibleTests", "scopeKind": "class"}, {"_type": "tag", "name": "unused_exclusions", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    def unused_exclusions(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PackageCompareResults", "scopeKind": "class"}, {"_type": "tag", "name": "write_package_list", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "pattern": "/^    def write_package_list(self, package_class, name, packages):$/", "language": "Python", "kind": "member", "signature": "(self, package_class, name, packages)", "scope": "ReproducibleTests", "scopeKind": "class"}], "hash": "56bd6ef6be07af2eca91998a8543e071", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "openembedded-core/meta/lib/oeqa/selftest/cases/reproducible.py", "fields": [{"name": "DIFFERENT = 'DIFFERENT'", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "MISSING = 'MISSING'", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SAME = 'SAME'", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "build_from_sstate = True", "scope": "ReproducibleTests", "scopeKind": "class", "description": "unavailable"}, {"name": "diffoscope_test_files = os.path.join(os.path.dirname(os.path.abspath(__file__)), \"diffoscope/", "scope": "DiffoscopeTests", "scopeKind": "class", "description": "unavailable"}, {"name": "exclude_packages = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "max_report_size = 250 * 1024 * 1024", "scope": "ReproducibleTests", "scopeKind": "class", "description": "unavailable"}, {"name": "package_classes = ['deb', 'ipk', 'rpm']", "scope": "ReproducibleTests", "scopeKind": "class", "description": "unavailable"}, {"name": "save_results = os.environ['OEQA_DEBUGGING_SAVED_OUTPUT']", "scope": "ReproducibleTests", "scopeKind": "class", "description": "unavailable"}, {"name": "save_results = False", "scope": "ReproducibleTests", "scopeKind": "class", "description": "unavailable"}, {"name": "sstate_targets = []", "scope": "ReproducibleTests", "scopeKind": "class", "description": "unavailable"}, {"name": "targets = ['core-image-minimal', 'core-image-sato', 'core-image-full-cmdline', 'core-image-w/", "scope": "ReproducibleTests", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"15077": ""}]}