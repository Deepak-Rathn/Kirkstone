{"is_source_file": true, "format": "C", "description": "This file implements common internal functions for the ohcm (OpenHome Camera) library, including initialization, cleanup, TLS mutual authentication setup, TLS verification level management, and HTTP operations (GET/POST) via libcurl. It also provides XML parsing utilities for responses from cameras, and handles internal state related to TLS certificates and verification settings.", "external_files": ["<curl/curl.h>", "<curl/curlver.h>", "<libxml/xmlversion.h>", "<libxml/tree.h>", "<openHomeCamera/ohcm.h>", "<xmlHelper/xmlHelper.h>", "<urlHelper/urlHelper.h>", "<propsMgr/sslVerify.h>"], "external_methods": ["curl_easy_setopt", "curl_easy_init", "curl_easy_perform", "curl_easy_cleanup", "curl_easy_strerror", "curl_easy_getinfo", "xmlParseMemory", "xmlDocDumpMemoryEnc", "xmlFreeDoc", "xmlFree", "xmlDocGetRootElement", "xmlMemoryDump", "getXmlNodeContentsAsUnsignedInt", "getXmlNodeContentsAsString"], "published": ["initOhcm", "cleanupOhcm", "setOhcmMutualTlsMode", "ohcmIsMtlsCapable", "ohcmSetTLSVerify", "ohcmGetTLSVerify", "ohcmPerformCurlGet", "ohcmPerformCurlPost", "ohcmExportXmlToBuffer", "ohcmParseBasicResponse", "ohcmTranslateOhcmResponseCode", "ohcmTranslateOhcmResponseCodeToCurl", "ohcmParseXmlHelper"], "classes": [], "methods": [{"name": "void applyOhcmMutualTls(CURL * curl)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void cleanupOhcm()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "CURL * createOhcmCurlContext()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "size_t curlReadMemoryCallback(void * ptr,size_t size,size_t nmemb,void * userPtr)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "size_t curlWriteMemoryCallback(void * contents,size_t size,size_t nmemb,void * userPtr)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void destroyOhcmCurlContext(CURL * curl)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void initOhcm()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void ohcmExportXmlToBuffer(xmlDoc * doc,icFifoBuff * buffer)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "sslVerify ohcmGetTLSVerify(void)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool ohcmIsMtlsCapable(void)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool ohcmParseBasicResponse(icFifoBuff * result,ohcmBasicResponse * parsed)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool ohcmParseXmlHelper(icFifoBuff * xmlBuffer,ohcmParseXmlNodeCallback func,void * funcArg)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void ohcmParseXmlNodeChildren(xmlNodePtr node,ohcmParseXmlNodeCallback func,void * funcArg)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "CURLcode ohcmPerformCurlGet(CURL * ctx,char * url,icFifoBuff * result,uint32_t retryAttempts)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "CURLcode ohcmPerformCurlPost(CURL * ctx,char * url,icFifoBuff * payload,icFifoBuff * result,uint32_t retryAttempts)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void ohcmSetTLSVerify(sslVerify level)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ohcmResultCode ohcmTranslateCurlCode(CURLcode code)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "CURLcode ohcmTranslateHttpCode(long httpCode)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ohcmResultCode ohcmTranslateOhcmResponseCode(ohcmResponseCode code)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "CURLcode ohcmTranslateOhcmResponseCodeToCurl(ohcmResponseCode code)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool parseBasicXmlNode(const xmlChar * top,xmlNodePtr node,void * funcArg)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void setOhcmMutualTlsMode(const char * certFilename,const char * privKeyFilename)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["curl_easy_setopt", "curl_easy_init", "applyStandardCurlOptions", "applyOhcmMutualTls", "curl_easy_perform", "fifoBuffPush", "fifoBuffGetPullAvailable", "fifoBuffClone", "fifoBuffPushByte", "fifoBuffPullPointer", "fifoBuffPull", "fifoBuffDestroy", "xmlParseMemory", "xmlDocDumpMemoryEnc", "xmlFreeDoc", "xmlMemoryDump", "xmlDocGetRootElement", "getXmlNodeContentsAsUnsignedInt", "getXmlNodeContentsAsString", "xmlFree", "xmlDocFree"], "search-terms": ["OHCM", "curl", "xml", "mutual TLS", "TLS verify", "libxml", "XML parsing", "libcurl", "HTTP GET", "HTTP POST"], "state": 2, "file_id": 601, "knowledge_revision": 13766, "git_revision": "", "ctags": [{"_type": "tag", "name": "CURL_RETRY_SLEEP_MICROSECONDS", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^#define CURL_RETRY_SLEEP_MICROSECONDS /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "MUTUAL_TLS_MTX", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^static pthread_mutex_t MUTUAL_TLS_MTX = PTHREAD_MUTEX_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "applyOhcmMutualTls", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^static void applyOhcmMutualTls(CURL *curl)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(CURL * curl)"}, {"_type": "tag", "name": "cleanupOhcm", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^void cleanupOhcm()$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "clientCertFilename", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^static char *clientCertFilename = NULL;         \\/\\/ for Mutual TLS support (must be client + in/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "variable"}, {"_type": "tag", "name": "clientPrivKeyFilename", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^static char *clientPrivKeyFilename = NULL;$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "variable"}, {"_type": "tag", "name": "createOhcmCurlContext", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^CURL *createOhcmCurlContext()$/", "language": "C", "typeref": "typename:CURL *", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "curlReadMemoryCallback", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^static size_t curlReadMemoryCallback(void *ptr, size_t size, size_t nmemb, void *userPtr)$/", "file": true, "language": "C", "typeref": "typename:size_t", "kind": "function", "signature": "(void * ptr,size_t size,size_t nmemb,void * userPtr)"}, {"_type": "tag", "name": "curlWriteMemoryCallback", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^static size_t curlWriteMemoryCallback(void *contents, size_t size, size_t nmemb, void *userPtr)$/", "file": true, "language": "C", "typeref": "typename:size_t", "kind": "function", "signature": "(void * contents,size_t size,size_t nmemb,void * userPtr)"}, {"_type": "tag", "name": "destroyOhcmCurlContext", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^void destroyOhcmCurlContext(CURL *curl)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(CURL * curl)"}, {"_type": "tag", "name": "initOhcm", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^void initOhcm()$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "ohcmExportXmlToBuffer", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^void ohcmExportXmlToBuffer(xmlDoc *doc, icFifoBuff *buffer)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(xmlDoc * doc,icFifoBuff * buffer)"}, {"_type": "tag", "name": "ohcmGetTLSVerify", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^sslVerify ohcmGetTLSVerify(void)$/", "language": "C", "typeref": "typename:sslVerify", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "ohcmIsMtlsCapable", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^bool ohcmIsMtlsCapable(void)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "ohcmParseBasicResponse", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^bool ohcmParseBasicResponse(icFifoBuff *result, ohcmBasicResponse *parsed)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(icFifoBuff * result,ohcmBasicResponse * parsed)"}, {"_type": "tag", "name": "ohcmParseXmlHelper", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^bool ohcmParseXmlHelper(icFifoBuff *xmlBuffer, ohcmParseXmlNodeCallback func, void *funcArg)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(icFifoBuff * xmlBuffer,ohcmParseXmlNodeCallback func,void * funcArg)"}, {"_type": "tag", "name": "ohcmParseXmlNodeChildren", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^void ohcmParseXmlNodeChildren(xmlNodePtr node, ohcmParseXmlNodeCallback func, void *funcArg)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(xmlNodePtr node,ohcmParseXmlNodeCallback func,void * funcArg)"}, {"_type": "tag", "name": "ohcmPerformCurlGet", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^CURLcode ohcmPerformCurlGet(CURL *ctx, char *url, icFifoBuff *result, uint32_t retryAttempts)$/", "language": "C", "typeref": "typename:CURLcode", "kind": "function", "signature": "(CURL * ctx,char * url,icFifoBuff * result,uint32_t retryAttempts)"}, {"_type": "tag", "name": "ohcmPerformCurlPost", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^CURLcode ohcmPerformCurlPost(CURL *ctx, char *url, icFifoBuff *payload, icFifoBuff *result, uint/", "language": "C", "typeref": "typename:CURLcode", "kind": "function", "signature": "(CURL * ctx,char * url,icFifoBuff * payload,icFifoBuff * result,uint32_t retryAttempts)"}, {"_type": "tag", "name": "ohcmSetTLSVerify", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^void ohcmSetTLSVerify(sslVerify level)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(sslVerify level)"}, {"_type": "tag", "name": "ohcmTranslateCurlCode", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^ohcmResultCode ohcmTranslateCurlCode(CURLcode code)$/", "language": "C", "typeref": "typename:ohcmResultCode", "kind": "function", "signature": "(CURLcode code)"}, {"_type": "tag", "name": "ohcmTranslateHttpCode", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^CURLcode ohcmTranslateHttpCode(long httpCode)$/", "language": "C", "typeref": "typename:CURLcode", "kind": "function", "signature": "(long httpCode)"}, {"_type": "tag", "name": "ohcmTranslateOhcmResponseCode", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^ohcmResultCode ohcmTranslateOhcmResponseCode(ohcmResponseCode code)$/", "language": "C", "typeref": "typename:ohcmResultCode", "kind": "function", "signature": "(ohcmResponseCode code)"}, {"_type": "tag", "name": "ohcmTranslateOhcmResponseCodeToCurl", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^CURLcode ohcmTranslateOhcmResponseCodeToCurl(ohcmResponseCode code)$/", "language": "C", "typeref": "typename:CURLcode", "kind": "function", "signature": "(ohcmResponseCode code)"}, {"_type": "tag", "name": "parseBasicXmlNode", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^static bool parseBasicXmlNode(const xmlChar *top, xmlNodePtr node, void *funcArg)$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(const xmlChar * top,xmlNodePtr node,void * funcArg)"}, {"_type": "tag", "name": "setOhcmMutualTlsMode", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^void setOhcmMutualTlsMode(const char *certFilename, const char *privKeyFilename)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(const char * certFilename,const char * privKeyFilename)"}, {"_type": "tag", "name": "tlsVerify", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "pattern": "/^static sslVerify tlsVerify = SSL_VERIFY_NONE;$/", "file": true, "language": "C", "typeref": "typename:sslVerify", "kind": "variable"}], "hash": "850aa234fcd08c0cedeb4d64e7cbdde3", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "components/opensource/zilker-sdk/source/libs/device/camera/c/src/ohcmBase.c", "fields": [{"name": "pthread_mutex_t MUTUAL_TLS_MTX", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char * clientCertFilename", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char * clientPrivKeyFilename", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "sslVerify tlsVerify", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"13766": ""}]}