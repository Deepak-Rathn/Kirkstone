{"is_source_file": true, "format": "Python", "description": "This file defines classes and methods for managing controller images and hardware targets in a testing environment. It includes functionality for deploying images, controlling power, rebooting, and boot management specifically for devices using Systemdboot. Key classes include ControllerImageHardwareTarget and SystemdbootTarget, which manage interactions with target hardware to facilitate testing scenarios.", "external_files": ["bb", "oeqa.targetcontrol", "oeqa.utils.sshcontrol", "oeqa.utils.commands", "oeqa.utils"], "external_methods": ["bb.fatal", "bb.note", "bb.plain", "commands.runCmd", "commands.CommandError", "subprocess.check_output"], "published": ["ControllerImageHardwareTarget", "SystemdbootTarget"], "classes": [{"name": "ControllerImageHardwareTarget", "description": "Abstract class managing deployment and control of a controller image on hardware targets, providing methods for power control, deployment, and reboot management."}, {"name": "SystemdbootTarget", "description": "Subclass of ControllerImageHardwareTarget for targets using Systemdboot, managing EFI variables and bootloader configuration."}], "methods": [{"name": "power_ctl(self, msg)", "description": "Controls power state of the target using the specified power control command.", "scope": "ControllerImageHardwareTarget", "scopeKind": "class"}, {"name": "power_cycle(self, conn)", "description": "Reboots or power cycles the target device.", "scope": "ControllerImageHardwareTarget", "scopeKind": "class"}, {"name": "_wait_until_booted(self)", "description": "Waits until the target device has booted after a power cycle.", "scope": "ControllerImageHardwareTarget", "scopeKind": "class"}, {"name": "deploy(self)", "description": "Establishes SSH connection and deploys the test image, performing reboots if necessary.", "scope": "ControllerImageHardwareTarget", "scopeKind": "class"}, {"name": "_deploy(self)", "description": "Abstract method to be implemented by subclasses for deploying images.", "scope": "SystemdbootTarget", "scopeKind": "class"}, {"name": "start(self, extra_bootparams=None)", "description": "Starts the target with the test image and initializes SSH connection.", "scope": "ControllerImageHardwareTarget", "scopeKind": "class"}, {"name": "_start(self)", "description": "Abstract method to be implemented by subclasses for starting the target.", "scope": "ControllerImageHardwareTarget", "scopeKind": "class"}, {"name": "stop(self)", "description": "Reboots or power cycles the target device.", "scope": "ControllerImageHardwareTarget", "scopeKind": "class"}, {"name": "SystemdbootTarget", "description": "Subclass managing EFI variables and bootloader configuration specific to Systemdboot-based systems."}, {"name": "_deploy", "description": "Uploads kernel and root filesystem, and configures EFI settings for boot."}, {"name": "_start(self, params=None)", "description": "Reboots the target to start the test image after deployment.", "scope": "SystemdbootTarget", "scopeKind": "class"}, {"name": "__init__(self, d)", "scope": "SystemdbootTarget", "scopeKind": "class", "description": "unavailable"}], "calls": ["os.path.isfile", "bb.fatal", "bb.note", "commands.runCmd", "subprocess.check_output", "time.sleep"], "search-terms": ["ControllerImageHardwareTarget", "SystemdbootTarget", "deploy", "power_control", "efi", "bootloader", "testimage", "target control", "systemdboot EFI variable"], "state": 2, "file_id": 1838, "knowledge_revision": 14981, "git_revision": "", "ctags": [{"_type": "tag", "name": "ControllerImageHardwareTarget", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/controllers/controllerimage.py", "pattern": "/^class ControllerImageHardwareTarget(oeqa.targetcontrol.BaseTarget, metaclass=ABCMeta):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SystemdbootTarget", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/controllers/controllerimage.py", "pattern": "/^class SystemdbootTarget(ControllerImageHardwareTarget):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/controllers/controllerimage.py", "pattern": "/^    def __init__(self, d):$/", "language": "Python", "kind": "member", "signature": "(self, d)", "scope": "ControllerImageHardwareTarget", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/controllers/controllerimage.py", "pattern": "/^    def __init__(self, d):$/", "language": "Python", "kind": "member", "signature": "(self, d)", "scope": "SystemdbootTarget", "scopeKind": "class"}, {"_type": "tag", "name": "_deploy", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/controllers/controllerimage.py", "pattern": "/^    def _deploy(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ControllerImageHardwareTarget", "scopeKind": "class"}, {"_type": "tag", "name": "_deploy", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/controllers/controllerimage.py", "pattern": "/^    def _deploy(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "SystemdbootTarget", "scopeKind": "class"}, {"_type": "tag", "name": "_start", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/controllers/controllerimage.py", "pattern": "/^    def _start(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ControllerImageHardwareTarget", "scopeKind": "class"}, {"_type": "tag", "name": "_start", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/controllers/controllerimage.py", "pattern": "/^    def _start(self, params=None):$/", "language": "Python", "kind": "member", "signature": "(self, params=None)", "scope": "SystemdbootTarget", "scopeKind": "class"}, {"_type": "tag", "name": "_wait_until_booted", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/controllers/controllerimage.py", "pattern": "/^    def _wait_until_booted(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ControllerImageHardwareTarget", "scopeKind": "class"}, {"_type": "tag", "name": "commands", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/controllers/controllerimage.py", "pattern": "/^import oeqa.utils.commands as commands$/", "language": "Python", "kind": "namespace", "nameref": "module:oeqa.utils.commands"}, {"_type": "tag", "name": "deploy", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/controllers/controllerimage.py", "pattern": "/^    def deploy(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ControllerImageHardwareTarget", "scopeKind": "class"}, {"_type": "tag", "name": "power_ctl", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/controllers/controllerimage.py", "pattern": "/^    def power_ctl(self, msg):$/", "language": "Python", "kind": "member", "signature": "(self, msg)", "scope": "ControllerImageHardwareTarget", "scopeKind": "class"}, {"_type": "tag", "name": "power_cycle", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/controllers/controllerimage.py", "pattern": "/^    def power_cycle(self, conn):$/", "language": "Python", "kind": "member", "signature": "(self, conn)", "scope": "ControllerImageHardwareTarget", "scopeKind": "class"}, {"_type": "tag", "name": "sshcontrol", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/controllers/controllerimage.py", "pattern": "/^import oeqa.utils.sshcontrol as sshcontrol$/", "language": "Python", "kind": "namespace", "nameref": "module:oeqa.utils.sshcontrol"}, {"_type": "tag", "name": "start", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/controllers/controllerimage.py", "pattern": "/^    def start(self, extra_bootparams=None):$/", "language": "Python", "kind": "member", "signature": "(self, extra_bootparams=None)", "scope": "ControllerImageHardwareTarget", "scopeKind": "class"}, {"_type": "tag", "name": "stop", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/controllers/controllerimage.py", "pattern": "/^    def stop(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ControllerImageHardwareTarget", "scopeKind": "class"}, {"_type": "tag", "name": "supported_image_fstypes", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/controllers/controllerimage.py", "pattern": "/^    supported_image_fstypes = ['tar.gz', 'tar.bz2']$/", "language": "Python", "kind": "variable", "scope": "ControllerImageHardwareTarget", "scopeKind": "class"}], "hash": "53bfb06750c1c2d8e09cef4d2ead83a7", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "openembedded-core/meta/lib/oeqa/controllers/controllerimage.py", "fields": [{"name": "supported_image_fstypes = ['tar.gz', 'tar.bz2']", "scope": "ControllerImageHardwareTarget", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"14981": ""}]}