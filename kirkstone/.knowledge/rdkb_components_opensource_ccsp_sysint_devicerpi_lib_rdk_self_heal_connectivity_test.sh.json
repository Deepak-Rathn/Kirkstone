{"is_source_file": true, "format": "shell script", "description": "This file is a shell script that performs network connectivity tests and self-healing actions. It includes functions to check DNS resolution, ping gateways and servers over IPv4 and IPv6, and triggers corrective actions if connectivity issues are detected. It also manages scheduling these tests at randomized or configured intervals.", "external_files": ["/usr/ccsp/tad/corrective_action.sh"], "external_methods": ["syscfg get", "syscfg get ConnTest_CorrectiveAction", "syscfg get selfheal_dns_pingtest_enable", "syscfg get selfheal_dns_pingtest_url", "syscfg get selfheal_ping_DataBlockSize", "syscfg get ConnTest_NumPingsPerServer", "syscfg get ConnTest_PingRespWaitTime", "sysevent get default_router", "ifconfig", "ip -6 neigh show", "ip -6 route list", "syscfg get Ipv4PingServer_Count", "syscfg get Ipv6PingServer_Count", "syscfg get Ipv4_PingServer_*", "syscfg get Ipv6_PingServer_*", "echo_t", "resetNeeded"], "published": [], "classes": [], "methods": [{"name": "getCorrectiveActionState", "description": "Retrieves the current state of the corrective action setting from system configuration."}, {"name": "calcRandTimetoStartPing", "description": "Calculates a random delay in seconds to start ping tests, based on a random min and sec."}, {"name": "removehttp", "description": "Removes the protocol prefix (http/https) from a URL, extracting the hostname."}, {"name": "runDNSPingTest", "description": "Performs a DNS ping test by resolving a configured URL and triggers corrective actions if resolution fails and enabled."}, {"name": "runPingTest", "description": "Performs detailed network connectivity checks by pinging IPv4 and IPv6 gateways and user-defined servers; triggers corrective actions on failure."}], "calls": ["syscfg get", "syscfg get ConnTest_CorrectiveAction", "syscfg get selfheal_dns_pingtest_enable", "syscfg get selfheal_dns_pingtest_url", "syscfg get selfheal_ping_DataBlockSize", "syscfg get ConnTest_NumPingsPerServer", "syscfg get ConnTest_PingRespWaitTime", "sysevent get default_router", "ifconfig", "ip -6 neigh show", "ip -6 route list", "syscfg get Ipv4PingServer_Count", "syscfg get Ipv6PingServer_Count", "syscfg get Ipv4_PingServer_*", "syscfg get Ipv6_PingServer_*", "echo_t", "resetNeeded"], "search-terms": ["selfheal", "connectivity", "ping", "DNS", "IPv4", "IPv6", "gateway", "self_heal", "rpi", "rdk"], "state": 2, "file_id": 7133, "knowledge_revision": 20214, "git_revision": "", "hash": "c44a1ad31744b76ad2bfdb35b35c631a", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/sysint/devicerpi/lib/rdk/self_heal_connectivity_test.sh", "revision_history": [{"20214": ""}]}