{"is_source_file": true, "format": "C++ header file", "description": "This file defines the omi::OmiService class, which manages a service involving mounting and unmounting filesystems, interfacing with D-Bus, and handling events related to the service lifecycle. It includes method declarations, data members, and nested structures relevant to the service's operation.", "external_files": ["mntfsimg.hpp", "omi_dbus_api.h"], "external_methods": ["GMainLoop* g_main_loop_new", "GDBusConnection* g_dbus_connection_new_for_address", "g_dbus_method_invocation_return_value", "GDBusMethodInvocation*", "g_dbus_connection_register_object", "g_main_loop_run"], "published": ["omi::OmiService"], "classes": [{"name": "OmiService", "description": "Manages the lifecycle and operations of the OMI service, including mounting, unmounting, and interaction with D-Bus.", "methods": [{"name": "OmiService", "description": "Constructor for the OmiService class."}, {"name": "~OmiService", "description": "Destructor for the OmiService class."}, {"name": "Run", "description": "Starts the service's main loop and operations."}, {"name": "Shutdown", "description": "Handles shutting down the service safely."}, {"name": "ChangeRoot", "description": "Performs operations to change the root filesystem context."}], "structs": [{"name": "st_mount", "description": "Represents a mount point with an identifier and filesystem path."}]}], "methods": [{"name": "OnMount", "description": "Callback invoked when a mount operation is requested via D-Bus."}, {"name": "OnUnmount", "description": "Callback invoked when an unmount operation is requested via D-Bus."}, {"name": "OnBusAcquired", "description": "Handles the event when the D-Bus bus is acquired for communication."}, {"name": "OnNameAcquired", "description": "Handles the event when the service's D-Bus name is acquired."}, {"name": "OnNameLost", "description": "Handles the event when the service's D-Bus name is lost."}, {"name": "OnDestroyNotify", "description": "Cleaner callback when the service is destroyed or disposed."}, {"name": "OnDmVerityError", "description": "Handles errors related to device-mapper verity devices."}], "calls": ["g_main_loop_new", "g_dbus_connection_new_for_address", "g_dbus_method_invocation_return_value", "g_dbus_connection_register_object", "g_main_loop_run"], "search-terms": ["OmiService", "D-Bus", "mount", "unmount", "Rootfs", "Verity", "GMainLoop", "g_dbus", "omi"], "state": 2, "file_id": 309, "knowledge_revision": 26180, "git_revision": "", "ctags": [{"_type": "tag", "name": "Mount", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/OMI/src/omi_service.hpp", "pattern": "/^using Mount = struct st_mount;$/", "language": "C++", "typeref": "struct:st_mount", "kind": "typedef", "scope": "omi::OmiService", "scopeKind": "class"}, {"_type": "tag", "name": "OMI_SERVICE_HPP_", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/OMI/src/omi_service.hpp", "pattern": "/^#define OMI_SERVICE_HPP_$/", "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "OmiService", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/OMI/src/omi_service.hpp", "pattern": "/^class OmiService$/", "language": "C++", "kind": "class", "scope": "omi", "scopeKind": "namespace"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/OMI/src/omi_service.hpp", "pattern": "/^    std::string id;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "omi::OmiService::st_mount", "scopeKind": "struct"}, {"_type": "tag", "name": "m_loop", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/OMI/src/omi_service.hpp", "pattern": "/^    GMainLoop* m_loop;$/", "language": "C++", "typeref": "typename:GMainLoop *", "kind": "member", "scope": "omi::OmiService", "scopeKind": "class"}, {"_type": "tag", "name": "m_mounter", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/OMI/src/omi_service.hpp", "pattern": "/^    mntfsimg::ImageMounter m_mounter;$/", "language": "C++", "typeref": "typename:mntfsimg::ImageMounter", "kind": "member", "scope": "omi::OmiService", "scopeKind": "class"}, {"_type": "tag", "name": "m_mounts", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/OMI/src/omi_service.hpp", "pattern": "/^    std::vector<Mount> m_mounts;$/", "language": "C++", "typeref": "typename:std::vector<Mount>", "kind": "member", "scope": "omi::OmiService", "scopeKind": "class"}, {"_type": "tag", "name": "m_omi1_skeleton", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/OMI/src/omi_service.hpp", "pattern": "/^    Omi1* m_omi1_skeleton;$/", "language": "C++", "typeref": "typename:Omi1 *", "kind": "member", "scope": "omi::OmiService", "scopeKind": "class"}, {"_type": "tag", "name": "m_owner_id", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/OMI/src/omi_service.hpp", "pattern": "/^    guint m_owner_id;$/", "language": "C++", "typeref": "typename:guint", "kind": "member", "scope": "omi::OmiService", "scopeKind": "class"}, {"_type": "tag", "name": "m_shutdown_thread", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/OMI/src/omi_service.hpp", "pattern": "/^    std::thread m_shutdown_thread;$/", "language": "C++", "typeref": "typename:std::thread", "kind": "member", "scope": "omi::OmiService", "scopeKind": "class"}, {"_type": "tag", "name": "omi", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/OMI/src/omi_service.hpp", "pattern": "/^namespace omi$/", "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "rootfs_path", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/OMI/src/omi_service.hpp", "pattern": "/^    std::string rootfs_path;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "omi::OmiService::st_mount", "scopeKind": "struct"}, {"_type": "tag", "name": "st_mount", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/OMI/src/omi_service.hpp", "pattern": "/^struct st_mount$/", "language": "C++", "kind": "struct", "scope": "omi::OmiService", "scopeKind": "class"}], "hash": "fe395afd84867cdd501c938598f8ab0f", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "components/opensource/OMI/src/omi_service.hpp", "fields": [{"name": "std::string id", "scope": "omi::OmiService::st_mount", "scopeKind": "struct", "description": "unavailable"}, {"name": "GMainLoop * m_loop", "scope": "omi::OmiService", "scopeKind": "class", "description": "unavailable"}, {"name": "mntfsimg::ImageMounter m_mounter", "scope": "omi::OmiService", "scopeKind": "class", "description": "unavailable"}, {"name": "std::vector<Mount> m_mounts", "scope": "omi::OmiService", "scopeKind": "class", "description": "unavailable"}, {"name": "Omi1 * m_omi1_skeleton", "scope": "omi::OmiService", "scopeKind": "class", "description": "unavailable"}, {"name": "guint m_owner_id", "scope": "omi::OmiService", "scopeKind": "class", "description": "unavailable"}, {"name": "std::thread m_shutdown_thread", "scope": "omi::OmiService", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string rootfs_path", "scope": "omi::OmiService::st_mount", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"26180": ""}]}