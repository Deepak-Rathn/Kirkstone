{"is_source_file": true, "format": "C", "description": "This source file appears to implement an API for managing hotspot connectivity, tunnels, and VLAN configurations in a networking environment. It includes functions for setting up GRE tunnels, handling system events, configuring bridge and VLAN settings, managing hotspot state, and related low-level network operations.", "external_files": ["libHotspot.h", "libHotspotApi.h", "webconfig_framework.h", "ccsp_psm_helper.h", "ansc_platform.h", "telemetry_busmessage_sender.h"], "external_methods": ["sysevent_open", "sysevent_set", "sysevent_get", "system", "access", "inet_pton", "popen", "fgets", "pclose", "free", "malloc", "memset", "strncpy", "snprintf", "strcmp", "sleep", "system", "fclose"], "published": ["setHotspot", "deleteHotspot", "confirmVap", "register_callbackHotspot", "hotspot_wan_failover"], "classes": [], "methods": [{"name": "bool tunnel_param_synchronize()", "description": "Synchronizes tunnel parameters by invoking a callback with current configuration data.", "scope": "", "scopeKind": ""}, {"name": "void sys_execute_cmd(char * cmd)", "description": "Executes a system command via system().", "scope": "", "scopeKind": ""}, {"name": "int gre_sysevent_syscfg_init()", "description": "Initializes system event handle for hotspot configuration.", "scope": "", "scopeKind": ""}, {"name": "int update_bridge_config(int index)", "description": "Updates the system configuration for the specified VLAN index.", "scope": "", "scopeKind": ""}, {"name": "void firewall_restart()", "description": "Restarts the firewall by triggering sysevent.", "scope": "", "scopeKind": ""}, {"name": "char * get_local_ipv6_address()", "description": "Retrieves the local IPv6 address by executing a shell command.", "scope": "", "scopeKind": ""}, {"name": "int ipAddress_version(char * ipAddress)", "description": "Determines IP version (4 or 6) for an address.", "scope": "", "scopeKind": ""}, {"name": "int create_tunnel(char * gre_primary_endpoint)", "description": "Creates a GRE tunnel with the specified primary endpoint.", "scope": "", "scopeKind": ""}, {"name": "int deleteVaps()", "description": "Deletes existing VAPs and cleans up related interfaces.", "scope": "", "scopeKind": ""}, {"name": "void hotspot_async_reg()", "description": "Registers asynchronous system event handling for GRE ep events.", "scope": "", "scopeKind": ""}, {"name": "int hotspot_sysevent_enable_param()", "description": "Enables various hotspot parameters via sysevent.", "scope": "", "scopeKind": ""}, {"name": "int getHotspotVapIndex(char * vapName)", "description": "Returns VLAN index based on VAP name.", "scope": "", "scopeKind": ""}, {"name": "void configHotspotBridgeVlan(char * vapName,int wan_vlan)", "description": "Configures bridge and VLAN setup for a given VAP.", "scope": "", "scopeKind": ""}, {"name": "int validateIpAddress(char * ipAddress)", "description": "Validates an IP address for correctness and reserved values.", "scope": "", "scopeKind": ""}, {"name": "bool get_ssid_enable(int ssidIdx)", "description": "Checks if a WiFi SSID is enabled by querying parameters.", "scope": "", "scopeKind": ""}, {"name": "int PsmGet(const char * param,char * value,int size)", "description": "Retrieves a value from PSM (persistent storage) for a given parameter.", "scope": "", "scopeKind": ""}, {"name": "int PsmSet(const char * param,const char * value)", "description": "Sets a value in PSM for a given parameter.", "scope": "", "scopeKind": ""}, {"name": "int prepareFirstRollback()", "description": "Stores current tunnel info for potential rollback.", "scope": "", "scopeKind": ""}, {"name": "bool prevalidateHotspotBlob(tunneldoc_t * pGreTunnelData)", "description": "Pre-validates a hotspot configuration blob before applying.", "scope": "", "scopeKind": ""}, {"name": "pErr setHotspot(void * const network)", "description": "Main API to set hotspot configuration based on input data, manages tunnels, VLANs, and state.", "scope": "", "scopeKind": ""}, {"name": "size_t calculateTimeout(size_t numOfEntries)", "description": "Calculates a timeout based on entries, currently fixed to 30.", "scope": "", "scopeKind": ""}, {"name": "void register_callbackHotspot(callbackHotspot ptr_reg_callback)", "description": "Registers a callback function for hotspot synchronization events.", "scope": "", "scopeKind": ""}, {"name": "int wanfailover_handleTunnel(bool create)", "description": "Handles bringing down or up hotspot tunnels for WAN failover.", "scope": "", "scopeKind": ""}, {"name": "int hotspot_wan_failover(bool remote_wan_enabled)", "description": "Manages failover handling for WAN connectivity, adjusting tunnel state accordingly.", "scope": "", "scopeKind": ""}, {"name": "void recreate_tunnel()", "description": "Deletes existing GRE tunnel interfaces and restores previous configuration.", "scope": "", "scopeKind": ""}, {"name": "void addBrideAndVlan(int vlanIndex,int wan_vlan)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int confirmVap()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int deleteHotspot()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int hotspot_sysevent_disable_param()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["sysevent_open", "sysevent_set", "sysevent_get", "system", "access", "inet_pton", "popen", "fgets", "pclose", "free", "malloc", "memset", "strncpy", "snprintf", "strcmp", "sleep"], "search-terms": ["HotspotApi", "GRE tunnel", "VLAN configuration", "hotspot", "WLAN enable", "system event", "psm", "failover", "VAP", "bridge"], "state": 2, "file_id": 9755, "knowledge_revision": 22781, "git_revision": "", "ctags": [{"_type": "tag", "name": "BUFF_LEN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^#define  BUFF_LEN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "PsmGet", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^PsmGet(const char *param, char *value, int size)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(const char * param,char * value,int size)"}, {"_type": "tag", "name": "PsmSet", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^PsmSet(const char *param, const char *value)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(const char * param,const char * value)"}, {"_type": "tag", "name": "addBrideAndVlan", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^static void addBrideAndVlan(int vlanIndex, int wan_vlan){$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(int vlanIndex,int wan_vlan)"}, {"_type": "tag", "name": "calculateTimeout", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^size_t calculateTimeout(size_t numOfEntries){$/", "language": "C", "typeref": "typename:size_t", "kind": "function", "signature": "(size_t numOfEntries)"}, {"_type": "tag", "name": "configHotspotBridgeVlan", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^void configHotspotBridgeVlan(char *vapName, int wan_vlan){$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(char * vapName,int wan_vlan)"}, {"_type": "tag", "name": "confirmVap", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^int confirmVap(){$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "create_tunnel", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^int create_tunnel(char *gre_primary_endpoint){$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * gre_primary_endpoint)"}, {"_type": "tag", "name": "deleteHotspot", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^int deleteHotspot(){$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "deleteVaps", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^static int deleteVaps(){$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "execRetVal", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^static pErr execRetVal = NULL;$/", "file": true, "language": "C", "typeref": "typename:pErr", "kind": "variable"}, {"_type": "tag", "name": "firewall_restart", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^void firewall_restart() {$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "gCallbackSync", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^callbackHotspot gCallbackSync = NULL;$/", "language": "C", "typeref": "typename:callbackHotspot", "kind": "variable"}, {"_type": "tag", "name": "gPriEndptIP", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^char     gPriEndptIP[SIZE_OF_IP] = {0};$/", "language": "C", "typeref": "typename:char[]", "kind": "variable"}, {"_type": "tag", "name": "gSecEndptIP", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^char     gSecEndptIP[SIZE_OF_IP] = {0};$/", "language": "C", "typeref": "typename:char[]", "kind": "variable"}, {"_type": "tag", "name": "gSysevent_token", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^token_t gSysevent_token;$/", "language": "C", "typeref": "typename:token_t", "kind": "variable"}, {"_type": "tag", "name": "gSyseventfd", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^int gSyseventfd;$/", "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "gXfinityEnable", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^bool     gXfinityEnable = false;$/", "language": "C", "typeref": "typename:bool", "kind": "variable"}, {"_type": "tag", "name": "getHotspotVapIndex", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^int getHotspotVapIndex(char *vapName) {$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * vapName)"}, {"_type": "tag", "name": "get_local_ipv6_address", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^char* get_local_ipv6_address(){$/", "language": "C", "typeref": "typename:char *", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_ssid_enable", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^bool get_ssid_enable(int ssidIdx)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(int ssidIdx)"}, {"_type": "tag", "name": "gre_sysevent_syscfg_init", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^int gre_sysevent_syscfg_init()$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "hotspot_async_reg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^static void hotspot_async_reg()$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "hotspot_sysevent_disable_param", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^static int hotspot_sysevent_disable_param(){$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "hotspot_sysevent_enable_param", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^int hotspot_sysevent_enable_param(){$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "hotspot_wan_failover", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^int hotspot_wan_failover(bool remote_wan_enabled){$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(bool remote_wan_enabled)"}, {"_type": "tag", "name": "ipAddress_version", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^int ipAddress_version(char *ipAddress){$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * ipAddress)"}, {"_type": "tag", "name": "prepareFirstRollback", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^int prepareFirstRollback(){$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "prevalidateHotspotBlob", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^bool prevalidateHotspotBlob(tunneldoc_t *pGreTunnelData)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(tunneldoc_t * pGreTunnelData)"}, {"_type": "tag", "name": "recreate_tunnel", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^void recreate_tunnel(){$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "register_callbackHotspot", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^void register_callbackHotspot(callbackHotspot ptr_reg_callback){$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(callbackHotspot ptr_reg_callback)"}, {"_type": "tag", "name": "setHotspot", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^pErr setHotspot(void* const network){$/", "language": "C", "typeref": "typename:pErr", "kind": "function", "signature": "(void * const network)"}, {"_type": "tag", "name": "sys_execute_cmd", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^static void sys_execute_cmd(char *cmd){$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(char * cmd)"}, {"_type": "tag", "name": "tunnel_param_synchronize", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^bool tunnel_param_synchronize() {$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "update_bridge_config", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^int update_bridge_config(int index) {$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(int index)"}, {"_type": "tag", "name": "validateIpAddress", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^int  validateIpAddress(char *ipAddress){$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * ipAddress)"}, {"_type": "tag", "name": "vapBitMask", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^char     vapBitMask = 0x00;$/", "language": "C", "typeref": "typename:char", "kind": "variable"}, {"_type": "tag", "name": "vlanIdList", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^int      vlanIdList[MAX_VAP];$/", "language": "C", "typeref": "typename:int[]", "kind": "variable"}, {"_type": "tag", "name": "wanfailover_handleTunnel", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "pattern": "/^static int wanfailover_handleTunnel(bool create)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(bool create)"}], "hash": "5c7386a387f05ea0e383655545b3a4f3", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/hotspot/source/HotspotApi/HotspotApi.c", "fields": [{"name": "pErr execRetVal", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "callbackHotspot gCallbackSync", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char[] gPriEndptIP", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char[] gSecEndptIP", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "token_t gSysevent_token", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int gSyseventfd", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool gXfinityEnable", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char vapBitMask", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int[] vlanIdList", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"22781": ""}]}