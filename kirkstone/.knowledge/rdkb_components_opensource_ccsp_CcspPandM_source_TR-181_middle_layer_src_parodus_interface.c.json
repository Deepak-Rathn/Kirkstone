{"is_source_file": true, "format": "C", "description": "This source file 'parodus_interface.c' implements the interface and logic for connecting to the Parodus messaging system, handling notifications, retrieving device information, and managing system status alerts in a device management context.", "external_files": ["ansc_platform.h", "ccsp_base_api.h", "<libparodus/libparodus.h>", "<cjson/cJSON.h>", "<sysevent/sysevent.h>", "<syscfg/syscfg.h>", "cosa_deviceinfo_apis.h", "utapi/utapi.h", "utapi/utapi_util.h", "safec_lib_common.h"], "external_methods": ["libparodus_init", "libparodus_shutdown", "libparodus_send", "libparodus_strerror", "CcspBaseIf_getParameterValues", "free_parameterValStruct_t", "syscfg_get", "syscfg_init", "sysevent_get", "AnscMacToLower", "CosaDmlDiGetBootTime"], "published": ["connect_parodus", "initparodusTask", "Send_Notification_Task", "set_firmware_download_start_time", "get_firmware_download_start_time"], "classes": [], "methods": [{"name": "void * connect_parodus(void * arg)", "description": "Maintains persistent connection to the Parodus server with exponential backoff retries.", "scope": "", "scopeKind": ""}, {"name": "void get_parodus_url(char ** url)", "description": "Reads the Parodus URL from device properties file.", "scope": "", "scopeKind": ""}, {"name": "void waitForEthAgentComponentReady()", "description": "Waits until the Ethernet agent component health status is 'Green' or timeout.", "scope": "", "scopeKind": ""}, {"name": "void checkComponentHealthStatus(char * compName,char * dbusPath,char * status,int * retStatus)", "description": "Checks the health status of a specified component via D-Bus.", "scope": "", "scopeKind": ""}, {"name": "int check_ethernet_wan_status()", "description": "Determines if Ethernet WAN is enabled via syscfg or component status.", "scope": "", "scopeKind": ""}, {"name": "void getDeviceMac()", "description": "Retrieves the device MAC address, either via sysevent or component query.", "scope": "", "scopeKind": ""}, {"name": "void * sendNotification(void * pValue)", "description": "Prepares and sends notifications to Parodus, with retry and exponential backoff.", "scope": "", "scopeKind": ""}, {"name": "void initparodusTask()", "description": "Creates a thread to initialize the Parodus connection.", "scope": "", "scopeKind": ""}, {"name": "void Send_Notification_Task(char * delay,char * startTime,char * download_status,char * status,char * system_ready_time,char * priority,char * current_fw_ver,char * download_fw_ver)", "description": "Creates a thread to send a notification with given parameters.", "scope": "", "scopeKind": ""}, {"name": "void set_firmware_download_start_time(char * start_time)", "description": "Sets the global firmware download start time.", "scope": "", "scopeKind": ""}, {"name": "char * get_firmware_download_start_time()", "description": "Retrieves the global firmware download start time.", "scope": "", "scopeKind": ""}, {"name": "void free_notify_params_struct(notify_params_t * param)", "description": "Frees the memory allocated for notification parameters structure.", "scope": "", "scopeKind": ""}, {"name": "int readFromFile(char * filename,char ** data,int * len)", "description": "Reads entire content of a file into a buffer.", "scope": "", "scopeKind": ""}, {"name": "int writeToFile(char * filename,char * data,int len)", "description": "Writes data to a specified file.", "scope": "", "scopeKind": ""}, {"name": "void getCurrentTime(struct timespec * timer)", "description": "Fetches the current system time into a timespec structure.", "scope": "", "scopeKind": ""}, {"name": "long timeValDiff(struct timespec * starttime,struct timespec * finishtime)", "description": "Calculates the difference in milliseconds between two timespec times.", "scope": "", "scopeKind": ""}], "calls": ["libparodus_init", "libparodus_shutdown", "libparodus_send", "libparodus_strerror", "CcspBaseIf_getParameterValues", "free_parameterValStruct_t", "syscfg_get", "sysevent_get", "AnscMacToLower", "CosaDmlDiGetBootTime", "sleep"], "search-terms": ["parodus", "connect_parodus", "notification", "device_mac", "Ethernet WAN", "system status", "component health", "firmware download", "device.properties", "syscfg", "sysevent", "libparodus", "CJSON", "system_ready_time"], "state": 2, "file_id": 8295, "knowledge_revision": 21349, "git_revision": "", "ctags": [{"_type": "tag", "name": "CLIENT_PORT_NUM", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^#define CLIENT_PORT_NUM /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "CONTENT_TYPE_JSON", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^#define CONTENT_TYPE_JSON /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "DEVICE_MAC", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^#define DEVICE_MAC /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "DEVICE_PROPS_FILE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^#define DEVICE_PROPS_FILE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "ETH_WAN_STATUS_PARAM", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^#define ETH_WAN_STATUS_PARAM /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "FW_download_start_time", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^static char *FW_download_start_time = \"0\";$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "variable"}, {"_type": "tag", "name": "MAX_PARAMETERNAME_LEN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^#define MAX_PARAMETERNAME_LEN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "RDKB_ETHAGENT_COMPONENT_NAME", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^#define RDKB_ETHAGENT_COMPONENT_NAME /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "RDKB_ETHAGENT_DBUS_PATH", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^#define RDKB_ETHAGENT_DBUS_PATH /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "STATUS_SIZE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^#define STATUS_SIZE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "Send_Notification_Task", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^void Send_Notification_Task(char* delay, char* startTime, char* download_status, char* status, c/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(char * delay,char * startTime,char * download_status,char * status,char * system_ready_time,char * priority,char * current_fw_ver,char * download_fw_ver)"}, {"_type": "tag", "name": "_notify_params", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^typedef struct _notify_params$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "checkComponentHealthStatus", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^static void checkComponentHealthStatus(char * compName, char * dbusPath, char *status, int *retS/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(char * compName,char * dbusPath,char * status,int * retStatus)"}, {"_type": "tag", "name": "check_ethernet_wan_status", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^static int check_ethernet_wan_status()$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "connect_parodus", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^void* connect_parodus(void* arg)$/", "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "(void * arg)"}, {"_type": "tag", "name": "current_fw_ver", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^\tchar * current_fw_ver;$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "_notify_params", "scopeKind": "struct"}, {"_type": "tag", "name": "delay", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^\tchar * delay;$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "_notify_params", "scopeKind": "struct"}, {"_type": "tag", "name": "deviceMAC", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^static char deviceMAC[32]={'\\\\0'};$/", "file": true, "language": "C", "typeref": "typename:char[32]", "kind": "variable"}, {"_type": "tag", "name": "device_mac_mutex", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^static pthread_mutex_t device_mac_mutex = PTHREAD_MUTEX_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "download_fw_ver", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^\tchar * download_fw_ver;$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "_notify_params", "scopeKind": "struct"}, {"_type": "tag", "name": "download_status", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^\tchar * download_status;$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "_notify_params", "scopeKind": "struct"}, {"_type": "tag", "name": "free_notify_params_struct", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^void free_notify_params_struct(notify_params_t *param)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(notify_params_t * param)"}, {"_type": "tag", "name": "getCurrentTime", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^void getCurrentTime(struct timespec *timer)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(struct timespec * timer)"}, {"_type": "tag", "name": "getDeviceMac", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^static void getDeviceMac()$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_firmware_download_start_time", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^char *get_firmware_download_start_time()$/", "language": "C", "typeref": "typename:char *", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_parodus_url", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^static void get_parodus_url(char **url)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(char ** url)"}, {"_type": "tag", "name": "initparodusTask", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^void initparodusTask()$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "notify_params_t", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^} notify_params_t;$/", "file": true, "language": "C", "typeref": "struct:_notify_params", "kind": "typedef"}, {"_type": "tag", "name": "pam_instance", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^libpd_instance_t pam_instance;$/", "language": "C", "typeref": "typename:libpd_instance_t", "kind": "variable"}, {"_type": "tag", "name": "priority", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^\tchar * priority;$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "_notify_params", "scopeKind": "struct"}, {"_type": "tag", "name": "readFromFile", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^int readFromFile(char *filename, char **data, int *len)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * filename,char ** data,int * len)"}, {"_type": "tag", "name": "sendNotification", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^void* sendNotification(void* pValue)$/", "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "(void * pValue)"}, {"_type": "tag", "name": "set_firmware_download_start_time", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^void set_firmware_download_start_time(char *start_time)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(char * start_time)"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^\tchar * status;$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "_notify_params", "scopeKind": "struct"}, {"_type": "tag", "name": "system_ready_time", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^\tchar * system_ready_time;$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "_notify_params", "scopeKind": "struct"}, {"_type": "tag", "name": "time", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^\tchar * time;$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "_notify_params", "scopeKind": "struct"}, {"_type": "tag", "name": "timeValDiff", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^long timeValDiff(struct timespec *starttime, struct timespec *finishtime)$/", "language": "C", "typeref": "typename:long", "kind": "function", "signature": "(struct timespec * starttime,struct timespec * finishtime)"}, {"_type": "tag", "name": "waitForEthAgentComponentReady", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^static void waitForEthAgentComponentReady()$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "writeToFile", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "pattern": "/^int writeToFile(char *filename, char *data, int len)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char * filename,char * data,int len)"}], "hash": "d0efbef2ed4c0134aad040751c96d6d9", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/CcspPandM/source/TR-181/middle_layer_src/parodus_interface.c", "fields": [{"name": "char * FW_download_start_time", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char * current_fw_ver", "scope": "_notify_params", "scopeKind": "struct", "description": "unavailable"}, {"name": "char * delay", "scope": "_notify_params", "scopeKind": "struct", "description": "unavailable"}, {"name": "char[32] deviceMAC", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_mutex_t device_mac_mutex", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char * download_fw_ver", "scope": "_notify_params", "scopeKind": "struct", "description": "unavailable"}, {"name": "char * download_status", "scope": "_notify_params", "scopeKind": "struct", "description": "unavailable"}, {"name": "libpd_instance_t pam_instance", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char * priority", "scope": "_notify_params", "scopeKind": "struct", "description": "unavailable"}, {"name": "char * status", "scope": "_notify_params", "scopeKind": "struct", "description": "unavailable"}, {"name": "char * system_ready_time", "scope": "_notify_params", "scopeKind": "struct", "description": "unavailable"}, {"name": "char * time", "scope": "_notify_params", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"21349": ""}]}