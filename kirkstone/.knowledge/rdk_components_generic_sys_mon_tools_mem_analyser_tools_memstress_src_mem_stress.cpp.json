{"is_source_file": true, "format": "C++ (C with some C++-style initializations and comments)", "description": "This file is a memory stress testing tool which allocates memory in multiple threads, optionally keeps the memory hot, and reports stats on memory allocation and processing time. It includes command-line configuration parsing, thread management, and detailed tracking of allocated memory and processing speed.", "external_files": ["<stdio.h>", "<string.h>", "<pthread.h>", "<stdlib.h>", "<unistd.h>", "<time.h>", "<inttypes.h>"], "external_methods": ["printf", "fflush", "exit", "malloc", "calloc", "memset", "srand", "rand", "usleep", "pthread_create", "pthread_join", "pthread_self", "pthread_mutex_lock", "pthread_mutex_unlock", "pthread_cond_signal", "pthread_cond_wait", "getopt", "strtoimax", "strtoull", "strtoul", "abort"], "published": ["main"], "classes": [], "methods": [{"name": "void * worker_thread(void * arg)", "description": "Performs memory allocation in a loop, tracks time spent, optionally keeps memory hot, and signals completion.", "scope": "", "scopeKind": ""}, {"name": "void read_config(int argc,char ** argv)", "description": "Parses command-line arguments to set the configuration parameters.", "scope": "", "scopeKind": ""}, {"name": "void create_threads()", "description": "Creates worker threads based on configuration.", "scope": "", "scopeKind": ""}, {"name": "void collect_threads()", "description": "Joins worker threads after completion.", "scope": "", "scopeKind": ""}, {"name": "void print_results()", "description": "Calculates and prints total memory allocated and throughput.", "scope": "", "scopeKind": ""}, {"name": "int main(int argc,char ** argv)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["read_config", "create_threads", "pthread_mutex_lock", "pthread_cond_wait", "pthread_mutex_unlock", "collect_threads", "print_results"], "search-terms": ["memstress", "multi-threaded memory allocation", "hot memory keep", "allocation benchmarking", "system stress test", "threaded memory pressure", "configurable stress test"], "state": 2, "file_id": 12620, "knowledge_revision": 25520, "git_revision": "", "ctags": [{"_type": "tag", "name": "Alloc_stats", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^struct Alloc_stats {$/", "file": true, "language": "C++", "kind": "struct"}, {"_type": "tag", "name": "Configuration", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^struct Configuration$/", "file": true, "language": "C++", "kind": "struct"}, {"_type": "tag", "name": "alloc_block_size", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^    size_t alloc_block_size               = 1*1024*1024; \\/\\/ 1 MB\\/allocation$/", "file": true, "language": "C++", "typeref": "typename:size_t", "kind": "member", "scope": "Configuration", "scopeKind": "struct"}, {"_type": "tag", "name": "collect_threads", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^void collect_threads()$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "cond_var", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^pthread_cond_t cond_var       = PTHREAD_COND_INITIALIZER;$/", "language": "C++", "typeref": "typename:pthread_cond_t", "kind": "variable"}, {"_type": "tag", "name": "cond_var_lock", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^pthread_mutex_t cond_var_lock =  PTHREAD_MUTEX_INITIALIZER;$/", "language": "C++", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "config", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^Configuration config; \\/\\/ global config$/", "language": "C++", "typeref": "typename:Configuration", "kind": "variable"}, {"_type": "tag", "name": "create_threads", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^void create_threads()$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "hot_ticks_taken", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^    clock_t            hot_ticks_taken; \\/\\/ processor time taken while keeping the memory hot$/", "file": true, "language": "C++", "typeref": "typename:clock_t", "kind": "member", "scope": "Alloc_stats", "scopeKind": "struct"}, {"_type": "tag", "name": "index", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^    unsigned int       index;       \\/\\/ index in the array here it will be stored$/", "file": true, "language": "C++", "typeref": "typename:unsigned int", "kind": "member", "scope": "Alloc_stats", "scopeKind": "struct"}, {"_type": "tag", "name": "keep_mem_hot", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^    unsigned int keep_mem_hot                      = 0; \\/\\/ us zero means don't keep it hot, nu/", "file": true, "language": "C++", "typeref": "typename:unsigned int", "kind": "member", "scope": "Configuration", "scopeKind": "struct"}, {"_type": "tag", "name": "main", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^int main(int argc, char** argv)$/", "language": "C++", "typeref": "typename:int", "kind": "function", "signature": "(int argc,char ** argv)"}, {"_type": "tag", "name": "num_threads", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^    int num_threads                       = 1;$/", "file": true, "language": "C++", "typeref": "typename:int", "kind": "member", "scope": "Configuration", "scopeKind": "struct"}, {"_type": "tag", "name": "print_results", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^void print_results()$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "read_config", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^void read_config(int argc, char ** argv)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(int argc,char ** argv)"}, {"_type": "tag", "name": "run_till_death", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^    int run_till_death                    = 0;$/", "file": true, "language": "C++", "typeref": "typename:int", "kind": "member", "scope": "Configuration", "scopeKind": "struct"}, {"_type": "tag", "name": "size", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^    unsigned long long size;        \\/\\/ accumulation of allocated memory$/", "file": true, "language": "C++", "typeref": "typename:unsigned long long", "kind": "member", "scope": "Alloc_stats", "scopeKind": "struct"}, {"_type": "tag", "name": "sleep_bw_ops", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^    unsigned int sleep_bw_ops                      = 0; \\/\\/ us zero means don't sleep$/", "file": true, "language": "C++", "typeref": "typename:unsigned int", "kind": "member", "scope": "Configuration", "scopeKind": "struct"}, {"_type": "tag", "name": "thread_tracker", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^Alloc_stats *thread_tracker;$/", "language": "C++", "typeref": "typename:Alloc_stats *", "kind": "variable"}, {"_type": "tag", "name": "ticks_taken", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^    clock_t            ticks_taken; \\/\\/ time taken to do its task$/", "file": true, "language": "C++", "typeref": "typename:clock_t", "kind": "member", "scope": "Alloc_stats", "scopeKind": "struct"}, {"_type": "tag", "name": "tid", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^    pthread_t          tid;         \\/\\/ thread id$/", "file": true, "language": "C++", "typeref": "typename:pthread_t", "kind": "member", "scope": "Alloc_stats", "scopeKind": "struct"}, {"_type": "tag", "name": "total_alloc_size", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^    unsigned long long total_alloc_size   = 20673280L; \\/\\/aprox 20m$/", "file": true, "language": "C++", "typeref": "typename:unsigned long long", "kind": "member", "scope": "Configuration", "scopeKind": "struct"}, {"_type": "tag", "name": "wait_after_finish", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^    int wait_after_finish                 = 0;$/", "file": true, "language": "C++", "typeref": "typename:int", "kind": "member", "scope": "Configuration", "scopeKind": "struct"}, {"_type": "tag", "name": "worker_thread", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^void* worker_thread(void *arg)$/", "language": "C++", "typeref": "typename:void *", "kind": "function", "signature": "(void * arg)"}, {"_type": "tag", "name": "write_random_data", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "pattern": "/^    unsigned int write_random_data                 = 1; \\/\\/ default writes random numbers$/", "file": true, "language": "C++", "typeref": "typename:unsigned int", "kind": "member", "scope": "Configuration", "scopeKind": "struct"}], "hash": "234b5ac655852ca72bc4a5aaa87a28bf", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdk/components/generic/sys_mon_tools/mem_analyser_tools/memstress/src/mem_stress.cpp", "fields": [{"name": "size_t alloc_block_size", "scope": "Configuration", "scopeKind": "struct", "description": "unavailable"}, {"name": "pthread_cond_t cond_var", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_mutex_t cond_var_lock", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Configuration config", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "clock_t hot_ticks_taken", "scope": "Alloc_stats", "scopeKind": "struct", "description": "unavailable"}, {"name": "unsigned int index", "scope": "Alloc_stats", "scopeKind": "struct", "description": "unavailable"}, {"name": "unsigned int keep_mem_hot", "scope": "Configuration", "scopeKind": "struct", "description": "unavailable"}, {"name": "int num_threads", "scope": "Configuration", "scopeKind": "struct", "description": "unavailable"}, {"name": "int run_till_death", "scope": "Configuration", "scopeKind": "struct", "description": "unavailable"}, {"name": "unsigned long long size", "scope": "Alloc_stats", "scopeKind": "struct", "description": "unavailable"}, {"name": "unsigned int sleep_bw_ops", "scope": "Configuration", "scopeKind": "struct", "description": "unavailable"}, {"name": "Alloc_stats * thread_tracker", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "clock_t ticks_taken", "scope": "Alloc_stats", "scopeKind": "struct", "description": "unavailable"}, {"name": "pthread_t tid", "scope": "Alloc_stats", "scopeKind": "struct", "description": "unavailable"}, {"name": "unsigned long long total_alloc_size", "scope": "Configuration", "scopeKind": "struct", "description": "unavailable"}, {"name": "int wait_after_finish", "scope": "Configuration", "scopeKind": "struct", "description": "unavailable"}, {"name": "unsigned int write_random_data", "scope": "Configuration", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"25520": ""}]}