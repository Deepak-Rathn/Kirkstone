{"is_source_file": true, "format": "C", "description": "This file implements functionality for monitoring and fetching sun times (sunrise and sunset), including scheduling periodic updates, handling default values, and interacting with communication services to retrieve sunrise and sunset times. It contains functions to start and stop the sun time monitoring and to access the latest sunrise/sunset times.", "external_files": ["commMgr/commService_pojo.h", "icIpc/ipcMessage.h", "commMgr/commService_ipc.h", "icLog/logging.h", "icConcurrent/delayedTask.h", "icTime/timeUtils.h", "automationService.h", "automationSunTime.h"], "external_methods": ["commService_request_GET_SUNRISE_SUNSET_TIME", "create_sunriseSunsetTimes", "destroy_sunriseSunsetTimes", "convertUnixTimeMillisToTime_t", "getCurrentTime_t", "scheduleDelayTask", "scheduleTimeOfDayTask", "cancelDelayTask"], "published": ["automationStartSunMonitor", "automationStopSunMonitor", "automationGetSunTimes"], "classes": [], "methods": [{"name": "void refreshSunriseSunsetCallback(void * arg)", "description": "Callback function that refreshes sunrise and sunset times by querying an external service, handling fallback defaults, and scheduling subsequent updates.", "scope": "", "scopeKind": ""}, {"name": "void automationStartSunMonitor(uint8_t midnightEntropy)", "description": "Starts the sun time monitoring process with an initial delay, ensuring only one active monitor at a time.", "scope": "", "scopeKind": ""}, {"name": "void automationStopSunMonitor(void)", "description": "Stops the sun time monitoring process, cancelling scheduled updates.", "scope": "", "scopeKind": ""}, {"name": "void automationGetSunTimes(time_t * sunriseTime,time_t * sunsetTime)", "description": "Provides the latest sunrise and sunset times to caller.", "scope": "", "scopeKind": ""}], "calls": ["commService_request_GET_SUNRISE_SUNSET_TIME", "create_sunriseSunsetTimes", "destroy_sunriseSunsetTimes", "convertUnixTimeMillisToTime_t", "getCurrentTime_t", "localtime_r", "timelocal", "scheduleDelayTask", "scheduleTimeOfDayTask", "cancelDelayTask", "ctime_r"], "search-terms": ["sunrise sunset", "sun times", "automation", "sun monitor", "schedule", "callback", "DEFAULT_SUNRISE_HOUR", "DEFAULT_SUNSET_MIN"], "state": 2, "file_id": 1166, "knowledge_revision": 14319, "git_revision": "", "ctags": [{"_type": "tag", "name": "DEFAULT_SUNRISE_HOUR", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/automationSunTime.c", "pattern": "/^#define DEFAULT_SUNRISE_HOUR /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "DEFAULT_SUNRISE_MIN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/automationSunTime.c", "pattern": "/^#define DEFAULT_SUNRISE_MIN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "DEFAULT_SUNSET_HOUR", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/automationSunTime.c", "pattern": "/^#define DEFAULT_SUNSET_HOUR /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "DEFAULT_SUNSET_MIN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/automationSunTime.c", "pattern": "/^#define DEFAULT_SUNSET_MIN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "automationGetSunTimes", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/automationSunTime.c", "pattern": "/^void automationGetSunTimes(time_t* sunriseTime, time_t* sunsetTime)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(time_t * sunriseTime,time_t * sunsetTime)"}, {"_type": "tag", "name": "automationStartSunMonitor", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/automationSunTime.c", "pattern": "/^void automationStartSunMonitor(uint8_t midnightEntropy)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(uint8_t midnightEntropy)"}, {"_type": "tag", "name": "automationStopSunMonitor", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/automationSunTime.c", "pattern": "/^void automationStopSunMonitor(void)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "mutex", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/automationSunTime.c", "pattern": "/^static pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "refreshSunriseSunsetCallback", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/automationSunTime.c", "pattern": "/^static void refreshSunriseSunsetCallback(void *arg)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void * arg)"}, {"_type": "tag", "name": "refreshSunriseTask", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/automationSunTime.c", "pattern": "/^static uint32_t refreshSunriseTask = 0;$/", "file": true, "language": "C", "typeref": "typename:uint32_t", "kind": "variable"}, {"_type": "tag", "name": "running", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/automationSunTime.c", "pattern": "/^static bool running = false;$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "variable"}, {"_type": "tag", "name": "sunrise", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/automationSunTime.c", "pattern": "/^static time_t sunrise = 0;$/", "file": true, "language": "C", "typeref": "typename:time_t", "kind": "variable"}, {"_type": "tag", "name": "sunset", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/automationSunTime.c", "pattern": "/^static time_t sunset = 0;$/", "file": true, "language": "C", "typeref": "typename:time_t", "kind": "variable"}], "hash": "a1b53ca7258f147b4ec4840ee66de1ac", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "components/opensource/zilker-sdk/source/services/automation/core/src/automationSunTime.c", "fields": [{"name": "pthread_mutex_t mutex", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "uint32_t refreshSunriseTask", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool running", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "time_t sunrise", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "time_t sunset", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"14319": ""}]}