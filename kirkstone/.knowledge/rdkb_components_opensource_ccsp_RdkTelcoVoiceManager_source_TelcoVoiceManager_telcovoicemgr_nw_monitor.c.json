{"is_source_file": true, "format": "C", "description": "This source file implements the network monitoring component of the RdkTelcoVoiceManager, handling events related to LAN/WAN connectivity, IP address changes, and firewall status, primarily via sys events. It sets up event listeners, handles notifications, and updates internal state accordingly.", "external_files": ["telcovoicemgr_nw_monitor.h", "ccsp_trace.h", "ccsp_syslog.h", "syscfg/syscfg.h", "sysevent/sysevent.h"], "external_methods": ["sysevent_open", "sysevent_close", "sysevent_set_options", "sysevent_setnotification", "sysevent_get", "sysevent_getnotification", "TelcoVoiceMgrDmlGetDataLocked", "TelcoVoiceMgrDmlGetDataRelease", "TelcoVoiceMgrDmlSetBoundIpAddress", "TelcoVoiceMgrDmlSetLinkState", "TelcoVoiceMgrDmlGetEthernetPriorityMark", "TelcoVoiceMgrDmlSetWanEthernetPriorityMark", "TelcoVoiceMgrInitMark"], "published": ["voicemgr_create_nw_monitor", "voicemgr_sysevent_init", "voicemgr_sysevent_close", "firewall_restart_for_voice"], "classes": [], "methods": [{"name": "void voicemgr_create_nw_monitor()", "description": "Initializes network monitoring by retrieving configuration, setting event states, and starting a monitoring thread.", "scope": "", "scopeKind": ""}, {"name": "int voicemgr_sysevent_init()", "description": "Initializes sysevent connection for listening to system events.", "scope": "", "scopeKind": ""}, {"name": "void voicemgr_sysevent_close()", "description": "Closes the sysevent connection.", "scope": "", "scopeKind": ""}, {"name": "int firewall_restart_for_voice(unsigned long timeout_ms)", "description": "Restarts the system firewall and waits until completion or timeout.", "scope": "", "scopeKind": ""}, {"name": "void event_set_lan_status(void)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void event_set_wan_status(void)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void voice_event_handler(char * pEvtName,char * pEvtValue)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void * voice_manager_nw_monitor(void * data)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["sysevent_set_options", "sysevent_setnotification", "sysevent_getnotification", "sysevent_get", "exit", "sleep", "usleep", "gettimeofday", "timeradd", "timercmp"], "search-terms": ["TelcoVoiceMgrDmlGetDataLocked", "voice_event_handler", "sysevent", "firewall_restart", "WAN_IPV6", "LAN interface", "IPv4/IPv6 connection", "system event", "network monitor thread", "firewall restart"], "state": 2, "file_id": 6937, "knowledge_revision": 20028, "git_revision": "", "ctags": [{"_type": "tag", "name": "BOUND_IF_NAME_LENGTH", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^#define BOUND_IF_NAME_LENGTH /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "FIREWALLSTATUS_STARTED", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^    FIREWALLSTATUS_STARTED,$/", "file": true, "language": "C", "kind": "enumerator", "scope": "__anond3ce9ae90203", "scopeKind": "enum"}, {"_type": "tag", "name": "FIREWALLSTATUS_STARTING", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^    FIREWALLSTATUS_STARTING,$/", "file": true, "language": "C", "kind": "enumerator", "scope": "__anond3ce9ae90203", "scopeKind": "enum"}, {"_type": "tag", "name": "FIREWALLSTATUS_STOPPED", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^    FIREWALLSTATUS_STOPPED$/", "file": true, "language": "C", "kind": "enumerator", "scope": "__anond3ce9ae90203", "scopeKind": "enum"}, {"_type": "tag", "name": "FIREWALLSTATUS_STOPPING", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^    FIREWALLSTATUS_STOPPING,$/", "file": true, "language": "C", "kind": "enumerator", "scope": "__anond3ce9ae90203", "scopeKind": "enum"}, {"_type": "tag", "name": "FirewallStatus_e", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^} FirewallStatus_e;$/", "file": true, "language": "C", "typeref": "enum:__anond3ce9ae90203", "kind": "typedef"}, {"_type": "tag", "name": "IP_ADDR_FAMILY_LENGTH", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^#define IP_ADDR_FAMILY_LENGTH /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "LAN_IF", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^#define LAN_IF /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "RTP_INDEX", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^#define RTP_INDEX /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SIP_INDEX", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^#define SIP_INDEX /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SYSEVENT_CURRENT_WAN_IFNAME", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^#define SYSEVENT_CURRENT_WAN_IFNAME /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SYSEVENT_FIREWALL_RESTART", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^#define SYSEVENT_FIREWALL_RESTART /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SYSEVENT_FIREWALL_STATUS", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^#define SYSEVENT_FIREWALL_STATUS /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SYSEVENT_IPV4_CONNECTION_STATE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^#define SYSEVENT_IPV4_CONNECTION_STATE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SYSEVENT_IPV4_IP_ADDRESS", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^#define SYSEVENT_IPV4_IP_ADDRESS /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SYSEVENT_IPV6_CONNECTION_STATE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^#define SYSEVENT_IPV6_CONNECTION_STATE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SYSEVENT_IPV6_PREFIX", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^#define SYSEVENT_IPV6_PREFIX /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SYSEVENT_LAN_ADDRESS", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^#define SYSEVENT_LAN_ADDRESS /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SYSEVENT_LAN_STATUS", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^#define SYSEVENT_LAN_STATUS /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "TELCOVOICEMGR_DML_VOICE_PROFILE_INDEX", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^#define TELCOVOICEMGR_DML_VOICE_PROFILE_INDEX /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "TELCOVOICEMGR_DML_VOICE_SERVICE_INDEX", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^#define TELCOVOICEMGR_DML_VOICE_SERVICE_INDEX /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "WAN_DOWN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^    WAN_DOWN$/", "file": true, "language": "C", "kind": "enumerator", "scope": "__anond3ce9ae90103", "scopeKind": "enum"}, {"_type": "tag", "name": "WAN_ERROR", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^    WAN_ERROR,$/", "file": true, "language": "C", "kind": "enumerator", "scope": "__anond3ce9ae90103", "scopeKind": "enum"}, {"_type": "tag", "name": "WAN_IF", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^#define WAN_IF /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "WAN_UP", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^    WAN_UP,$/", "file": true, "language": "C", "kind": "enumerator", "scope": "__anond3ce9ae90103", "scopeKind": "enum"}, {"_type": "tag", "name": "WanState_e", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^} WanState_e;$/", "file": true, "language": "C", "typeref": "enum:__anond3ce9ae90103", "kind": "typedef"}, {"_type": "tag", "name": "__anond3ce9ae90103", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^typedef enum {$/", "file": true, "language": "C", "kind": "enum"}, {"_type": "tag", "name": "__anond3ce9ae90203", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^typedef enum {$/", "file": true, "language": "C", "kind": "enum"}, {"_type": "tag", "name": "boundIfName", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^static char boundIfName[BOUND_IF_NAME_LENGTH] = {0};$/", "file": true, "language": "C", "typeref": "typename:char[]", "kind": "variable"}, {"_type": "tag", "name": "event_set_lan_status", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^static void event_set_lan_status (void)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "event_set_wan_status", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^static void event_set_wan_status (void)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "firewall_restart_for_voice", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^int firewall_restart_for_voice(unsigned long timeout_ms)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(unsigned long timeout_ms)"}, {"_type": "tag", "name": "firewall_status", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^static int firewall_status = FIREWALLSTATUS_STARTING;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "ipAddrFamily", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^static char ipAddrFamily[IP_ADDR_FAMILY_LENGTH] = {0};$/", "file": true, "language": "C", "typeref": "typename:char[]", "kind": "variable"}, {"_type": "tag", "name": "lanIpAddr", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^static char lanIpAddr[IP_ADDR_FAMILY_LENGTH] = {0};$/", "file": true, "language": "C", "typeref": "typename:char[]", "kind": "variable"}, {"_type": "tag", "name": "sysevent_listen_notfiy_fd", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^static int sysevent_listen_notfiy_fd = -1;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "sysevent_notify_token", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^static token_t sysevent_notify_token = -1;$/", "file": true, "language": "C", "typeref": "typename:token_t", "kind": "variable"}, {"_type": "tag", "name": "sysevent_rw_fd", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^static int sysevent_rw_fd = -1;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "sysevent_tid", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^static pthread_t sysevent_tid;$/", "file": true, "language": "C", "typeref": "typename:pthread_t", "kind": "variable"}, {"_type": "tag", "name": "sysevent_token", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^static token_t sysevent_token = -1;$/", "file": true, "language": "C", "typeref": "typename:token_t", "kind": "variable"}, {"_type": "tag", "name": "voice_event_handler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^static void voice_event_handler(char *pEvtName, char *pEvtValue)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(char * pEvtName,char * pEvtValue)"}, {"_type": "tag", "name": "voice_manager_nw_monitor", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^static void *voice_manager_nw_monitor(void *data)$/", "file": true, "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "(void * data)"}, {"_type": "tag", "name": "voicemgr_create_nw_monitor", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^void voicemgr_create_nw_monitor()$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "voicemgr_sysevent_close", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^void voicemgr_sysevent_close()$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "voicemgr_sysevent_init", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "pattern": "/^int voicemgr_sysevent_init()$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "()"}], "hash": "c7f23f356e30af4aaa51aa27f40d91a3", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/RdkTelcoVoiceManager/source/TelcoVoiceManager/telcovoicemgr_nw_monitor.c", "fields": [{"name": "char[] boundIfName", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int firewall_status", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char[] ipAddrFamily", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char[] lanIpAddr", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int sysevent_listen_notfiy_fd", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "token_t sysevent_notify_token", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int sysevent_rw_fd", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_t sysevent_tid", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "token_t sysevent_token", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"20028": ""}]}