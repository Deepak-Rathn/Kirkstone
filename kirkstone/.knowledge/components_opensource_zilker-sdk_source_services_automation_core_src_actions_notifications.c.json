{"is_source_file": true, "format": "C", "description": "This file implements notification handling logic for a media event-driven automation system, including event listening, waiting mechanisms, and action handling for notifications like SMS or email with optional media attachments.", "external_files": ["commMgr/commService_eventAdapter.h", "commMgr/commService_ipc.h", "icConcurrent/timedWait.h", "icTime/timeUtils.h", "automationAction.h", "automationService.h", "notifications.h"], "external_methods": ["commService_request_SEND_MESSAGE_TO_SUBSCRIBER", "jsonrpc_create_response_success", "jsonrpc_create_response_error", "register_mediaUploadedEvent_eventListener", "unregister_mediaUploadedEvent_eventListener", "destroy_ruleSendMessage", "create_ruleSendMessage", "getCurrentUnixTimeMillis"], "published": ["notificationMessageTargetInit", "notificationMessageTargetDestroy"], "classes": [], "methods": [{"name": "void mediaLinkedListDestroy(void * data)", "description": "Destroys media uploaded event data items in linked list.", "scope": "", "scopeKind": ""}, {"name": "void removeOldEvents(icLinkedList * list,time_t age)", "description": "Removes media events older than a specified age from a linked list.", "scope": "", "scopeKind": ""}, {"name": "void mediaUploadEventListener(mediaUploadedEvent * event)", "description": "Callback function that processes media upload events and adds them to the appropriate list.", "scope": "", "scopeKind": ""}, {"name": "int waitForNotification(pthread_mutex_t * mutex,pthread_cond_t * cond,icLinkedList * list,uint64_t ruleId,uint64_t eventId,mediaUploadedEvent ** event,int timeout)", "description": "Waits for a media notification with a specific rule ID and event ID within a timeout.", "scope": "", "scopeKind": ""}, {"name": "cJSON * notificationActionHandler(const cJSON * id,const cJSON * params)", "description": "Handles notification actions by optionally waiting for media attachment uploads and then sending notifications.", "scope": "", "scopeKind": ""}, {"name": "void notificationMessageTargetInit(void)", "description": "Initializes notification message target subsystem, setting up event listeners and registration.", "scope": "", "scopeKind": ""}, {"name": "void notificationMessageTargetDestroy(void)", "description": "Cleans up resources used by notification message target subsystem.", "scope": "", "scopeKind": ""}], "calls": ["create_ruleSendMessage", "destroy_ruleSendMessage", "commService_request_SEND_MESSAGE_TO_SUBSCRIBER", "jsonrpc_create_response_success", "jsonrpc_create_response_error", "register_mediaUploadedEvent_eventListener", "unregister_mediaUploadedEvent_eventListener", "getCurrentUnixTimeMillis"], "search-terms": ["mediaUploadEventListener", "notificationActionHandler", "waitForNotification", "mediaUploadedEvent", "notifications"], "state": 2, "file_id": 1177, "knowledge_revision": 14331, "git_revision": "", "ctags": [{"_type": "tag", "name": "JSON_EVENTID_KEY", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/actions/notifications.c", "pattern": "/^#define JSON_EVENTID_KEY /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "MEDIA_EVENT_AGE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/actions/notifications.c", "pattern": "/^#define MEDIA_EVENT_AGE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "MEDIA_WAIT_TIMEOUT", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/actions/notifications.c", "pattern": "/^#define MEDIA_WAIT_TIMEOUT /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "imageCond", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/actions/notifications.c", "pattern": "/^static pthread_cond_t imageCond = PTHREAD_COND_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_cond_t", "kind": "variable"}, {"_type": "tag", "name": "imageList", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/actions/notifications.c", "pattern": "/^static icLinkedList* imageList;$/", "file": true, "language": "C", "typeref": "typename:icLinkedList *", "kind": "variable"}, {"_type": "tag", "name": "imageMutex", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/actions/notifications.c", "pattern": "/^static pthread_mutex_t imageMutex = PTHREAD_MUTEX_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "mediaLinkedListDestroy", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/actions/notifications.c", "pattern": "/^static void mediaLinkedListDestroy(void* data)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void * data)"}, {"_type": "tag", "name": "mediaUploadEventListener", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/actions/notifications.c", "pattern": "/^static void mediaUploadEventListener(mediaUploadedEvent *event)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(mediaUploadedEvent * event)"}, {"_type": "tag", "name": "notificationActionHandler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/actions/notifications.c", "pattern": "/^static cJSON* notificationActionHandler(const cJSON* id, const cJSON* params)$/", "file": true, "language": "C", "typeref": "typename:cJSON *", "kind": "function", "signature": "(const cJSON * id,const cJSON * params)"}, {"_type": "tag", "name": "notificationMessageTargetDestroy", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/actions/notifications.c", "pattern": "/^void notificationMessageTargetDestroy(void)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "notificationMessageTargetInit", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/actions/notifications.c", "pattern": "/^void notificationMessageTargetInit(void)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void)"}, {"_type": "tag", "name": "removeOldEvents", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/actions/notifications.c", "pattern": "/^static void removeOldEvents(icLinkedList* list, time_t age)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(icLinkedList * list,time_t age)"}, {"_type": "tag", "name": "videoCond", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/actions/notifications.c", "pattern": "/^static pthread_cond_t videoCond = PTHREAD_COND_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_cond_t", "kind": "variable"}, {"_type": "tag", "name": "videoList", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/actions/notifications.c", "pattern": "/^static icLinkedList* videoList;$/", "file": true, "language": "C", "typeref": "typename:icLinkedList *", "kind": "variable"}, {"_type": "tag", "name": "videoMutex", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/actions/notifications.c", "pattern": "/^static pthread_mutex_t videoMutex = PTHREAD_MUTEX_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "waitForNotification", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/automation/core/src/actions/notifications.c", "pattern": "/^static int waitForNotification(pthread_mutex_t* mutex,$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(pthread_mutex_t * mutex,pthread_cond_t * cond,icLinkedList * list,uint64_t ruleId,uint64_t eventId,mediaUploadedEvent ** event,int timeout)"}], "hash": "9fa1242fce0ead57fe465f421739be8c", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "components/opensource/zilker-sdk/source/services/automation/core/src/actions/notifications.c", "fields": [{"name": "pthread_cond_t imageCond", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "icLinkedList * imageList", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_mutex_t imageMutex", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_cond_t videoCond", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "icLinkedList * videoList", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_mutex_t videoMutex", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"14331": ""}]}