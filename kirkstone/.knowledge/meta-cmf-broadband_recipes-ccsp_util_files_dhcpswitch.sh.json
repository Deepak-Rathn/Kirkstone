{"is_source_file": true, "format": "Shell script (sh)", "description": "This script manages DHCP switch operations, including scheduling tasks via cron, controlling WAN states, and updating configuration flags. It is used for automating DHCP-related maintenance windows and service restarts based on scheduled or triggered conditions.", "external_files": ["/etc/device.properties", "/rdklogs/logs/PAMlog.txt.0"], "external_methods": ["dmcli eRT getv", "dmcli eRT setv", "sysevent get", "sysevent set", "systemctl start", "systemctl stop", "syscfg set", "syscfg commit"], "published": [], "classes": [], "methods": [{"name": "calcExecTime", "description": "Calculates a random execution time within a maintenance window based on device configuration, used for scheduling cron jobs."}, {"name": "ScheduleCron", "description": "Schedules a cron job at a randomly determined time within the maintenance window."}, {"name": "RemoveCron", "description": "Removes the DHCP switch cron job from the scheduler."}, {"name": "wait_till_state_wan_stopped", "description": "Waits until the WAN connection status is 'stopped' with retries."}, {"name": "wait_till_state_wan_started", "description": "Waits until the WAN connection status is 'started' with retries."}], "calls": ["crontab -l -c /var/spool/cron/crontabs/", "crontab /tmp/cron_tab$$.txt -c /var/spool/cron/crontabs/", "sed -i '/dhcpswitch.sh/d'", "sysevent get wan-status", "sysevent set wan-stop", "sysevent set wan-start", "systemctl stop dropbear-atom-js.service", "systemctl start dropbear-atom-js.service", "syscfg set UDHCPEnable", "syscfg set dibbler_client_enable", "syscfg commit", "date +%N", "awk", "dmcli eRT getv", "dmcli eRT setv"], "search-terms": ["dhcpswitch.sh", "maintenance window", "cron scheduling", "wan-state control", "dropbear service", "dibbler", "U DHCP Enable", "maintenance window timing", "cron job management", "device properties"], "state": 2, "file_id": 293, "knowledge_revision": 13465, "git_revision": "", "hash": "3676cf5db47fab5f2af54891ee060702", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "meta-cmf-broadband/recipes-ccsp/util/files/dhcpswitch.sh", "revision_history": [{"13465": ""}]}