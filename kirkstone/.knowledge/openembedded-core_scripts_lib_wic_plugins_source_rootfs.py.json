{"is_source_file": true, "format": "Python", "description": "This file implements the 'rootfs' source plugin class for 'wic', providing functionality to populate partition content from a root filesystem directory, including validation, copying, and modification of filesystem trees.", "external_files": ["oe.path", "wic.WicError", "wic.pluginbase.SourcePlugin", "wic.misc.get_bitbake_var", "wic.misc.exec_native_cmd"], "external_methods": ["os.path.isabs", "os.path.realpath", "os.path.isdir", "os.path.exists", "os.path.lexists", "os.path.join", "os.path.relpath", "shutil.rmtree", "os.mkdir", "shutil.copy", "os.path.isfile", "os.listdir", "os.remove", "sys.exit", "logging.getLogger", "logger.error", "logger.warn", "shutil.rmtree", "shutil.copy"], "published": ["RootfsPlugin", "do_prepare_partition"], "classes": [{"name": "RootfsPlugin", "description": "A plugin class that populates partition content from a root filesystem directory for 'wic'."}], "methods": [{"name": "__validate_path(cmd, rootfs_dir, path)", "description": "Validates that a given path is relative and inside the rootfs directory, exiting on error.", "scope": "RootfsPlugin", "scopeKind": "class"}, {"name": "__get_rootfs_dir(rootfs_dir)", "description": "Retrieves the real path of the rootfs directory, either from provided path or from bitbake variable.", "scope": "RootfsPlugin", "scopeKind": "class"}, {"name": "__get_pseudo(native_sysroot, rootfs, pseudo_dir)", "description": "Generates environment variable string for pseudo environment setup.", "scope": "RootfsPlugin", "scopeKind": "class"}, {"name": "do_prepare_partition(cls, part, source_params, cr, cr_workdir, oe_builddir, bootimg_dir, kernel_dir, krootfs_dir, native_sysroot)", "description": "Prepares and populates a partition with rootfs content, handling copying, exclusion, inclusion, and fstab updates.", "scope": "RootfsPlugin", "scopeKind": "class"}], "calls": ["os.path.isabs", "os.path.realpath", "os.path.isdir", "os.path.exists", "os.path.lexists", "os.path.join", "shutil.rmtree", "os.mkdir", "shutil.copy", "os.path.isfile", "os.listdir", "os.remove", "sys.exit", "exec_native_cmd", "get_bitbake_var"], "search-terms": ["rootfs", "wic plugin", "populate partition", "rootfs directory validation", "pseudo environment", "include-path", "exclude-path", "fstab"], "state": 2, "file_id": 1447, "knowledge_revision": 14598, "git_revision": "", "ctags": [{"_type": "tag", "name": "RootfsPlugin", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/source/rootfs.py", "pattern": "/^class RootfsPlugin(SourcePlugin):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__get_pseudo", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/source/rootfs.py", "pattern": "/^    def __get_pseudo(native_sysroot, rootfs, pseudo_dir):$/", "file": true, "language": "Python", "kind": "member", "signature": "(native_sysroot, rootfs, pseudo_dir)", "scope": "RootfsPlugin", "scopeKind": "class"}, {"_type": "tag", "name": "__get_rootfs_dir", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/source/rootfs.py", "pattern": "/^    def __get_rootfs_dir(rootfs_dir):$/", "file": true, "language": "Python", "kind": "member", "signature": "(rootfs_dir)", "scope": "RootfsPlugin", "scopeKind": "class"}, {"_type": "tag", "name": "__validate_path", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/source/rootfs.py", "pattern": "/^    def __validate_path(cmd, rootfs_dir, path):$/", "file": true, "language": "Python", "kind": "member", "signature": "(cmd, rootfs_dir, path)", "scope": "RootfsPlugin", "scopeKind": "class"}, {"_type": "tag", "name": "do_prepare_partition", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/source/rootfs.py", "pattern": "/^    def do_prepare_partition(cls, part, source_params, cr, cr_workdir,$/", "language": "Python", "kind": "member", "signature": "(cls, part, source_params, cr, cr_workdir, oe_builddir, bootimg_dir, kernel_dir, krootfs_dir, native_sysroot)", "scope": "RootfsPlugin", "scopeKind": "class"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/source/rootfs.py", "pattern": "/^logger = logging.getLogger('wic')$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/source/rootfs.py", "pattern": "/^    name = 'rootfs'$/", "language": "Python", "kind": "variable", "scope": "RootfsPlugin", "scopeKind": "class"}], "hash": "1de12d65948eb4a37ff8ecbed080ae6e", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "openembedded-core/scripts/lib/wic/plugins/source/rootfs.py", "fields": [{"name": "logger = logging.getLogger('wic')", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "name = 'rootfs'", "scope": "RootfsPlugin", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"14598": ""}]}