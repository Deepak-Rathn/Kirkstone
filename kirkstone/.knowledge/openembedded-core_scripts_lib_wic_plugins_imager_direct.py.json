{"is_source_file": true, "format": "Python", "description": "This file implements the 'direct' imager plugin class for 'wic', providing functionality to create and manipulate partitioned disk images, including partition layout, filesystem handling, and image assembly.", "external_files": ["oe.path", "wic.WicError", "wic.filemap", "wic.ksparser", "wic.pluginbase", "wic.misc"], "external_methods": ["copyhardlinktree", "WicError", "sparse_copy", "KickStart", "KickStartError", "PluginMgr.get_plugins", "ImagerPlugin", "get_bitbake_var", "exec_cmd", "exec_native_cmd"], "published": ["DirectPlugin", "PartitionedImage"], "classes": [{"name": "DirectPlugin", "description": "A plugin class implementing disk image creation with partitioning and root filesystem integration for 'wic'."}, {"name": "PartitionedImage", "description": "Represents a partitioned disk image, handling partition layout, creation, and assembly of filesystem content."}], "methods": [{"name": "DirectPlugin.__init__", "description": "Initializes the DirectPlugin object, parsing configuration and setting up the image."}, {"name": "DirectPlugin.setup_workdir", "description": "Setup an isolated working directory for image creation."}, {"name": "DirectPlugin.do_create", "description": "Main plugin entry point to create, assemble, and finalize the disk image."}, {"name": "DirectPlugin.update_fstab", "description": "Updates the fstab file within the root filesystem to ensure proper mounting."}, {"name": "DirectPlugin.create", "description": "Prepares filesystem artifacts and layouts partitions accordingly."}, {"name": "DirectPlugin.assemble", "description": "Combines prepared partitions into a final disk image."}, {"name": "DirectPlugin.finalize", "description": "Performs final steps such as bootloader installation, bmap creation, and image compression."}, {"name": "DirectPlugin.print_info", "description": "Outputs information about the created image and source artifacts."}, {"name": "DirectPlugin.rootdev", "description": "Returns the root device identifier for kernel parameters."}, {"name": "DirectPlugin.cleanup", "description": "Cleans up resources such as temporary directories."}, {"name": "PartitionedImage.__init__", "description": "Constructs a partitioned image object, initializing partition layout and UUIDs."}, {"name": "PartitionedImage.prepare", "description": "Prepares each partition's filesystem."}, {"name": "PartitionedImage.layout_partitions", "description": "Calculates and assigns layout for all partitions within the image."}, {"name": "PartitionedImage._create_partition", "description": "Creates a partition within the image file using 'parted'."}, {"name": "PartitionedImage.create", "description": "Creates the sparse disk image and partition table."}, {"name": "PartitionedImage.assemble", "description": "Installs filesystem images into partitions."}, {"name": "PartitionedImage.cleanup", "description": "Cleanup method, possibly a placeholder."}, {"name": "__init__(self, path, ptable_format, partitions, native_sysroot=None, extra_space=0)", "scope": "PartitionedImage", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, wks_file, rootfs_dir, bootimg_dir, kernel_dir, native_sysroot, oe_builddir, options)", "scope": "DirectPlugin", "scopeKind": "class", "description": "unavailable"}, {"name": "_create_partition(self, device, parttype, fstype, start, size)", "scope": "PartitionedImage", "scopeKind": "class", "description": "unavailable"}, {"name": "_full_path(self, path, name, extention)", "scope": "DirectPlugin", "scopeKind": "class", "description": "unavailable"}, {"name": "assemble(self)", "scope": "PartitionedImage", "scopeKind": "class", "description": "unavailable"}, {"name": "cleanup(self)", "scope": "PartitionedImage", "scopeKind": "class", "description": "unavailable"}, {"name": "create(self)", "scope": "PartitionedImage", "scopeKind": "class", "description": "unavailable"}, {"name": "do_create(self)", "scope": "DirectPlugin", "scopeKind": "class", "description": "unavailable"}, {"name": "finalize(self)", "scope": "DirectPlugin", "scopeKind": "class", "description": "unavailable"}, {"name": "layout_partitions(self)", "scope": "PartitionedImage", "scopeKind": "class", "description": "unavailable"}, {"name": "prepare(self, imager)", "scope": "PartitionedImage", "scopeKind": "class", "description": "unavailable"}, {"name": "print_info(self)", "scope": "DirectPlugin", "scopeKind": "class", "description": "unavailable"}, {"name": "rootdev(self)", "scope": "DirectPlugin", "scopeKind": "class", "description": "unavailable"}, {"name": "setup_workdir(self, workdir)", "scope": "DirectPlugin", "scopeKind": "class", "description": "unavailable"}, {"name": "update_fstab(self, image_rootfs)", "scope": "DirectPlugin", "scopeKind": "class", "description": "unavailable"}], "calls": ["exec_native_cmd", "exec_cmd", "shutil.move", "os.makedirs", "os.path.exists", "os.path.join", "os.listdir", "os.path.isfile", "shutil.rmtree", "os.remove", "os.rename", "os.ftruncate"], "search-terms": ["DirectPlugin", "PartitionedImage", "wic", "disk image creation", "partition layout", "filesystem fixtures", "bmap creation", "image finalization"], "state": 2, "file_id": 1454, "knowledge_revision": 14608, "git_revision": "", "ctags": [{"_type": "tag", "name": "DirectPlugin", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^class DirectPlugin(ImagerPlugin):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "GPT_OVERHEAD", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^GPT_OVERHEAD = 34$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "MBR_OVERHEAD", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^MBR_OVERHEAD = 1$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "PartitionedImage", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^class PartitionedImage():$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SECTOR_SIZE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^SECTOR_SIZE = 512$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^    def __init__(self, path, ptable_format, partitions, native_sysroot=None, extra_space=0):$/", "language": "Python", "kind": "member", "signature": "(self, path, ptable_format, partitions, native_sysroot=None, extra_space=0)", "scope": "PartitionedImage", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^    def __init__(self, wks_file, rootfs_dir, bootimg_dir, kernel_dir,$/", "language": "Python", "kind": "member", "signature": "(self, wks_file, rootfs_dir, bootimg_dir, kernel_dir, native_sysroot, oe_builddir, options)", "scope": "DirectPlugin", "scopeKind": "class"}, {"_type": "tag", "name": "_create_partition", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^    def _create_partition(self, device, parttype, fstype, start, size):$/", "language": "Python", "kind": "member", "signature": "(self, device, parttype, fstype, start, size)", "scope": "PartitionedImage", "scopeKind": "class"}, {"_type": "tag", "name": "_full_path", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^    def _full_path(self, path, name, extention):$/", "language": "Python", "kind": "member", "signature": "(self, path, name, extention)", "scope": "DirectPlugin", "scopeKind": "class"}, {"_type": "tag", "name": "assemble", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^    def assemble(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DirectPlugin", "scopeKind": "class"}, {"_type": "tag", "name": "assemble", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^    def assemble(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PartitionedImage", "scopeKind": "class"}, {"_type": "tag", "name": "cleanup", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^    def cleanup(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DirectPlugin", "scopeKind": "class"}, {"_type": "tag", "name": "cleanup", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^    def cleanup(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PartitionedImage", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^    def create(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DirectPlugin", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^    def create(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PartitionedImage", "scopeKind": "class"}, {"_type": "tag", "name": "do_create", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^    def do_create(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DirectPlugin", "scopeKind": "class"}, {"_type": "tag", "name": "finalize", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^    def finalize(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DirectPlugin", "scopeKind": "class"}, {"_type": "tag", "name": "layout_partitions", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^    def layout_partitions(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PartitionedImage", "scopeKind": "class"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^logger = logging.getLogger('wic')$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^    name = 'direct'$/", "language": "Python", "kind": "variable", "scope": "DirectPlugin", "scopeKind": "class"}, {"_type": "tag", "name": "prepare", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^    def prepare(self, imager):$/", "language": "Python", "kind": "member", "signature": "(self, imager)", "scope": "PartitionedImage", "scopeKind": "class"}, {"_type": "tag", "name": "print_info", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^    def print_info(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DirectPlugin", "scopeKind": "class"}, {"_type": "tag", "name": "rootdev", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^    def rootdev(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DirectPlugin", "scopeKind": "class"}, {"_type": "tag", "name": "setup_workdir", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^    def setup_workdir(self, workdir):$/", "language": "Python", "kind": "member", "signature": "(self, workdir)", "scope": "DirectPlugin", "scopeKind": "class"}, {"_type": "tag", "name": "update_fstab", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "pattern": "/^    def update_fstab(self, image_rootfs):$/", "language": "Python", "kind": "member", "signature": "(self, image_rootfs)", "scope": "DirectPlugin", "scopeKind": "class"}], "hash": "fe1691ad02ee6fb877e8f1e7447eb433", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "openembedded-core/scripts/lib/wic/plugins/imager/direct.py", "fields": [{"name": "GPT_OVERHEAD = 34", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "MBR_OVERHEAD = 1", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SECTOR_SIZE = 512", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logger = logging.getLogger('wic')", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "name = 'direct'", "scope": "DirectPlugin", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"14608": ""}]}