{"is_source_file": true, "format": "C", "description": "The file is a C source file that implements a multi-service main program for a Linux-based environment, initializing, starting, and managing various system services such as watchdog, device, communication, and optional services. It handles service process creation, state management, threading, and synchronization.", "external_files": ["icBuildtime.h", "pthread.h", "stdlib.h", "unistd.h", "stdio.h", "string.h", "icConcurrent/timedWait.h", "icConcurrent/delayedTask.h", "icIpc/ipcSender.h", "icUtil/array.h", "inttypes.h", "icUtil/stringUtils.h", "errno.h", "icConcurrent/threadUtils.h", "icLog/logging.h", "../services/watchdog/core/src/procMgr.h"], "external_methods": ["createThread", "hashMapCreate", "hashMapGet", "hashMapPut", "linkedListCreate", "linkedListAppend", "linkedListIteratorCreate", "linkedListIteratorHasNext", "linkedListIteratorGetNext", "linkedListCount", "linkedListIteratorDestroy", "finalizeAllDelayTasks", "ipcSenderShutdown", "initTimedWaitCond", "threadUtils.createThread", "threadUtils.useconds_t", "icLogDebug", "strdup", "strncpy", "malloc", "free"], "published": ["getServiceState", "setServiceState"], "classes": [], "methods": [{"name": "char ** getArgv(char * managerPath,int managerArgCount,char ** managerArgs)", "description": "Generates a new argument vector array for starting a service, duplicating the provided arguments.", "parameters": ["char *managerPath", "int managerArgCount", "char **managerArgs"], "scope": "", "scopeKind": ""}, {"name": "void * start_main(void * arg)", "description": "Thread function that runs a service's main function, updating the service state before and after execution.", "parameters": ["void *arg"], "scope": "", "scopeKind": ""}, {"name": "pthread_t * start_service(ServiceStartInfo * info)", "description": "Creates a thread to run a specified service based on provided start info.", "parameters": ["ServiceStartInfo *info"], "scope": "", "scopeKind": ""}, {"name": "int main(int argc,char ** argv)", "description": "The entry point of the program that initializes the service management environment, starts the watchdog service, and waits for all service threads to complete.", "parameters": ["int argc", "char **argv"], "scope": "", "scopeKind": ""}, {"name": "void startProcess(serviceDefinition * procDef,bool restartAfterCrash)", "description": "Starts a specified service process or thread based on its definition.", "parameters": ["serviceDefinition *procDef", "bool restartAfterCrash"], "scope": "", "scopeKind": ""}, {"name": "void setServiceState(char * serviceName,bool isRunning)", "description": "Updates the internal hash map to reflect whether a named service is currently running.", "parameters": ["char *serviceName", "bool isRunning"], "scope": "", "scopeKind": ""}, {"name": "void freeServiceStartInfo(ServiceStartInfo * info)", "description": "Releases resources allocated for a ServiceStartInfo structure.", "parameters": ["ServiceStartInfo *info"], "scope": "", "scopeKind": ""}, {"name": "bool getServiceState(char * serviceName)", "description": "Retrieves whether a specific service is currently marked as running.", "parameters": ["char *serviceName"], "scope": "", "scopeKind": ""}], "calls": ["createThread", "hashMapCreate", "hashMapGet", "hashMapPut", "linkedListCreate", "linkedListAppend", "linkedListIteratorCreate", "linkedListIteratorHasNext", "linkedListIteratorGetNext", "linkedListCount", "linkedListIteratorDestroy", "initTimedWaitCond", "icLogDebug", "strdup", "malloc", "free", "ipcSenderShutdown", "finalizeAllDelayTasks"], "search-terms": ["service management", "multithreaded service control", "Linux services", "service thread startup", "service state hash", "service initialization", "main service loop", "watchdog integration", "service process creation"], "state": 2, "file_id": 911, "knowledge_revision": 14062, "git_revision": "", "ctags": [{"_type": "tag", "name": "LOG_TAG", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^#define LOG_TAG /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SERVICE_MTX", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^static pthread_mutex_t SERVICE_MTX = PTHREAD_MUTEX_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "SINGLE_PHASE_START_COMPLETE_MTX", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^static pthread_cond_t SINGLE_PHASE_START_COMPLETE_MTX = PTHREAD_COND_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_cond_t", "kind": "variable"}, {"_type": "tag", "name": "ServiceStartInfo", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^} ServiceStartInfo;$/", "file": true, "language": "C", "typeref": "struct:__anon0c36863a0108", "kind": "typedef"}, {"_type": "tag", "name": "__anon0c36863a0108", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^{$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "argc", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^    int argc;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "member", "scope": "__anon0c36863a0108", "scopeKind": "struct"}, {"_type": "tag", "name": "argv", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^    char **argv;$/", "file": true, "language": "C", "typeref": "typename:char **", "kind": "member", "scope": "__anon0c36863a0108", "scopeKind": "struct"}, {"_type": "tag", "name": "argv_alloced", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^    bool argv_alloced;$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "member", "scope": "__anon0c36863a0108", "scopeKind": "struct"}, {"_type": "tag", "name": "freeServiceStartInfo", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^static void freeServiceStartInfo(ServiceStartInfo *info)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(ServiceStartInfo * info)"}, {"_type": "tag", "name": "getArgv", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^static char **getArgv(char *managerPath, int managerArgCount, char **managerArgs)$/", "file": true, "language": "C", "typeref": "typename:char **", "kind": "function", "signature": "(char * managerPath,int managerArgCount,char ** managerArgs)"}, {"_type": "tag", "name": "getServiceState", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^bool getServiceState(char *serviceName)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(char * serviceName)"}, {"_type": "tag", "name": "main", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^    service_main main;$/", "file": true, "language": "C", "typeref": "typename:service_main", "kind": "member", "scope": "__anon0c36863a0108", "scopeKind": "struct"}, {"_type": "tag", "name": "main", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^int main(int argc, char ** argv)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(int argc,char ** argv)"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^    char *name;$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "__anon0c36863a0108", "scopeKind": "struct"}, {"_type": "tag", "name": "serviceStateSet", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^static icHashMap *serviceStateSet = NULL;$/", "file": true, "language": "C", "typeref": "typename:icHashMap *", "kind": "variable"}, {"_type": "tag", "name": "serviceThreads", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^static icLinkedList *serviceThreads = NULL;$/", "file": true, "language": "C", "typeref": "typename:icLinkedList *", "kind": "variable"}, {"_type": "tag", "name": "service_main", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^typedef int (*service_main)(int argc, char ** argv);$/", "file": true, "language": "C", "typeref": "typename:int (*)(int argc,char ** argv)", "kind": "typedef"}, {"_type": "tag", "name": "setServiceState", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^static void setServiceState(char *serviceName, bool isRunning)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(char * serviceName,bool isRunning)"}, {"_type": "tag", "name": "startProcess", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^void startProcess(serviceDefinition *procDef, bool restartAfterCrash)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(serviceDefinition * procDef,bool restartAfterCrash)"}, {"_type": "tag", "name": "start_main", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^static void* start_main(void *arg)$/", "file": true, "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "(void * arg)"}, {"_type": "tag", "name": "start_service", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/main/main.c", "pattern": "/^static pthread_t* start_service(ServiceStartInfo *info)$/", "file": true, "language": "C", "typeref": "typename:pthread_t *", "kind": "function", "signature": "(ServiceStartInfo * info)"}], "hash": "16ba6ff20e6ea0c120d4af0a7f16756f", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "components/opensource/zilker-sdk/source/main/main.c", "fields": [{"name": "pthread_mutex_t SERVICE_MTX", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_cond_t SINGLE_PHASE_START_COMPLETE_MTX", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int argc", "scope": "__anon0c36863a0108", "scopeKind": "struct", "description": "unavailable"}, {"name": "char ** argv", "scope": "__anon0c36863a0108", "scopeKind": "struct", "description": "unavailable"}, {"name": "bool argv_alloced", "scope": "__anon0c36863a0108", "scopeKind": "struct", "description": "unavailable"}, {"name": "service_main main", "scope": "__anon0c36863a0108", "scopeKind": "struct", "description": "unavailable"}, {"name": "char * name", "scope": "__anon0c36863a0108", "scopeKind": "struct", "description": "unavailable"}, {"name": "icHashMap * serviceStateSet", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "icLinkedList * serviceThreads", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"14062": ""}]}