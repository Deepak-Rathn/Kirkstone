{"is_source_file": true, "format": "C", "description": "This file contains the implementation of a JST (JavaScript Template) parser and preprocessor for a C-based project. It includes functions for parsing, including handling custom tags, includes, and processing template blocks into JavaScript code, as well as managing file loading and inclusion guards.", "external_files": ["jst.h", "jst_internal.h", "stdio.h", "stdlib.h", "ctype.h", "memory.h", "unistd.h"], "external_methods": ["read_file", "load_template_file", "CosaPhpExtLog"], "published": ["load_template_file"], "classes": [{"name": "template_block_type", "description": "Enumeration of the different types of template blocks (code, string, content)."}, {"name": "template_block", "description": "Structure representing a block of template content, with type, start pointer, length, and need_free flag."}, {"name": "growing_buffer", "description": "Structure for dynamically growing output buffer, including data pointer, write length, and allocated length."}], "methods": [{"name": "void buffer_init(growing_buffer * buf)", "description": "Initializes a growing_buffer structure.", "scope": "", "scopeKind": ""}, {"name": "void buffer_push(growing_buffer * buf,const char * s,size_t len)", "description": "Appends a string of specified length to the growing_buffer, reallocating as necessary.", "scope": "", "scopeKind": ""}, {"name": "void buffer_free(growing_buffer * buf)", "description": "Frees the memory allocated for a growing_buffer.", "scope": "", "scopeKind": ""}, {"name": "int load_template_file(const char * filename,char ** bufout,size_t * lenout,int top)", "description": "Loads a template file, processes includes and JST directives, and outputs JavaScript code as a string.", "scope": "", "scopeKind": ""}, {"name": "void log_syntax_error(char * err,char * s1,char * cur,char * end)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void process_includes(char * buf,size_t buflen,growing_buffer * tbuf)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void process_jst(char * buf,size_t buflen,growing_buffer * tbuf)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int template_make_block(char ** bufcur,size_t * buflen,template_block * block)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int template_make_include(char ** bufcur,size_t * buflen,template_block * block,char * bufstart)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int template_process(char ** buf,size_t * buflen,int top)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void template_write_block(growing_buffer * bufout,template_block * block)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["read_file", "load_template_file", "CosaPhpExtLog"], "search-terms": ["jst_parser", "template_block", "JST_OPEN_TAG", "include", "template_process", "load_template_file"], "state": 2, "file_id": 12964, "knowledge_revision": 25863, "git_revision": "", "ctags": [{"_type": "tag", "name": "GB_BLOCK_SIZE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^#define GB_BLOCK_SIZE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "JST_CLOSE_LEN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^#define JST_CLOSE_LEN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "JST_CLOSE_TAG", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^#define JST_CLOSE_TAG /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "JST_OPEN_LEN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^#define JST_OPEN_LEN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "JST_OPEN_TAG", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^#define JST_OPEN_TAG /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "MAX_INCLUDE_FILE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^#define MAX_INCLUDE_FILE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "MAX_PATH_LEN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^#define MAX_PATH_LEN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "TMPL_MAX_INC_SZ", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^#define TMPL_MAX_INC_SZ /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "alloc_len", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^  size_t alloc_len;$/", "file": true, "language": "C", "typeref": "typename:size_t", "kind": "member", "scope": "growing_buffer", "scopeKind": "struct"}, {"_type": "tag", "name": "buffer_free", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^void buffer_free(growing_buffer* buf)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(growing_buffer * buf)"}, {"_type": "tag", "name": "buffer_init", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^void buffer_init(growing_buffer* buf)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(growing_buffer * buf)"}, {"_type": "tag", "name": "buffer_push", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^void buffer_push(growing_buffer* buf, const char* s, size_t len)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(growing_buffer * buf,const char * s,size_t len)"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^  char* data;$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "growing_buffer", "scopeKind": "struct"}, {"_type": "tag", "name": "g_document_root_path", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^static char g_document_root_path[MAX_PATH_LEN] = {0};$/", "file": true, "language": "C", "typeref": "typename:char[]", "kind": "variable"}, {"_type": "tag", "name": "g_include_paths", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^static char g_include_paths[MAX_INCLUDE_FILE][MAX_PATH_LEN] = {{0}};$/", "file": true, "language": "C", "typeref": "typename:char[][]", "kind": "variable"}, {"_type": "tag", "name": "g_include_paths_count", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^static int g_include_paths_count = 0;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "g_is_cgi", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^static int g_is_cgi = 1;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "growing_buffer", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^typedef struct growing_buffer$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "growing_buffer", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^}growing_buffer;$/", "file": true, "language": "C", "typeref": "struct:growing_buffer", "kind": "typedef"}, {"_type": "tag", "name": "len", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^  size_t len;$/", "file": true, "language": "C", "typeref": "typename:size_t", "kind": "member", "scope": "template_block", "scopeKind": "struct"}, {"_type": "tag", "name": "load_template_file", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^int load_template_file(const char *filename, char** bufout, size_t* lenout, int top)$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(const char * filename,char ** bufout,size_t * lenout,int top)"}, {"_type": "tag", "name": "log_debug_message", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^#define log_debug_message(/", "file": true, "language": "C", "kind": "macro", "signature": "(...)"}, {"_type": "tag", "name": "log_syntax_error", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^static void log_syntax_error(char* err, char* s1, char* cur, char* end)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(char * err,char * s1,char * cur,char * end)"}, {"_type": "tag", "name": "need_free", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^  int need_free;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "member", "scope": "template_block", "scopeKind": "struct"}, {"_type": "tag", "name": "process_includes", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^static void process_includes(char* buf, size_t buflen, growing_buffer* tbuf)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(char * buf,size_t buflen,growing_buffer * tbuf)"}, {"_type": "tag", "name": "process_jst", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^static void process_jst(char* buf, size_t buflen, growing_buffer* tbuf)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(char * buf,size_t buflen,growing_buffer * tbuf)"}, {"_type": "tag", "name": "start", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^  char* start;$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "template_block", "scopeKind": "struct"}, {"_type": "tag", "name": "template_block", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^typedef struct template_block$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "template_block", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^}template_block;$/", "file": true, "language": "C", "typeref": "struct:template_block", "kind": "typedef"}, {"_type": "tag", "name": "template_block_code", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^  template_block_code,$/", "file": true, "language": "C", "kind": "enumerator", "scope": "template_block_type", "scopeKind": "enum"}, {"_type": "tag", "name": "template_block_content", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^  template_block_content$/", "file": true, "language": "C", "kind": "enumerator", "scope": "template_block_type", "scopeKind": "enum"}, {"_type": "tag", "name": "template_block_string", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^  template_block_string,$/", "file": true, "language": "C", "kind": "enumerator", "scope": "template_block_type", "scopeKind": "enum"}, {"_type": "tag", "name": "template_block_type", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^typedef enum template_block_type$/", "file": true, "language": "C", "kind": "enum"}, {"_type": "tag", "name": "template_block_type", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^}template_block_type;$/", "file": true, "language": "C", "typeref": "enum:template_block_type", "kind": "typedef"}, {"_type": "tag", "name": "template_make_block", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^static int template_make_block(char** bufcur, size_t* buflen, template_block* block)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char ** bufcur,size_t * buflen,template_block * block)"}, {"_type": "tag", "name": "template_make_include", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^static int template_make_include(char** bufcur, size_t* buflen, template_block* block, char* buf/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char ** bufcur,size_t * buflen,template_block * block,char * bufstart)"}, {"_type": "tag", "name": "template_process", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^static int template_process(char** buf, size_t* buflen, int top)$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "(char ** buf,size_t * buflen,int top)"}, {"_type": "tag", "name": "template_write_block", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^static void template_write_block(growing_buffer* bufout, template_block* block)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(growing_buffer * bufout,template_block * block)"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^  template_block_type type;$/", "file": true, "language": "C", "typeref": "typename:template_block_type", "kind": "member", "scope": "template_block", "scopeKind": "struct"}, {"_type": "tag", "name": "write_len", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdk/components/generic/jst/source/jst_parser.c", "pattern": "/^  size_t write_len;$/", "file": true, "language": "C", "typeref": "typename:size_t", "kind": "member", "scope": "growing_buffer", "scopeKind": "struct"}], "hash": "d3334312a1f1966797be36dfdff290e5", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdk/components/generic/jst/source/jst_parser.c", "fields": [{"name": "size_t alloc_len", "scope": "growing_buffer", "scopeKind": "struct", "description": "unavailable"}, {"name": "char * data", "scope": "growing_buffer", "scopeKind": "struct", "description": "unavailable"}, {"name": "char[] g_document_root_path", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char[][] g_include_paths", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int g_include_paths_count", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int g_is_cgi", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "size_t len", "scope": "template_block", "scopeKind": "struct", "description": "unavailable"}, {"name": "int need_free", "scope": "template_block", "scopeKind": "struct", "description": "unavailable"}, {"name": "char * start", "scope": "template_block", "scopeKind": "struct", "description": "unavailable"}, {"name": "template_block_type type", "scope": "template_block", "scopeKind": "struct", "description": "unavailable"}, {"name": "size_t write_len", "scope": "growing_buffer", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"25863": ""}]}