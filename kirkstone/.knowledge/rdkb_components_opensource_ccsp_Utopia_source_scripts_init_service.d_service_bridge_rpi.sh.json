{"is_source_file": true, "format": "Shell script (bash/sh)", "description": "This file is a shell script for initializing and controlling a network bridge service in a Linux-based environment. It contains functions for managing network interfaces, firewall rules, DHCP handlers, routing, and ebtable rules, and for starting and stopping the bridge service.", "external_files": ["/etc/utopia/service.d/hostname_functions.sh", "/etc/utopia/service.d/ulog_functions.sh", "/etc/utopia/service.d/event_handler_functions.sh"], "external_methods": ["sysevent get", "sysevent set", "sysevent async", "sysevent rm_async", "sysevent setoptions", "ip link set", "brctl addif", "brctl delif", "brctl addbr", "brctl setfd", "brctl stp", "ip addr add", "ip route show", "ip route add", "ip route del", "ip rule add", "ip rule del", "iptables", "ebtables", "ifconfig", "syscfg get", "syscfg set", "cat", "awk", "sleep", "touch", "execute_dir", "wait_till_end_state", "flush_connection_info"], "published": ["service_start", "service_stop", "service_init", "virtual_interface", "add_to_group", "del_from_group", "filter_local_traffic", "routing_rules"], "classes": [], "methods": [{"name": "unregister_dhcp_client_handlers", "description": "Removes DHCP client event handlers by deleting async events for restart, release, and renew."}, {"name": "register_dhcp_client_handlers", "description": "Registers DHCP client event handlers for restart, release, and renew events, associating them with the DHCP link script."}, {"name": "enslave_a_interface", "description": "Enslaves a network interface to a bridge by bringing it up and adding it to the specified bridge."}, {"name": "bringup_ethernet_interfaces", "description": "Placeholder function for bringing Ethernet interfaces up (currently a no-op)."}, {"name": "teardown_ethernet_interfaces", "description": "Brings down specified Ethernet interfaces."}, {"name": "bringup_wireless_interfaces", "description": "Configures wireless interfaces with MAC addresses and enables them."}, {"name": "teardown_wireless_interfaces", "description": "Disables wireless interfaces and their daemons."}, {"name": "stop_firewall", "description": "Stops the firewall if it is not already stopped."}, {"name": "add_ebtable_rule", "description": "Adds ebtable rules for redirecting diagnostic traffic and modifying network routing."}, {"name": "del_ebtable_rule", "description": "Removes ebtable rules related to diagnostic traffic redirection."}, {"name": "do_start", "description": "Initializes network bridge, sets up interfaces, applies configuration depending on mode, and starts DHCP if needed."}, {"name": "do_stop", "description": "Undoes the network bridge setup, removes interfaces, and stops services."}, {"name": "do_start_multi", "description": "Starts multi-bridge configurations (placeholder, adds commands for multinet start)."}, {"name": "do_stop_multi", "description": "Stops multi-bridge configurations (placeholder implementation)."}, {"name": "service_init", "description": "Initializes configuration variables, retrieves network interface data, and prepares the service environment."}, {"name": "virtual_interface", "description": "Creates or removes a virtual network interface for diagnostics and configures ebtable rules accordingly."}, {"name": "virtual_interface_ebtables_rules", "description": "Configures ebtable rules for filtering and redirecting traffic for the virtual interface."}, {"name": "service_start", "description": "Starts the bridge service, sets up interfaces, routing, and applies configuration. Also manages hostname and firewall."}, {"name": "service_stop", "description": "Stops the bridge service, cleans up interfaces, removes rules, and shuts down routing and firewall settings."}], "calls": ["sysevent get", "sysevent set", "sysevent async", "sysevent rm_async", "sysevent setoptions", "ip link set", "brctl addif", "brctl delif", "brctl addbr", "brctl setfd", "brctl stp", "ip addr add", "ip route show", "ip route add", "ip route del", "ip rule add", "ip rule del", "iptables", "ebtables", "ifconfig", "syscfg get", "syscfg set", "cat", "awk", "sleep", "touch", "execute_dir", "wait_till_end_state", "flush_connection_info"], "search-terms": ["service_bridge", "virtual_interface", "ebtables", "bridge_mode", "dhcp_link.sh", "bridge", "network interfaces", "firewall", "network routing", "Utopia"], "state": 2, "file_id": 7568, "knowledge_revision": 20638, "git_revision": "", "hash": "a65b8219f00d00b8c315cef36edbe39e", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/Utopia/source/scripts/init/service.d/service_bridge_rpi.sh", "revision_history": [{"20638": ""}]}