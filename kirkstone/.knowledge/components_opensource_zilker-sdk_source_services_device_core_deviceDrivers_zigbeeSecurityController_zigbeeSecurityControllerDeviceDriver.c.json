{"is_source_file": true, "format": "C", "description": "This source file implements a Zigbee device driver for Zigbee security controllers, such as keypads and keyfobs, using the Zigbee protocol. It includes device claiming, resource registration, cluster configuration, and event handling functions, specifically for security and zone status changes.", "external_files": ["deviceDriver.h", "errno.h", "commonDeviceDefs.h", "icLog/logging.h", "subsystems/zigbee/zigbeeCommonIds.h", "icUtil/array.h", "string.h", "icUtil/stringUtils.h", "zigbeeClusters/iasZoneCluster.h", "deviceModelHelper.h", "resourceTypes.h", "icTime/timeUtils.h", "zigbeeClusters/pollControlCluster.h", "subsystems/zigbee/zigbeeIO.h", "deviceService/zoneChanged.h", "zigbeeClusters/helpers/comcastBatterySavingHelper.h", "zigbeeSecurityControllerDeviceDriver.h", "zigbeeDriverCommon.h", "zigbeeClusters/helpers/iasZoneHelper.h"], "external_methods": ["zigbeeDriverCommonCreateDeviceDriver", "linkedListIteratorCreate", "linkedListIteratorHasNext", "linkedListIteratorGetNext", "stringCompare", "icDiscoveredDeviceDetailsClusterGetAttributeValue", "zigbeeSubsystemReadNumber", "icLogDebug", "icLogInfo", "icLogWarn", "icLogError", "zigbeeSubsystemEndpointIdAsString", "createEndpoint", "createEndpointResource", "zigbeeDriverCommonSetEndpointNumber", "iasZoneFetchInitialResourceValues", "iasZoneRegisterResources", "zoneChangedFromJSON", "comcastBatterySavingHelperUpdateResources", "zigbeeSubsystemEui64ToId", "getCurrentUnixTimeMillis", "stringBuilder", "stringToBool"], "published": ["zigbeeSecurityControllerDeviceDriverCreate", "zigbeeKeypadDeviceDriverInitialize", "zigbeeKeyfobDeviceDriverInitialize"], "classes": [], "methods": [{"name": "DeviceDriver * zigbeeSecurityControllerDeviceDriverCreate(DeviceServiceCallbacks * deviceService,const char * driverName,const char * deviceClass,uint8_t dcVersion)", "description": "Creates and initializes a Zigbee device driver instance for security controllers with specified callbacks and cluster support.", "scope": "", "scopeKind": ""}, {"name": "void devicesLoaded(ZigbeeDriverCommon * ctx,icLinkedList * devices)", "description": "Handles the event when devices are loaded, performing profile migration for security controller endpoints.", "scope": "", "scopeKind": ""}, {"name": "void preStartup(ZigbeeDriverCommon * ctx,uint32_t * commFailTimeoutSeconds)", "description": "Performs pre-startup configuration, adjusting timeout for keypad devices.", "scope": "", "scopeKind": ""}, {"name": "bool preConfigureCluster(ZigbeeDriverCommon * ctx,ZigbeeCluster * cluster,DeviceConfigurationContext * deviceConfigContext)", "description": "Configures polling intervals for the Poll Control cluster during device setup.", "scope": "", "scopeKind": ""}, {"name": "bool claimDevice(ZigbeeDriverCommon * ctx,IcDiscoveredDeviceDetails * discoveredDeviceDetails)", "description": "Attempts to claim a discovered device as a specific security controller based on zone type.", "scope": "", "scopeKind": ""}, {"name": "bool fetchInitialResourceValues(ZigbeeDriverCommon * ctx,icDevice * device,IcDiscoveredDeviceDetails * discoveredDeviceDetails,icInitialResourceValues * initialResourceValues)", "description": "Fetches initial resource states from the device, focusing on IAS ACE cluster attributes.", "scope": "", "scopeKind": ""}, {"name": "bool registerResources(ZigbeeDriverCommon * ctx,icDevice * device,IcDiscoveredDeviceDetails * discoveredDeviceDetails,icInitialResourceValues * initialResourceValues)", "description": "Registers necessary resources for each relevant device endpoint, based on discovered cluster data.", "scope": "", "scopeKind": ""}, {"name": "void onZoneStatusChanged(const uint64_t eui64,const uint8_t endpointId,const IASZoneStatusChangedNotification * status,const ComcastBatterySavingData * batterySavingData,const void * ctx)", "description": "Callback invoked when the zone status changes, handling status update and battery saving resources.", "scope": "", "scopeKind": ""}, {"name": "RequestSource getRequestSource(ZigbeeDriverCommon * ctx)", "description": "Determines the source of a device request based on device class (e.g., keypad or keyfob).", "scope": "", "scopeKind": ""}, {"name": "void updateLastInteractionDate(const uint64_t eui64,const DeviceDriver * _this)", "description": "Updates the device resource that tracks the last user interaction timestamp.", "scope": "", "scopeKind": ""}, {"name": "bool writeEndpointResource(ZigbeeDriverCommon * ctx,uint32_t endpointNumber,icDeviceResource * resource,const char * previousValue,const char * newValue,bool * baseDriverUpdatesResource)", "description": "Handles writing to device resources, especially for zone status changes, and triggers notifications if configured.", "scope": "", "scopeKind": ""}, {"name": "const char * mapDeviceIdToProfile(ZigbeeDriverCommon * ctx,uint16_t deviceId)", "description": "Maps a device's ID to its corresponding profile name, e.g., security controller profile.", "scope": "", "scopeKind": ""}, {"name": "DeviceDriver * zigbeeKeyfobDeviceDriverInitialize(DeviceServiceCallbacks * deviceService)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DeviceDriver * zigbeeKeypadDeviceDriverInitialize(DeviceServiceCallbacks * deviceService)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["zigbeeDriverCommonCreateDeviceDriver", "linkedListIteratorCreate", "linkedListIteratorHasNext", "linkedListIteratorGetNext", "icDiscoveredDeviceDetailsClusterGetAttributeValue", "zigbeeSubsystemReadNumber", "zoneChangedFromJSON", "comcastBatterySavingHelperUpdateResources", "zigbeeSubsystemEui64ToId", "getCurrentUnixTimeMillis", "stringBuilder", "stringToBool"], "search-terms": ["zigbeeSecurityController", "IASZoneStatusChangedNotification", "ZONE_STATUS", "IAS_ACE_DEVICE_ID", "claimDevice", "deviceDrivers/zigbeeSecurityController", "zoneChanged", "securityController", "assertDeviceClaimed", "profiles/SECURITY_CONTROLLER_PROFILE"], "state": 2, "file_id": 1004, "knowledge_revision": 14157, "git_revision": "", "ctags": [{"_type": "tag", "name": "ACE_DEVICE_METADATA_SEND_BYPASS_LIST", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^#define ACE_DEVICE_METADATA_SEND_BYPASS_LIST /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "ACE_DEVICE_METADATA_SEND_EXIT_ENTRY_DELAY", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^#define ACE_DEVICE_METADATA_SEND_EXIT_ENTRY_DELAY /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "ACE_DEVICE_METADATA_SEND_PANEL_STATUS", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^#define ACE_DEVICE_METADATA_SEND_PANEL_STATUS /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "ACE_DEVICE_METADATA_SEND_ZONE_STATUS", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^#define ACE_DEVICE_METADATA_SEND_ZONE_STATUS /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "KEYFOB_DC_VERSION", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^#define KEYFOB_DC_VERSION /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "KEYFOB_DRIVER_NAME", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^#define KEYFOB_DRIVER_NAME /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "KEYPAD_DC_VERSION", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^#define KEYPAD_DC_VERSION /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "KEYPAD_DRIVER_NAME", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^#define KEYPAD_DRIVER_NAME /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "claimDevice", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^static bool claimDevice(ZigbeeDriverCommon *ctx, IcDiscoveredDeviceDetails *discoveredDeviceDeta/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(ZigbeeDriverCommon * ctx,IcDiscoveredDeviceDetails * discoveredDeviceDetails)"}, {"_type": "tag", "name": "devicesLoaded", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^static void devicesLoaded(ZigbeeDriverCommon *ctx, icLinkedList *devices)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(ZigbeeDriverCommon * ctx,icLinkedList * devices)"}, {"_type": "tag", "name": "fetchInitialResourceValues", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^static bool fetchInitialResourceValues(ZigbeeDriverCommon *ctx, icDevice *device,$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(ZigbeeDriverCommon * ctx,icDevice * device,IcDiscoveredDeviceDetails * discoveredDeviceDetails,icInitialResourceValues * initialResourceValues)"}, {"_type": "tag", "name": "getRequestSource", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^static RequestSource getRequestSource(ZigbeeDriverCommon *ctx)$/", "file": true, "language": "C", "typeref": "typename:RequestSource", "kind": "function", "signature": "(ZigbeeDriverCommon * ctx)"}, {"_type": "tag", "name": "mapDeviceIdToProfile", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^static const char *mapDeviceIdToProfile(ZigbeeDriverCommon *ctx, uint16_t deviceId)$/", "file": true, "language": "C", "typeref": "typename:const char *", "kind": "function", "signature": "(ZigbeeDriverCommon * ctx,uint16_t deviceId)"}, {"_type": "tag", "name": "myDeviceIds", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^static uint16_t myDeviceIds[] = {};$/", "file": true, "language": "C", "typeref": "typename:uint16_t[]", "kind": "variable"}, {"_type": "tag", "name": "onZoneStatusChanged", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^void onZoneStatusChanged(const uint64_t eui64,$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(const uint64_t eui64,const uint8_t endpointId,const IASZoneStatusChangedNotification * status,const ComcastBatterySavingData * batterySavingData,const void * ctx)"}, {"_type": "tag", "name": "preConfigureCluster", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^static bool preConfigureCluster(ZigbeeDriverCommon *ctx, ZigbeeCluster *cluster, DeviceConfigura/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(ZigbeeDriverCommon * ctx,ZigbeeCluster * cluster,DeviceConfigurationContext * deviceConfigContext)"}, {"_type": "tag", "name": "preStartup", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^static void preStartup(ZigbeeDriverCommon *ctx, uint32_t *commFailTimeoutSeconds)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(ZigbeeDriverCommon * ctx,uint32_t * commFailTimeoutSeconds)"}, {"_type": "tag", "name": "registerResources", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^registerResources(ZigbeeDriverCommon *ctx, icDevice *device, IcDiscoveredDeviceDetails *discover/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(ZigbeeDriverCommon * ctx,icDevice * device,IcDiscoveredDeviceDetails * discoveredDeviceDetails,icInitialResourceValues * initialResourceValues)"}, {"_type": "tag", "name": "updateLastInteractionDate", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^static void updateLastInteractionDate(const uint64_t eui64, const DeviceDriver *_this)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(const uint64_t eui64,const DeviceDriver * _this)"}, {"_type": "tag", "name": "writeEndpointResource", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^static bool writeEndpointResource(ZigbeeDriverCommon *ctx,$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(ZigbeeDriverCommon * ctx,uint32_t endpointNumber,icDeviceResource * resource,const char * previousValue,const char * newValue,bool * baseDriverUpdatesResource)"}, {"_type": "tag", "name": "zigbeeKeyfobDeviceDriverInitialize", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^DeviceDriver *zigbeeKeyfobDeviceDriverInitialize(DeviceServiceCallbacks *deviceService)$/", "language": "C", "typeref": "typename:DeviceDriver *", "kind": "function", "signature": "(DeviceServiceCallbacks * deviceService)"}, {"_type": "tag", "name": "zigbeeKeypadDeviceDriverInitialize", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^DeviceDriver *zigbeeKeypadDeviceDriverInitialize(DeviceServiceCallbacks *deviceService)$/", "language": "C", "typeref": "typename:DeviceDriver *", "kind": "function", "signature": "(DeviceServiceCallbacks * deviceService)"}, {"_type": "tag", "name": "zigbeeSecurityControllerDeviceDriverCreate", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "pattern": "/^static DeviceDriver *zigbeeSecurityControllerDeviceDriverCreate(DeviceServiceCallbacks *deviceSe/", "file": true, "language": "C", "typeref": "typename:DeviceDriver *", "kind": "function", "signature": "(DeviceServiceCallbacks * deviceService,const char * driverName,const char * deviceClass,uint8_t dcVersion)"}], "hash": "f8e40a8b1c59112a28aff424b32969c7", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "components/opensource/zilker-sdk/source/services/device/core/deviceDrivers/zigbeeSecurityController/zigbeeSecurityControllerDeviceDriver.c", "fields": [{"name": "uint16_t[] myDeviceIds", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"14157": ""}]}