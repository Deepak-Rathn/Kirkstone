{"is_source_file": true, "format": "C", "description": "This file implements the WebPA interface for communication between the device and external services, including functions for encoding data in base64, handling message queues, establishing connection with Parodus, sending messages, and checking component health status. It includes external dependencies on system, network, and device configuration APIs, and contains functions specific to device management and communication.", "external_files": ["ssp_global.h", "ccsp_dm_api.h", "harvester.h", "/sysevent/sysevent.h", "/syscfg/syscfg.h", "cosa_apis.h", "libparodus.h", "collection.h", "webpa_interface.h", "base64.h", "cosa_dbus_api.h", "wifi_ctrl.h", "wifi_util.h"], "external_methods": ["b64_get_encoded_buffer_size", "b64_encode", "queue_create", "queue_push", "queue_peek", "queue_count", "queue_remove", "get_parodus_url", "CcspBaseIf_getParameterValues", "free_parameterValStruct_t", "syscfg_init", "syscfg_get", "waitForEthAgentComponentReady", "sysevent_get", "rbus_get", "rbusValue_GetString", "AnscMacToLower", "check_ethernet_wan_status"], "published": ["print_b64_endcoded_buffer", "sendWebpaMsg", "initparodusTask", "getDeviceMac"], "classes": [{"name": "webpa_interface_t", "description": "Structure holding WebPA interface state, including connection handles, message queue, synchronization primitives, device MAC, and thread information."}], "methods": [{"name": "void print_b64_endcoded_buffer(unsigned char * data,unsigned int size)", "description": "Encodes binary data to base64 and prints the serialized and base64-encoded data for debugging.", "scope": "", "scopeKind": ""}, {"name": "void * handle_parodus(void * arg)", "description": "Thread function that periodically checks the message queue and sends messages via libparodus.", "scope": "", "scopeKind": ""}, {"name": "void sendWebpaMsg(char * serviceName,char * dest,char * trans_id,char * traceParent,char * traceState,char * contentType,char * payload,unsigned int payload_len)", "description": "Constructs and enqueues a WebPA message for transmission, managing synchronization and message headers.", "scope": "", "scopeKind": ""}, {"name": "int initparodusTask()", "description": "Initializes the connection to Parodus, setting up necessary resources, retries on failure with exponential backoff, and starts the message handling thread.", "scope": "", "scopeKind": ""}, {"name": "void checkComponentHealthStatus(char * compName,char * dbusPath,char * status,int * retStatus)", "description": "Queries the health status of a system component via CCSP base interface and updates status variables.", "scope": "", "scopeKind": ""}, {"name": "void waitForEthAgentComponentReady()", "description": "Polls until the Ethernet agent component status becomes healthy ('Green') or timeout occurs.", "scope": "", "scopeKind": ""}, {"name": "int check_ethernet_wan_status()", "description": "Checks if Ethernet WAN is enabled by querying system configuration and component status.", "scope": "", "scopeKind": ""}, {"name": "char * getDeviceMac()", "description": "Retrieves Device MAC address, prioritizing sysevent, falling back to RBus, and caching the result.", "scope": "", "scopeKind": ""}], "calls": ["queue_create", "queue_push", "queue_peek", "queue_count", "queue_remove", "get_parodus_url", "libparodus_init", "libparodus_send", "libparodus_shutdown", "CcspBaseIf_getParameterValues", "free_parameterValStruct_t", "syscfg_get", "sysevent_get", "rbus_get", "rbusValue_GetString", "AnscMacToLower", "check_ethernet_wan_status"], "search-terms": ["webpa_interface", "parodus", "sysevent", "base64", "deviceMAC", "func handle_parodus", "sendWebpaMsg", "initparodusTask", "component health", "ccsp_dm_api"], "state": 2, "file_id": 5897, "knowledge_revision": 19008, "git_revision": "", "ctags": [{"_type": "tag", "name": "CCSP_AGENT_WEBPA_SUBSYSTEM", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/dml/tr_181/sbapi/webpa_interface.c", "pattern": "/^#define CCSP_AGENT_WEBPA_SUBSYSTEM /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "CPE_MAC_NAMESPACE", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/dml/tr_181/sbapi/webpa_interface.c", "pattern": "/^#define CPE_MAC_NAMESPACE /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "ETH_WAN_STATUS_PARAM", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/dml/tr_181/sbapi/webpa_interface.c", "pattern": "/^#define ETH_WAN_STATUS_PARAM /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "MAX_PARAMETERNAME_LEN", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/dml/tr_181/sbapi/webpa_interface.c", "pattern": "/^#define MAX_PARAMETERNAME_LEN /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "RDKB_ETHAGENT_COMPONENT_NAME", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/dml/tr_181/sbapi/webpa_interface.c", "pattern": "/^#define RDKB_ETHAGENT_COMPONENT_NAME /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "RDKB_ETHAGENT_DBUS_PATH", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/dml/tr_181/sbapi/webpa_interface.c", "pattern": "/^#define RDKB_ETHAGENT_DBUS_PATH /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "checkComponentHealthStatus", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/dml/tr_181/sbapi/webpa_interface.c", "pattern": "/^static void checkComponentHealthStatus(char * compName, char * dbusPath, char *status, int *retS/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(char * compName,char * dbusPath,char * status,int * retStatus)"}, {"_type": "tag", "name": "check_ethernet_wan_status", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/dml/tr_181/sbapi/webpa_interface.c", "pattern": "/^static int check_ethernet_wan_status()$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getDeviceMac", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/dml/tr_181/sbapi/webpa_interface.c", "pattern": "/^char * getDeviceMac()$/", "language": "C", "typeref": "typename:char *", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "handle_parodus", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/dml/tr_181/sbapi/webpa_interface.c", "pattern": "/^static void *handle_parodus(void *arg)$/", "file": true, "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "(void * arg)"}, {"_type": "tag", "name": "initparodusTask", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/dml/tr_181/sbapi/webpa_interface.c", "pattern": "/^int initparodusTask()$/", "language": "C", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "print_b64_endcoded_buffer", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/dml/tr_181/sbapi/webpa_interface.c", "pattern": "/^void print_b64_endcoded_buffer\t(unsigned char *data, unsigned int size)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(unsigned char * data,unsigned int size)"}, {"_type": "tag", "name": "sendWebpaMsg", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/dml/tr_181/sbapi/webpa_interface.c", "pattern": "/^void sendWebpaMsg(char *serviceName, char *dest, char *trans_id, char *traceParent, char *traceS/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(char * serviceName,char * dest,char * trans_id,char * traceParent,char * traceState,char * contentType,char * payload,unsigned int payload_len)"}, {"_type": "tag", "name": "waitForEthAgentComponentReady", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/dml/tr_181/sbapi/webpa_interface.c", "pattern": "/^static void waitForEthAgentComponentReady()$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "webpa_interface", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/rdkb/components/opensource/ccsp/OneWifi/source/dml/tr_181/sbapi/webpa_interface.c", "pattern": "/^static webpa_interface_t\twebpa_interface;$/", "file": true, "language": "C", "typeref": "typename:webpa_interface_t", "kind": "variable"}], "hash": "a8655e31ee722d5ffe71753d73bdcbf6", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/OneWifi/source/dml/tr_181/sbapi/webpa_interface.c", "fields": [{"name": "webpa_interface_t webpa_interface", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"19008": ""}]}