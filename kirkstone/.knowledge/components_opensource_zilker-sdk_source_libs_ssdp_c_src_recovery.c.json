{"is_source_file": true, "format": "C", "description": "This file implements the recovery functionality for SSDP-based device discovery, specifically for cases where a device's IP address might have changed. It maintains a list of ongoing recovery searches based on MAC addresses, initiates SSDP discovery, and uses callbacks to update matching device IPs once found.", "external_files": ["<pthread.h>", "<string.h>", "<icLog/logging.h>", "<icConcurrent/timedWait.h>", "<ssdp/ssdp.h>", "<icUtil/macAddrUtils.h>", "\"discoverSearch.h\""], "external_methods": ["compareMacAddrs", "macAddrToBytes", "linkedListCreate", "linkedListAppend", "linkedListFind", "linkedListDelete", "linkedListCount", "linkedListDestroy", "initTimedWaitCond", "incrementalCondTimedWait", "ssdpDiscoverStart", "ssdpDiscoverStop"], "published": ["ssdpRecoverIpAddress"], "classes": [], "methods": [{"name": "void cleanupList(recoverSearch * search)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void deleteSearchObject(void * item)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void destroyRecovery(recoverSearch * search)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool findByMacAddress(void * searchVal,void * item)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool findSearchObject(void * searchVal,void * item)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void ipRecoveryCallback(SsdpDevice * device)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool ssdpRecoverIpAddress(SearchType type,const char * macAddress,char ** ipAddress,uint32_t timeoutSeconds)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["ssdpDiscoverStart", "ssdpDiscoverStop", "linkedListFind", "linkedListCreate", "linkedListAppend", "linkedListDelete", "linkedListCount", "linkedListDestroy", "macAddrToBytes", "compareMacAddrs", "initTimedWaitCond", "incrementalCondTimedWait"], "search-terms": ["ssdp", "recovery", "macAddress", "ipAddress", "device recovery", "discover", "macAddrToBytes", "ssdpRecoverIpAddress"], "state": 2, "file_id": 793, "knowledge_revision": 13958, "git_revision": "", "ctags": [{"_type": "tag", "name": "_recoverSearch", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ssdp/c/src/recovery.c", "pattern": "/^typedef struct _recoverSearch$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "cleanupList", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ssdp/c/src/recovery.c", "pattern": "/^static void cleanupList(recoverSearch *search)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(recoverSearch * search)"}, {"_type": "tag", "name": "cond", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ssdp/c/src/recovery.c", "pattern": "/^    pthread_cond_t  cond;$/", "file": true, "language": "C", "typeref": "typename:pthread_cond_t", "kind": "member", "scope": "_recoverSearch", "scopeKind": "struct"}, {"_type": "tag", "name": "deleteSearchObject", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ssdp/c/src/recovery.c", "pattern": "/^static void deleteSearchObject(void *item)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void * item)"}, {"_type": "tag", "name": "destroyRecovery", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ssdp/c/src/recovery.c", "pattern": "/^static void destroyRecovery(recoverSearch *search)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(recoverSearch * search)"}, {"_type": "tag", "name": "findByMacAddress", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ssdp/c/src/recovery.c", "pattern": "/^static bool findByMacAddress(void *searchVal, void *item)$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(void * searchVal,void * item)"}, {"_type": "tag", "name": "findSearchObject", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ssdp/c/src/recovery.c", "pattern": "/^static bool findSearchObject(void *searchVal, void *item)$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(void * searchVal,void * item)"}, {"_type": "tag", "name": "handle", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ssdp/c/src/recovery.c", "pattern": "/^    uint32_t        handle;     \\/\\/ \"discover start\" handle$/", "file": true, "language": "C", "typeref": "typename:uint32_t", "kind": "member", "scope": "_recoverSearch", "scopeKind": "struct"}, {"_type": "tag", "name": "ipAddr", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ssdp/c/src/recovery.c", "pattern": "/^    char            *ipAddr;    \\/\\/ IP of the discovered device with the same MAC address$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "_recoverSearch", "scopeKind": "struct"}, {"_type": "tag", "name": "ipRecoveryCallback", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ssdp/c/src/recovery.c", "pattern": "/^static void ipRecoveryCallback(SsdpDevice *device)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(SsdpDevice * device)"}, {"_type": "tag", "name": "ipRecoveryMutex", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ssdp/c/src/recovery.c", "pattern": "/^static pthread_mutex_t  ipRecoveryMutex = PTHREAD_MUTEX_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "macAddr", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ssdp/c/src/recovery.c", "pattern": "/^    char            *macAddr;   \\/\\/ MAC we're looking for$/", "file": true, "language": "C", "typeref": "typename:char *", "kind": "member", "scope": "_recoverSearch", "scopeKind": "struct"}, {"_type": "tag", "name": "macAddrBytes", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ssdp/c/src/recovery.c", "pattern": "/^    uint8_t macAddrBytes[6];    \\/\\/ MAC we're looking for, represented in bytes$/", "file": true, "language": "C", "typeref": "typename:uint8_t[6]", "kind": "member", "scope": "_recoverSearch", "scopeKind": "struct"}, {"_type": "tag", "name": "mutex", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ssdp/c/src/recovery.c", "pattern": "/^    pthread_mutex_t mutex;      \\/\\/ allow call to ssdpRecoverIpAddress to be synchronous$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "member", "scope": "_recoverSearch", "scopeKind": "struct"}, {"_type": "tag", "name": "recoverList", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ssdp/c/src/recovery.c", "pattern": "/^static icLinkedList     *recoverList = NULL;$/", "file": true, "language": "C", "typeref": "typename:icLinkedList *", "kind": "variable"}, {"_type": "tag", "name": "recoverSearch", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ssdp/c/src/recovery.c", "pattern": "/^} recoverSearch;$/", "file": true, "language": "C", "typeref": "struct:_recoverSearch", "kind": "typedef"}, {"_type": "tag", "name": "ssdpRecoverIpAddress", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ssdp/c/src/recovery.c", "pattern": "/^bool ssdpRecoverIpAddress(SearchType type, const char *macAddress, char **ipAddress, uint32_t ti/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(SearchType type,const char * macAddress,char ** ipAddress,uint32_t timeoutSeconds)"}], "hash": "fe3cc76943764be7c67975a8015090aa", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "components/opensource/zilker-sdk/source/libs/ssdp/c/src/recovery.c", "fields": [{"name": "pthread_cond_t cond", "scope": "_recoverSearch", "scopeKind": "struct", "description": "unavailable"}, {"name": "uint32_t handle", "scope": "_recoverSearch", "scopeKind": "struct", "description": "unavailable"}, {"name": "char * ipAddr", "scope": "_recoverSearch", "scopeKind": "struct", "description": "unavailable"}, {"name": "pthread_mutex_t ipRecoveryMutex", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "char * macAddr", "scope": "_recoverSearch", "scopeKind": "struct", "description": "unavailable"}, {"name": "uint8_t[6] macAddrBytes", "scope": "_recoverSearch", "scopeKind": "struct", "description": "unavailable"}, {"name": "pthread_mutex_t mutex", "scope": "_recoverSearch", "scopeKind": "struct", "description": "unavailable"}, {"name": "icLinkedList * recoverList", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"13958": ""}]}