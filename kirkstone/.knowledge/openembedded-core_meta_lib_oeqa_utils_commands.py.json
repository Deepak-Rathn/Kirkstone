{"is_source_file": true, "format": "Python", "description": "This file provides a Python module defining a Command class and utility functions for executing subprocess commands, especially in the context of build and testing automation within the OEQA framework. It includes functions to run shell commands, interact with BitBake environment variables, and manage QEMU virtual machines for testing.", "external_files": ["oeqa.utils"], "external_methods": ["oeqa.utils.CommandError", "oeqa.utils.ftools.write_file"], "published": ["runCmd", "bitbake", "get_bb_env", "get_bb_vars", "get_bb_var", "get_test_layer", "create_temp_layer", "runqemu", "updateEnv"], "classes": [{"name": "Command", "description": "A class encapsulating the execution of a system command with support for background execution, timeouts, logging, and output collection."}], "methods": [{"name": "run(self)", "description": "Executes the command, manages threading for stdout/stderr, and handles process termination.", "scope": "Command", "scopeKind": "class"}, {"name": "stop(self)", "description": "Terminates threads and the process, and finalizes the collection of output and error streams.", "scope": "Command", "scopeKind": "class"}, {"name": "__init__(self, command, bg=False, timeout=None, data=None, output_log=None, **options)", "scope": "Command", "scopeKind": "class", "description": "unavailable"}, {"name": "bitbake(command, ignore_status=False, timeout=None, postconfig=None, output_log=None, **options)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "create_temp_layer(templayerdir, templayername, priority=999, recipepathspec='recipes-*/*')", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "finalize_output(data)", "scope": "Command.stop", "scopeKind": "member", "description": "unavailable"}, {"name": "get_bb_env(target=None, postconfig=None)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_bb_var(var, target=None, postconfig=None)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_bb_vars(variables=None, target=None, postconfig=None)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_test_layer()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "readStderrThread()", "scope": "Command.run", "scopeKind": "member", "description": "unavailable"}, {"name": "readStdoutThread()", "scope": "Command.run", "scopeKind": "member", "description": "unavailable"}, {"name": "readThread(output, stream, logfunc)", "scope": "Command.run", "scopeKind": "member", "description": "unavailable"}, {"name": "runCmd(command, ignore_status=False, timeout=None, assert_error=True, sync=True, native_sysroot=None, limit_exc_output=0, output_log=None, **options)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "runqemu(pn, ssh=True, runqemuparams='', image_fstype=None, launch_cmd=None, qemuparams=None, overrides={}, discard_writes=True)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "updateEnv(env_file)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "writeThread()", "scope": "Command.run", "scopeKind": "member", "description": "unavailable"}], "calls": ["subprocess.Popen", "subprocess.PIPE", "subprocess.STDOUT", "time.time", "time.sleep", "logging.getLogger", "threading.Thread", "thread.join", "thread.is_alive", "thread.daemon", "os.environ", "os.system", "os.path.join", "os.path.isdir", "os.makedirs", "open", "os.remove", "sys.stdout", "sys.stderr", "signal.terminate", "signal.kill", "contextlib.contextmanager", "bb.tinfoil.Tinfoil", "bb.build.QemuTarget", "os.path.exists", "open"], "search-terms": ["Command class", "runqemu", "bitbake environment", "QEMU testing", "OEQA utils", "subprocess management", "build automation Python"], "state": 2, "file_id": 1880, "knowledge_revision": 15023, "git_revision": "", "ctags": [{"_type": "tag", "name": "Command", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/commands.py", "pattern": "/^class Command(object):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Result", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/commands.py", "pattern": "/^class Result(object):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/commands.py", "pattern": "/^    def __init__(self, command, bg=False, timeout=None, data=None, output_log=None, **options):$/", "language": "Python", "kind": "member", "signature": "(self, command, bg=False, timeout=None, data=None, output_log=None, **options)", "scope": "Command", "scopeKind": "class"}, {"_type": "tag", "name": "bitbake", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/commands.py", "pattern": "/^def bitbake(command, ignore_status=False, timeout=None, postconfig=None, output_log=None, **opti/", "language": "Python", "kind": "function", "signature": "(command, ignore_status=False, timeout=None, postconfig=None, output_log=None, **options)"}, {"_type": "tag", "name": "create_temp_layer", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/commands.py", "pattern": "/^def create_temp_layer(templayerdir, templayername, priority=999, recipepathspec='recipes-*\\/*'):$/", "language": "Python", "kind": "function", "signature": "(templayerdir, templayername, priority=999, recipepathspec='recipes-*/*')"}, {"_type": "tag", "name": "finalize_output", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/commands.py", "pattern": "/^        def finalize_output(data):$/", "file": true, "language": "Python", "kind": "function", "signature": "(data)", "scope": "Command.stop", "scopeKind": "member"}, {"_type": "tag", "name": "get_bb_env", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/commands.py", "pattern": "/^def get_bb_env(target=None, postconfig=None):$/", "language": "Python", "kind": "function", "signature": "(target=None, postconfig=None)"}, {"_type": "tag", "name": "get_bb_var", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/commands.py", "pattern": "/^def get_bb_var(var, target=None, postconfig=None):$/", "language": "Python", "kind": "function", "signature": "(var, target=None, postconfig=None)"}, {"_type": "tag", "name": "get_bb_vars", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/commands.py", "pattern": "/^def get_bb_vars(variables=None, target=None, postconfig=None):$/", "language": "Python", "kind": "function", "signature": "(variables=None, target=None, postconfig=None)"}, {"_type": "tag", "name": "get_test_layer", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/commands.py", "pattern": "/^def get_test_layer():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "readStderrThread", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/commands.py", "pattern": "/^        def readStderrThread():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "Command.run", "scopeKind": "member"}, {"_type": "tag", "name": "readStdoutThread", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/commands.py", "pattern": "/^        def readStdoutThread():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "Command.run", "scopeKind": "member"}, {"_type": "tag", "name": "readThread", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/commands.py", "pattern": "/^        def readThread(output, stream, logfunc):$/", "file": true, "language": "Python", "kind": "function", "signature": "(output, stream, logfunc)", "scope": "Command.run", "scopeKind": "member"}, {"_type": "tag", "name": "run", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/commands.py", "pattern": "/^    def run(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Command", "scopeKind": "class"}, {"_type": "tag", "name": "runCmd", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/commands.py", "pattern": "/^def runCmd(command, ignore_status=False, timeout=None, assert_error=True, sync=True,$/", "language": "Python", "kind": "function", "signature": "(command, ignore_status=False, timeout=None, assert_error=True, sync=True, native_sysroot=None, limit_exc_output=0, output_log=None, **options)"}, {"_type": "tag", "name": "runqemu", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/commands.py", "pattern": "/^def runqemu(pn, ssh=True, runqemuparams='', image_fstype=None, launch_cmd=None, qemuparams=None,/", "language": "Python", "kind": "function", "signature": "(pn, ssh=True, runqemuparams='', image_fstype=None, launch_cmd=None, qemuparams=None, overrides={}, discard_writes=True)"}, {"_type": "tag", "name": "stop", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/commands.py", "pattern": "/^    def stop(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "Command", "scopeKind": "class"}, {"_type": "tag", "name": "updateEnv", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/commands.py", "pattern": "/^def updateEnv(env_file):$/", "language": "Python", "kind": "function", "signature": "(env_file)"}, {"_type": "tag", "name": "writeThread", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oeqa/utils/commands.py", "pattern": "/^        def writeThread():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "Command.run", "scopeKind": "member"}], "hash": "401c89b7b70421131c9a7277008cab24", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "openembedded-core/meta/lib/oeqa/utils/commands.py", "revision_history": [{"15023": ""}]}