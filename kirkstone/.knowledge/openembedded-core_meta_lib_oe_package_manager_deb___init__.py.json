{"is_source_file": true, "format": "Python", "description": "This Python source file is part of a package management subsystem for a build system, implementing classes and functions for handling Debian package index creation, package listing, installation, removal, and information retrieval within a Yocto/OpenEmbedded environment.", "external_files": ["oe.package_manager", "bb.utils", "bb", "oe.path", "bb.fatal", "bb.note", "bb.warn", "opkg_query", "get_signer", "oe.utils", "collections", "tempfile", "os", "re", "subprocess"], "external_methods": ["bb.utils.mkdirhier", "bb.utils.which", "bb.utils.remove", "bb.utils.rename", "bb.note", "bb.warn", "bb.fatal", "oe.path.join", "oe.path.basename", "opkg_query", "get_signer", "bb.utils.check_output", "bb.utils.createCopy", "bb.note", "bb.warn", "bb.fatal", "bb.utils.remove", "bb.utils.rename"], "published": ["DpkgIndexer", "PMPkgsList", "OpkgDpkgPM", "DpkgPM"], "classes": [{"name": "DpkgIndexer", "description": "Indexer class responsible for creating package index configurations and signing the index files for Debian packages within the build environment."}, {"name": "PMPkgsList", "description": "Class for listing installed packages within the package management system."}, {"name": "OpkgDpkgPM", "description": "Abstract base class for handling package info extraction, installation, removal, and index management for Opkg and Dpkg systems."}, {"name": "DpkgPM", "description": "Concrete class for managing Debian packages in the build environment, handling package info, extraction, installation, removal, and index updating."}], "methods": [{"name": "_create_configs(self)", "description": "Creates directory structures and configuration files required for Debian package index management and signing.", "scope": "DpkgIndexer", "scopeKind": "class"}, {"name": "write_index(self)", "description": "Generates package index files for each architecture and optionally signs them.", "scope": "DpkgPM", "scopeKind": "class"}, {"name": "list_pkgs(self)", "description": "Returns a list of installed packages by invoking 'dpkg-query'.", "scope": "PMPkgsList", "scopeKind": "class"}, {"name": "package_info(self, pkg)", "description": "Retrieves detailed package information, such as filename, architecture, and filepath.", "scope": "DpkgPM", "scopeKind": "class"}, {"name": "extract(self, pkg)", "description": "Extracts the contents of a specified package into a temporary directory.", "scope": "DpkgPM", "scopeKind": "class"}, {"name": "mark_packages(self, status_tag, packages=None)", "description": "Changes the status of specified packages in the dpkg status file.", "scope": "DpkgPM", "scopeKind": "class"}, {"name": "run_pre_post_installs(self, package_name=None)", "description": "Runs pre-install or post-install scripts for installed packages.", "scope": "DpkgPM", "scopeKind": "class"}, {"name": "update(self)", "description": "Updates package index files using apt-get.", "scope": "DpkgPM", "scopeKind": "class"}, {"name": "install(self, pkgs, attempt_only=False)", "description": "Installs specified packages using apt-get, with options for attempting only or actual installation.", "scope": "DpkgPM", "scopeKind": "class"}, {"name": "remove(self, pkgs, with_dependencies=True)", "description": "Removes specified packages, optionally with dependencies.", "scope": "DpkgPM", "scopeKind": "class"}, {"name": "write_index", "description": "Wrapper to generate package index files, handling locks."}, {"name": "insert_feeds_uris(self, feed_uris, feed_base_paths, feed_archs)", "description": "Adds external package repository URIs to the sources list file.", "scope": "DpkgPM", "scopeKind": "class"}, {"name": "_create_configs(self, archs, base_archs)", "description": "Creates architecture-specific and general configuration files for apt/dpkg setup.", "scope": "DpkgPM", "scopeKind": "class"}, {"name": "remove_packaging_data(self)", "description": "Removes stored packaging metadata to clean the environment.", "scope": "DpkgPM", "scopeKind": "class"}, {"name": "fix_broken_dependencies(self)", "description": "Attempts to repair broken dependencies with apt-get.", "scope": "DpkgPM", "scopeKind": "class"}, {"name": "list_installed(self)", "description": "Returns the list of installed packages using inherited listing method.", "scope": "DpkgPM", "scopeKind": "class"}, {"name": "package_info (overridden)", "description": "Fetches detailed package info and determines the filepath based on package archive."}, {"name": "extract (overridden)", "description": "Extracts package content and removes the archive data file post-extraction."}, {"name": "__init__(self, d, target_rootfs)", "scope": "OpkgDpkgPM", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, d, target_rootfs, archs, base_archs, apt_conf_dir=None, deb_repo_workdir=\"oe-rootfs-repo\", filterbydependencies=True)", "scope": "DpkgPM", "scopeKind": "class", "description": "unavailable"}, {"name": "_handle_intercept_failure(self, registered_pkgs)", "scope": "OpkgDpkgPM", "scopeKind": "class", "description": "unavailable"}, {"name": "extract(self, pkg, pkg_info)", "scope": "OpkgDpkgPM", "scopeKind": "class", "description": "unavailable"}, {"name": "package_info(self, pkg, cmd)", "scope": "OpkgDpkgPM", "scopeKind": "class", "description": "unavailable"}], "calls": ["subprocess.check_output", "os.chdir", "os.path.join", "re.sub", "re.match", "bb.utils.which", "bb.utils.mkdirhier", "bb.utils.remove", "bb.utils.rename", "bb.note", "bb.warn", "bb.fatal", "oe.path.join"], "search-terms": ["DpkgIndexer", "write_index", "package_info", "list_pkgs", "DpkgPM", "localedata", "apt-get", "dpkg-query", "index", "debian"], "state": 2, "file_id": 1807, "knowledge_revision": 14961, "git_revision": "", "ctags": [{"_type": "tag", "name": "DpkgIndexer", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^class DpkgIndexer(Indexer):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DpkgPM", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^class DpkgPM(OpkgDpkgPM):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OpkgDpkgPM", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^class OpkgDpkgPM(PackageManager):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PMPkgsList", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^class PMPkgsList(PkgsList):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def __init__(self, d, target_rootfs):$/", "language": "Python", "kind": "member", "signature": "(self, d, target_rootfs)", "scope": "OpkgDpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def __init__(self, d, target_rootfs, archs, base_archs, apt_conf_dir=None, deb_repo_workdir=/", "language": "Python", "kind": "member", "signature": "(self, d, target_rootfs, archs, base_archs, apt_conf_dir=None, deb_repo_workdir=\"oe-rootfs-repo\", filterbydependencies=True)", "scope": "DpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "_create_configs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def _create_configs(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DpkgIndexer", "scopeKind": "class"}, {"_type": "tag", "name": "_create_configs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def _create_configs(self, archs, base_archs):$/", "language": "Python", "kind": "member", "signature": "(self, archs, base_archs)", "scope": "DpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "_handle_intercept_failure", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def _handle_intercept_failure(self, registered_pkgs):$/", "language": "Python", "kind": "member", "signature": "(self, registered_pkgs)", "scope": "OpkgDpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "extract", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def extract(self, pkg):$/", "language": "Python", "kind": "member", "signature": "(self, pkg)", "scope": "DpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "extract", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def extract(self, pkg, pkg_info):$/", "language": "Python", "kind": "member", "signature": "(self, pkg, pkg_info)", "scope": "OpkgDpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "fix_broken_dependencies", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def fix_broken_dependencies(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "insert_feeds_uris", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def insert_feeds_uris(self, feed_uris, feed_base_paths, feed_archs):$/", "language": "Python", "kind": "member", "signature": "(self, feed_uris, feed_base_paths, feed_archs)", "scope": "DpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "install", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def install(self, pkgs, attempt_only=False):$/", "language": "Python", "kind": "member", "signature": "(self, pkgs, attempt_only=False)", "scope": "DpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "list_installed", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def list_installed(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "list_pkgs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def list_pkgs(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "PMPkgsList", "scopeKind": "class"}, {"_type": "tag", "name": "mark_packages", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def mark_packages(self, status_tag, packages=None):$/", "language": "Python", "kind": "member", "signature": "(self, status_tag, packages=None)", "scope": "DpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "package_info", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def package_info(self, pkg):$/", "language": "Python", "kind": "member", "signature": "(self, pkg)", "scope": "DpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "package_info", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def package_info(self, pkg, cmd):$/", "language": "Python", "kind": "member", "signature": "(self, pkg, cmd)", "scope": "OpkgDpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "remove", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def remove(self, pkgs, with_dependencies=True):$/", "language": "Python", "kind": "member", "signature": "(self, pkgs, with_dependencies=True)", "scope": "DpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "remove_packaging_data", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def remove_packaging_data(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "run_pre_post_installs", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def run_pre_post_installs(self, package_name=None):$/", "language": "Python", "kind": "member", "signature": "(self, package_name=None)", "scope": "DpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "update", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def update(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DpkgPM", "scopeKind": "class"}, {"_type": "tag", "name": "write_index", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def write_index(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DpkgIndexer", "scopeKind": "class"}, {"_type": "tag", "name": "write_index", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "pattern": "/^    def write_index(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DpkgPM", "scopeKind": "class"}], "hash": "019060550d297ded8793981977b13aae", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "openembedded-core/meta/lib/oe/package_manager/deb/__init__.py", "revision_history": [{"14961": ""}]}