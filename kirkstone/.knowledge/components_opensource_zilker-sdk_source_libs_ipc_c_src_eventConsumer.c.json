{"is_source_file": true, "format": "C", "description": "This file implements event consumer functionality for multicast event listening and processing; it maintains a list of service adapters, manages a dedicated thread for socket listening, and dispatches incoming JSON events to registered handlers via a thread pool.", "external_files": ["icBuildtime.h", "icTypes/icLinkedList.h", "icConcurrent/threadPool.h", "icLog/logging.h", "icIpc/eventConsumer.h", "icIpc/baseEvent.h", "icUtil/stringUtils.h", "icConcurrent/threadUtils.h", "ipcCommon.h", "transport/transport.h"], "external_methods": ["transport_sub_register", "transport_close", "canReadFromServiceSocket", "transport_sub_recv", "threadPoolCreate", "threadPoolAddTask", "threadPoolDestroy", "hashMapCreate", "hashMapContains", "hashMapPut", "hashMapGet", "hashMapDelete", "hashMapDestroy", "linkedListCreate", "linkedListAppend", "linkedListFind", "linkedListDelete", "linkedListDestroy", "createDetachedThread", "extractServiceIdFromRawEvent"], "published": ["startEventListener", "stopEventListener", "shutdownEventListener", "collectEventStatistics", "registerServiceSpecificEventHandlerThreadPool", "unregisterServiceSpecificEventHandlerThreadPool", "directlyProcessRawEvent"], "classes": [], "methods": [{"name": "bool startEventListener(uint16_t serviceIdNum,eventListenerAdapter handler)", "description": "Registers a handler for a specific service ID, initializes internal data structures, and starts the event reader thread if not already running.", "scope": "", "scopeKind": ""}, {"name": "void stopEventListener(uint16_t serviceIdNum)", "description": "Unregisters handlers for a specified service ID and initiates shutdown if no listeners remain.", "scope": "", "scopeKind": ""}, {"name": "void shutdownEventListener()", "description": "Forcefully shuts down the event listener thread and closes the socket.", "scope": "", "scopeKind": ""}, {"name": "void collectEventStatistics(runtimeStatsPojo * container,bool thenClear)", "description": "Gathers statistics about the event thread pool and stores them in the provided stats container.", "scope": "", "scopeKind": ""}, {"name": "bool registerServiceSpecificEventHandlerThreadPool(uint16_t serviceIdNum,icThreadPool * threadPool)", "description": "Associates a specific thread pool with a service ID for handling its events.", "scope": "", "scopeKind": ""}, {"name": "bool unregisterServiceSpecificEventHandlerThreadPool(uint16_t serviceIdNum)", "description": "Removes the association between a service ID and its thread pool.", "scope": "", "scopeKind": ""}, {"name": "void directlyProcessRawEvent(const char * eventJsonString)", "description": "Allows injection of raw event JSON strings into the processing pipeline as if they were received over the socket.", "scope": "", "scopeKind": ""}, {"name": "void * eventReaderThread(void * args)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool findAdapterById(void * searchVal,void * item)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void internalShutdown()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void processRawEventTask(void * args)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void processRawEventTaskArgFreeFunc(void * arg)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void processRawJsonEvent(cJSON * json)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "void serviceSpecificPoolFreeFunc(void * key,void * value)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool startReaderThread()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["transport_sub_register", "transport_close", "canReadFromServiceSocket", "transport_sub_recv", "threadPoolCreate", "threadPoolAddTask", "threadPoolDestroy", "hashMapCreate", "hashMapContains", "hashMapPut", "hashMapGet", "hashMapDelete", "linkedListCreate", "linkedListAppend", "linkedListFind", "linkedListDelete", "createDetachedThread", "extractServiceIdFromRawEvent"], "search-terms": ["event consumer", "multicast events", "event listener thread", "service adapter list", "JSON event processing", "socket-based event subscription", "thread pool event handling", "subscribe all adapter", "raw event injection", "event statistics"], "state": 2, "file_id": 737, "knowledge_revision": 13900, "git_revision": "", "ctags": [{"_type": "tag", "name": "LIST_MTX", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^static pthread_mutex_t LIST_MTX = PTHREAD_MUTEX_INITIALIZER;    \\/\\/ mutex for the adapterList$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "MAX_EVENT_HANDLERS", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^#define MAX_EVENT_HANDLERS /", "file": true, "language": "C", "kind": "macro"}, {"_type": "tag", "name": "SERVICE_POOL_MAP_MTX", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^static pthread_mutex_t SERVICE_POOL_MAP_MTX = PTHREAD_MUTEX_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_mutex_t", "kind": "variable"}, {"_type": "tag", "name": "_eventAdapter", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^typedef struct _eventAdapter$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "_rawEventContainer", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^typedef struct _rawEventContainer$/", "file": true, "language": "C", "kind": "struct"}, {"_type": "tag", "name": "adapterList", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^static icLinkedList *adapterList = NULL;                        \\/\\/ linked list of eventAdapter/", "file": true, "language": "C", "typeref": "typename:icLinkedList *", "kind": "variable"}, {"_type": "tag", "name": "collectEventStatistics", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^void collectEventStatistics(runtimeStatsPojo *container, bool thenClear)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(runtimeStatsPojo * container,bool thenClear)"}, {"_type": "tag", "name": "directlyProcessRawEvent", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^void directlyProcessRawEvent(const char *eventJsonString)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(const char * eventJsonString)"}, {"_type": "tag", "name": "eventAdapter", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^} eventAdapter;$/", "file": true, "language": "C", "typeref": "struct:_eventAdapter", "kind": "typedef"}, {"_type": "tag", "name": "eventCode", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^    int32_t eventCode;$/", "file": true, "language": "C", "typeref": "typename:int32_t", "kind": "member", "scope": "_rawEventContainer", "scopeKind": "struct"}, {"_type": "tag", "name": "eventReaderThread", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^static void* eventReaderThread(void* args)$/", "file": true, "language": "C", "typeref": "typename:void *", "kind": "function", "signature": "(void * args)"}, {"_type": "tag", "name": "eventThreadPool", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^static icThreadPool    *eventThreadPool;                        \\/\\/ thread pool to background p/", "file": true, "language": "C", "typeref": "typename:icThreadPool *", "kind": "variable"}, {"_type": "tag", "name": "eventValue", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^    int32_t eventValue;$/", "file": true, "language": "C", "typeref": "typename:int32_t", "kind": "member", "scope": "_rawEventContainer", "scopeKind": "struct"}, {"_type": "tag", "name": "findAdapterById", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^static bool findAdapterById(void *searchVal, void *item)$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(void * searchVal,void * item)"}, {"_type": "tag", "name": "handler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^    eventListenerAdapter handler;       \\/\\/ function to call to transcode and distribute events/", "file": true, "language": "C", "typeref": "typename:eventListenerAdapter", "kind": "member", "scope": "_eventAdapter", "scopeKind": "struct"}, {"_type": "tag", "name": "handler", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^    eventListenerAdapter handler[MAX_EVENT_HANDLERS];  \\/\\/ eventWorkerArgs->handler to use$/", "file": true, "language": "C", "typeref": "typename:eventListenerAdapter[]", "kind": "member", "scope": "_rawEventContainer", "scopeKind": "struct"}, {"_type": "tag", "name": "internalShutdown", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^static void internalShutdown()$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "jsonPayload", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^    cJSON   *jsonPayload;           \\/\\/ not a copy, the original created during the socket 'rea/", "file": true, "language": "C", "typeref": "typename:cJSON *", "kind": "member", "scope": "_rawEventContainer", "scopeKind": "struct"}, {"_type": "tag", "name": "processRawEventTask", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^static void processRawEventTask(void *args)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void * args)"}, {"_type": "tag", "name": "processRawEventTaskArgFreeFunc", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^static void processRawEventTaskArgFreeFunc(void *arg)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void * arg)"}, {"_type": "tag", "name": "processRawJsonEvent", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^static void processRawJsonEvent(cJSON *json)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(cJSON * json)"}, {"_type": "tag", "name": "rawEventContainer", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^} rawEventContainer;$/", "file": true, "language": "C", "typeref": "struct:_rawEventContainer", "kind": "typedef"}, {"_type": "tag", "name": "readSock", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^static int        readSock = -1;$/", "file": true, "language": "C", "typeref": "typename:int", "kind": "variable"}, {"_type": "tag", "name": "readThreadCond", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^static pthread_cond_t readThreadCond = PTHREAD_COND_INITIALIZER;$/", "file": true, "language": "C", "typeref": "typename:pthread_cond_t", "kind": "variable"}, {"_type": "tag", "name": "registerServiceSpecificEventHandlerThreadPool", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^bool registerServiceSpecificEventHandlerThreadPool(uint16_t serviceIdNum, icThreadPool *threadPo/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(uint16_t serviceIdNum,icThreadPool * threadPool)"}, {"_type": "tag", "name": "running", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^static bool       running = false;$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "variable"}, {"_type": "tag", "name": "serviceIdNum", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^    uint32_t             serviceIdNum;  \\/\\/ service id this adapter represents$/", "file": true, "language": "C", "typeref": "typename:uint32_t", "kind": "member", "scope": "_eventAdapter", "scopeKind": "struct"}, {"_type": "tag", "name": "serviceSpecificPoolFreeFunc", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^static void serviceSpecificPoolFreeFunc(void *key, void *value)$/", "file": true, "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(void * key,void * value)"}, {"_type": "tag", "name": "serviceSpecificPoolMap", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^static icHashMap *serviceSpecificPoolMap = NULL; \\/\\/ Map of serviceId->threadPool$/", "file": true, "language": "C", "typeref": "typename:icHashMap *", "kind": "variable"}, {"_type": "tag", "name": "shutdownEventListener", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^void shutdownEventListener()$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "startEventListener", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^bool startEventListener(uint16_t serviceIdNum, eventListenerAdapter handler)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(uint16_t serviceIdNum,eventListenerAdapter handler)"}, {"_type": "tag", "name": "startReaderThread", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^static bool startReaderThread()$/", "file": true, "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "stopEventListener", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^void stopEventListener(uint16_t serviceIdNum)$/", "language": "C", "typeref": "typename:void", "kind": "function", "signature": "(uint16_t serviceIdNum)"}, {"_type": "tag", "name": "subscribeAllAdapter", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^static eventAdapter* subscribeAllAdapter = NULL;$/", "file": true, "language": "C", "typeref": "typename:eventAdapter *", "kind": "variable"}, {"_type": "tag", "name": "unregisterServiceSpecificEventHandlerThreadPool", "path": "/home/kavia/workspace/code-generation/Kirkstone/kirkstone/components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "pattern": "/^bool unregisterServiceSpecificEventHandlerThreadPool(uint16_t serviceIdNum)$/", "language": "C", "typeref": "typename:bool", "kind": "function", "signature": "(uint16_t serviceIdNum)"}], "hash": "951b1fd152408711d34c62aba80a519a", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "components/opensource/zilker-sdk/source/libs/ipc/c/src/eventConsumer.c", "fields": [{"name": "pthread_mutex_t LIST_MTX", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_mutex_t SERVICE_POOL_MAP_MTX", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "icLinkedList * adapterList", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int32_t eventCode", "scope": "_rawEventContainer", "scopeKind": "struct", "description": "unavailable"}, {"name": "icThreadPool * eventThreadPool", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int32_t eventValue", "scope": "_rawEventContainer", "scopeKind": "struct", "description": "unavailable"}, {"name": "eventListenerAdapter handler", "scope": "_eventAdapter", "scopeKind": "struct", "description": "unavailable"}, {"name": "eventListenerAdapter[] handler", "scope": "_rawEventContainer", "scopeKind": "struct", "description": "unavailable"}, {"name": "cJSON * jsonPayload", "scope": "_rawEventContainer", "scopeKind": "struct", "description": "unavailable"}, {"name": "int readSock", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pthread_cond_t readThreadCond", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool running", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "uint32_t serviceIdNum", "scope": "_eventAdapter", "scopeKind": "struct", "description": "unavailable"}, {"name": "icHashMap * serviceSpecificPoolMap", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "eventAdapter * subscribeAllAdapter", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"13900": ""}]}