{"is_source_file": true, "format": "shell script", "description": "This script manages the lifecycle of an FTP server service. It initializes service parameters, starts/stops the FTP daemon (tinyftp), and responds to system events such as lan-status and wan-status to restart or halt the service accordingly.", "external_files": ["/etc/utopia/service.d/ulog_functions.sh"], "external_methods": ["utctx_cmd get current_lan_ipaddr", "ulog", "sysevent set", "sysevent get", "killall tinyftp"], "published": ["SERVICE_NAME", "SELF_NAME", "service_init", "service_start", "service_stop", "service_lanwan_status"], "classes": [], "methods": [{"name": "service_init", "description": "Initializes the service by retrieving the current LAN IP address."}, {"name": "service_start", "description": "Starts the FTP service by creating the directory if needed, setting permissions, and launching tinyftp."}, {"name": "service_stop", "description": "Stops the FTP service by killing the tinyftp process and updating system event statuses."}, {"name": "service_lanwan_status", "description": "Checks LAN and WAN status, and starts or stops the FTP service accordingly."}], "calls": ["utctx_cmd get current_lan_ipaddr", "ulog ${SERVICE_NAME} status \"starting ${SERVICE_NAME} service\"", "mkdir -p $DIR_NAME", "chown admin $DIR_NAME", "chgrp admin $DIR_NAME", "chmod 755 $DIR_NAME", "tinyftp -d -s \"$LAN_IPADDR\" -p 21 -c $DIR_NAME &", "sysevent set ${SERVICE_NAME}-errinfo", "sysevent set ${SERVICE_NAME}-status \"started\"", "killall tinyftp", "sysevent get lan-status", "sysevent get wan-status"], "search-terms": ["ftp daemon", "tinyftp", "service control", "Utopia", "system event", "shell script FTP service", "service lifecycle"], "state": 2, "file_id": 7538, "knowledge_revision": 20606, "git_revision": "", "hash": "b5038896f2134a706f553952b5ad4e96", "format-version": 4, "code-base-name": "meta-rdk-sampleapp", "filename": "rdkb/components/opensource/ccsp/Utopia/source/scripts/init/service.d/service_ftpserver.sh", "revision_history": [{"20606": ""}]}